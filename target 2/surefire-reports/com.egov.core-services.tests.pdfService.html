<!DOCTYPE html>
<html lang="en">
  <head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <link href="res/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="res/karate-report.css" rel="stylesheet" type="text/css">
    <link href="favicon.ico" rel="shortcut icon">
    <script src="res/jquery.min.js" type="text/javascript"></script>
    <script src="res/jquery.tablesorter.min.js" type="text/javascript"></script>
    <script src="res/bootstrap.min.js" type="text/javascript"></script>
    <script src="res/karate-report.js" type="text/javascript"></script>
    <title>com.egov.core-services.tests.pdfService</title>
  </head>
  <body>
    <div id="root-container">
      <div id="leftnav">
        <div class="nav-logo">
          <a href="karate-summary.html">
            <img alt="Karate" src="res/karate-logo.svg">
          </a>
          <div class="nav-count">
            <div class="bg-success" id="nav-pass">13</div>
            <div class="bg-danger" id="nav-fail">3</div>
          </div>
        </div>
        <div id="nav-type">Scenarios</div>         
        <div id="nav-date">2021-08-10 03:40:54 PM</div>        
      <div class="nav-container"><div class="nav-item passed"><a href="#[1:9]">[1:9] Verify a pdf is generated successfully for Property Tax  module </a></div><div class="nav-item passed"><a href="#[2:18]">[2:18] Verify the FileStore ID is created in the Response for the PT API call for PDF generation service </a></div><div class="nav-item passed"><a href="#[3:26]">[3:26] Verify a pdf is generated successfully for Trade License  module </a></div><div class="nav-item passed"><a href="#[4:36]">[4:36] Verify the FileStore ID is created in the Response for the TL API call for PDF generation service </a></div><div class="nav-item passed"><a href="#[5:44]">[5:44] Verify a pdf is generated successfully for Fire NOC module </a></div><div class="nav-item passed"><a href="#[6:54]">[6:54] Verify the FileStore ID is created in the Response for the FireNOC API call for PDF generation service </a></div><div class="nav-item failed"><a href="#[7:62]">[7:62] Verify a pdf is generated successfully for water &amp; Severage module </a></div><div class="nav-item failed"><a href="#[8:72]">[8:72] Verify the FileStore ID is created in the Response for the WnS API call for PDF generation service </a></div><div class="nav-item passed"><a href="#[9:80]">[9:80] "Verify generating PDF without tenant id and check for errors(all the modules)" </a></div><div class="nav-item passed"><a href="#[10:89]">[10:89] "Verify generating PDF invalid/nonexistant or by not passing key and check for errors(all the modules)" </a></div><div class="nav-item passed"><a href="#[11:97]">[11:97] Generate PDF config for PT module for a given key and tenantid </a></div><div class="nav-item passed"><a href="#[12:104]">[12:104] Generate PDF config for TL module for a given key and tenantid </a></div><div class="nav-item failed"><a href="#[13:111]">[13:111] Generate PDF config for WS module for a given key and tenantid </a></div><div class="nav-item passed"><a href="#[14:119]">[14:119] Generate PDF config for FireNOC module for a given key and tenantid </a></div><div class="nav-item passed"><a href="#[15:127]">[15:127] Generate PDF config wihtout passing key or tenantid </a></div><div class="nav-item passed"><a href="#[16:134]">[16:134] Generate PDF config by passing invalid key </a></div></div></div>
      <div id="content">
      <div class="page-heading alert alert-primary"><a href="karate-summary.html">Summary</a><span class="feature-label">|</span><a href="karate-tags.html">Tags</a><span class="feature-label">|</span><span class="feature-label">Feature:</span><span class="feature-name">com/egov/core-services/tests/pdfService.feature</span><span class="feature-description">pdf service</span></div><div class="scenario"><div class="scenario-heading" id="[1:9]"><div class="heading-container"><div class="scenario-tags"><a class="badge badge-primary" href="karate-tags.html">regression</a><a class="badge badge-primary" href="karate-tags.html">pdf_create_PT_01</a><a class="badge badge-primary" href="karate-tags.html">positive</a><a class="badge badge-primary" href="karate-tags.html">pdfservice</a><a class="badge badge-primary" href="karate-tags.html">coreServices</a></div><span class="scenario-keyword">Scenario: [1:9]</span><span class="scenario-name">Verify a pdf is generated successfully for Property Tax  module </span></div><div class="scenario-time passed">ms: 3606</div></div><div class="step-row"><div class="step-container" id="[1:9]bg"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-cell passed">Background:</div></div><div class="time-cell passed"></div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-cell comment"># reading javascript utils for using generic methods</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="1"><div class="step-ref bg-step">1</div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">1</div></div><div class="preformatted" data-parent="1">15:37:17.685 karate.env:  
15:37:17.686 locale: en_IN 
15:37:17.686 tenantId: pb.amritsar</div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="2"><div class="step-ref bg-step">2</div><div class="step-cell passed">* def pdfCreateConstant = read('../../core-services/constants/pdfService.yaml')</div></div><div class="time-cell passed">8</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="3"><div class="step-ref bg-step">3</div><div class="step-cell passed">* call read('../../business-services/tests/collectionServicesCreate.feature@Create_PaymentWithValidBillID_01')</div></div><div class="time-cell passed">2714</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="3.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/tests/collectionServicesCreate.feature</div></div><div class="time-cell passed">2686</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="4"><div class="step-ref bg-step">4</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/tests/billingServicesDemand.feature@create_01')</div></div><div class="time-cell passed">637</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="4.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/tests/billingServicesDemand.feature</div></div><div class="time-cell passed">528</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="5"><div class="step-ref bg-step">5</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="6"><div class="step-ref bg-step">6</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceDemandConstants = read('../../business-services/constants/billing-service-demand.yaml')</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="7"><div class="step-ref bg-step">7</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">6</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="8"><div class="step-ref bg-step">8</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell passed">53</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="9"><div class="step-ref bg-step">9</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def consumerType = mdmsStateBillingService.BusinessService[0].businessService</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="10"><div class="step-ref bg-step">10</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = mdmsStateBillingService.BusinessService[0].code</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="11"><div class="step-ref bg-step">11</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxPeriodFrom = getCurrentEpochTime()</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="12"><div class="step-ref bg-step">12</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def daysFromToday = 2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="13"><div class="step-ref bg-step">13</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxPeriodTo = getEpochDate(daysFromToday)</div></div><div class="time-cell passed">19</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="14"><div class="step-ref bg-step">14</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxHeadMasterCodes = karate.jsonPath(mdmsStateBillingService, "$.TaxHeadMaster[?(@.service=='" + businessService + "')].code")</div></div><div class="time-cell passed">9</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="15"><div class="step-ref bg-step">15</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxHeadMasterCode = taxHeadMasterCodes[randomNumber(taxHeadMasterCodes.length)]</div></div><div class="time-cell passed">12</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="16"><div class="step-ref bg-step">16</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxAmount = 200</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="17"><div class="step-ref bg-step">17</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionAmount = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="18"><div class="step-ref bg-step">18</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def minimumAmountPayable = 1</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Steps to create a new Employee through HRMS</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="19"><div class="step-ref bg-step">19</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServiceDemandPretest.feature@createBillDemand')</div></div><div class="time-cell passed">362</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="19.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServiceDemandPretest.feature</div></div><div class="time-cell passed">348</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="20"><div class="step-ref bg-step">20</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="21"><div class="step-ref bg-step">21</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceDemandConstants = read('../../business-services/constants/billing-service-demand.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="22"><div class="step-ref bg-step">22</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="23"><div class="step-ref bg-step">23</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createDemandRequest = read('../../business-services/requestPayload/billing-service-demand/create.json')</div></div><div class="time-cell passed">17</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="24"><div class="step-ref bg-step">24</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchDemandRequest = read('../../business-services/requestPayload/billing-service-demand/search.json')</div></div><div class="time-cell passed">26</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="25"><div class="step-ref bg-step">25</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def updateDemandRequest = read('../../business-services/requestPayload/billing-service-demand/update.json')</div></div><div class="time-cell passed">18</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="26"><div class="step-ref bg-step">26</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="27"><div class="step-ref bg-step">27</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url createDemandUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print createDemandRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="28"><div class="step-ref bg-step">28</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request createDemandRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="29"><div class="step-ref bg-step">29</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">268</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="30"><div class="step-ref bg-step">30</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="31"><div class="step-ref bg-step">31</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billingServiceDemandResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="32"><div class="step-ref bg-step">32</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billingServiceDemandResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="33"><div class="step-ref bg-step">33</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* print billingServiceDemandResponseBody</div></div><div class="time-cell passed">0</div></div><div class="preformatted" data-parent="33">15:37:18.303 [print] {
  "ResponseInfo": {
    "ver": null,
    "resMsgId": null,
    "msgId": null,
    "apiId": null,
    "ts": null,
    "status": "201 CREATED"
  },
  "Demands": [
    {
      "taxPeriodFrom": 1628590037903,
      "businessService": "PT",
      "minimumAmountPayable": 1,
      "taxPeriodTo": 1628762837923,
      "fixedBillExpiryDate": null,
      "additionalDetails": null,
      "payer": null,
      "demandDetails": [
        {
          "demandId": "7074cbf0-6d5f-431e-8496-c07a04f32567",
          "taxHeadMasterCode": "PT_UNIT_USAGE_EXEMPTION",
          "collectionAmount": 0,
          "auditDetails": {
            "lastModifiedTime": 1628590038468,
            "createdBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
            "lastModifiedBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
            "createdTime": 1628590038468
          },
          "tenantId": "pb.amritsar",
          "id": "18531077-cb6b-44ee-8da4-a49c4c87a6bd",
          "taxAmount": 200,
          "additionalDetails": null
        }
      ],
      "consumerType": "PropertyTax",
      "auditDetails": {
        "lastModifiedTime": 1628590038468,
        "createdBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
        "lastModifiedBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
        "createdTime": 1628590038468
      },
      "tenantId": "pb.amritsar",
      "consumerCode": "Consumer-Code-Test-647535",
      "id": "7074cbf0-6d5f-431e-8496-c07a04f32567",
      "billExpiryTime": null,
      "isPaymentCompleted": false,
      "status": "ACTIVE"
    }
  ],
  "CollectedReceipt": null
}</div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="34"><div class="step-ref bg-step">34</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def Demands = billingServiceDemandResponseBody.Demands</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="35"><div class="step-ref bg-step">35</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def demandId = Demands[0].id</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="36"><div class="step-ref bg-step">36</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def consumerCode = Demands[0].consumerCode</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the status Created</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="37"><div class="step-ref bg-step">37</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* assert billingServiceDemandResponseBody.ResponseInfo.status == commonConstants.expectedStatus.created</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand id is present</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="38"><div class="step-ref bg-step">38</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].id == "#present"</div></div><div class="time-cell passed">8</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the tenantId of demand response is equal with current tenantId</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="39"><div class="step-ref bg-step">39</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].tenantId == tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the consumer code of demand response is equal with defined consumerCode</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="40"><div class="step-ref bg-step">40</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].consumerCode == consumerCode</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the consumerType of demand response is equal with defined consumerType</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="41"><div class="step-ref bg-step">41</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].consumerType == consumerType</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the businessService of demand response is equal with defined businessService</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="42"><div class="step-ref bg-step">42</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].businessService == businessService</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxPeriodFrom of demand response is equal with defined taxPeriodFrom</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="43"><div class="step-ref bg-step">43</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].taxPeriodFrom == taxPeriodFrom</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxPeriodTo of demand response is equal with defined taxPeriodTo</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="44"><div class="step-ref bg-step">44</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].taxPeriodTo == taxPeriodTo</div></div><div class="time-cell passed">25</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand details id is present in demand response body</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="45"><div class="step-ref bg-step">45</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].id == "#present"</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demandId is present in demand response body</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="46"><div class="step-ref bg-step">46</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].demandId == "#present"</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxHeadMasterCode of demand response is equal with defined taxHeadMasterCode</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="47"><div class="step-ref bg-step">47</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].taxHeadMasterCode == taxHeadMasterCode</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxAmount of demand response is equal with defined taxAmount</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="48"><div class="step-ref bg-step">48</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].taxAmount == taxAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the collectionAmount of demand response is equal with defined collectionAmount</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="49"><div class="step-ref bg-step">49</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].collectionAmount == collectionAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the minimumAmountPayable of demand response is equal with defined minimumAmountPayable</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="50"><div class="step-ref bg-step">50</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].minimumAmountPayable == minimumAmountPayable</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand status is equal with expected demand status `ACTIVE`</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="51"><div class="step-ref bg-step">51</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].status == billingServiceDemandConstants.parameters.status</div></div><div class="time-cell passed">8</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="52"><div class="step-ref bg-step">52</div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="53"><div class="step-ref bg-step">53</div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="54"><div class="step-ref bg-step">54</div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">7</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="55"><div class="step-ref bg-step">55</div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="56"><div class="step-ref bg-step">56</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServicePretest.feature@fetchBill')</div></div><div class="time-cell passed">337</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="56.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServicePretest.feature</div></div><div class="time-cell passed">312</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="57"><div class="step-ref bg-step">57</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceConstants = read('../../business-services/constants/billing-service.yaml')</div></div><div class="time-cell passed">7</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="58"><div class="step-ref bg-step">58</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionServiceConstants = read('../../business-services/constants/apportionService.yaml')</div></div><div class="time-cell passed">10</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="59"><div class="step-ref bg-step">59</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = billingServiceConstants.parameters.businessService</div></div><div class="time-cell passed">13</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="60"><div class="step-ref bg-step">60</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionbusinessService = apportionServiceConstants.parameters.businessService</div></div><div class="time-cell passed">8</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="61"><div class="step-ref bg-step">61</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason1 = apportionServiceConstants.parameters.reason1</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="62"><div class="step-ref bg-step">62</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason2 = apportionServiceConstants.parameters.reason2</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="63"><div class="step-ref bg-step">63</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason3 = apportionServiceConstants.parameters.reason3</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="64"><div class="step-ref bg-step">64</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason4 = apportionServiceConstants.parameters.reason4</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment">#* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="65"><div class="step-ref bg-step">65</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillRequest = read('../../business-services/requestPayload/collection-services/fetchBill.json')</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="66"><div class="step-ref bg-step">66</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillRequest = read('../../business-services/requestPayload/collection-services/cancelBill.json')</div></div><div class="time-cell passed">10</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="67"><div class="step-ref bg-step">67</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="68"><div class="step-ref bg-step">68</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillParams =</div></div><div class="time-cell passed">0</div></div><div class="preformatted" data-parent="68">{
   consumerCode: '#(consumerCode)',
   businessService: '#(businessService)',
   tenantId: '#(tenantId)'
}</div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="69"><div class="step-ref bg-step">69</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url fetchBill</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="70"><div class="step-ref bg-step">70</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And params fetchBillParams</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillParams</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="71"><div class="step-ref bg-step">71</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request fetchBillRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="72"><div class="step-ref bg-step">72</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">227</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillResponse</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="73"><div class="step-ref bg-step">73</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="74"><div class="step-ref bg-step">74</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def fetchBillResponse = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="75"><div class="step-ref bg-step">75</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmount = response.Bill[0].totalAmount</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="76"><div class="step-ref bg-step">76</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billId = response.Bill[0].id</div></div><div class="time-cell passed">14</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="77"><div class="step-ref bg-step">77</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def txnAmount = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="78"><div class="step-ref bg-step">78</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmountPaid = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="79"><div class="step-ref bg-step">79</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalDue = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="80"><div class="step-ref bg-step">80</div><div class="step-indent"> </div><div class="step-cell passed">* def paidBillIdError = collectionServicesConstants.errorMessages.paidBillId</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="81"><div class="step-ref bg-step">81</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillIdError = collectionServicesConstants.errorMessages.invalidBillId</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="82"><div class="step-ref bg-step">82</div><div class="step-indent"> </div><div class="step-cell passed">* def totalAmountPaidError = collectionServicesConstants.errorMessages.totalAmountPaidNull</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="83"><div class="step-ref bg-step">83</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentModeError = collectionServicesConstants.errorMessages.invalidPaymentMode</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="84"><div class="step-ref bg-step">84</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantIdError = commonConstants.errorMessages.invalidTenantIdError</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="85"><div class="step-ref bg-step">85</div><div class="step-indent"> </div><div class="step-cell passed">* def nullTenantIdError = commonConstants.errorMessages.nullParameterError</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="86"><div class="step-ref bg-step">86</div><div class="step-indent"> </div><div class="step-cell passed">* def reason = collectionServicesConstants.parameters.reason</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="87"><div class="step-ref bg-step">87</div><div class="step-indent"> </div><div class="step-cell passed">* def action = collectionServicesConstants.parameters.action</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="88"><div class="step-ref bg-step">88</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDateError = collectionServicesConstants.errorMessages.instrumentDateAsNull</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="89"><div class="step-ref bg-step">89</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentPastDateError = collectionServicesConstants.errorMessages.instrumentDatePastNinetyDays</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="90"><div class="step-ref bg-step">90</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentFutureDateError = collectionServicesConstants.errorMessages.futureInstrumentDate</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="91"><div class="step-ref bg-step">91</div><div class="step-indent"> </div><div class="step-cell passed">* def moreThanDueAmountError = collectionServicesConstants.errorMessages.moreThanDueAmount</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="92"><div class="step-ref bg-step">92</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberError = collectionServicesConstants.errorMessages.instrumentNumberAsEmptyString</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="93"><div class="step-ref bg-step">93</div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberError = collectionServicesConstants.errorMessages.transactionNumberAsEmptyString</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="94"><div class="step-ref bg-step">94</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/collectionServicesPretest.feature@createPayment')</div></div><div class="time-cell passed">618</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="94.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/collectionServicesPretest.feature</div></div><div class="time-cell passed">564</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="95"><div class="step-ref bg-step">95</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="96"><div class="step-ref bg-step">96</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="97"><div class="step-ref bg-step">97</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="98"><div class="step-ref bg-step">98</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def tenantId = tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="99"><div class="step-ref bg-step">99</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentMode = collectionServicesConstants.parameters.paymentMode</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="100"><div class="step-ref bg-step">100</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBy = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="101"><div class="step-ref bg-step">101</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">7</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="102"><div class="step-ref bg-step">102</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def payerName = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="103"><div class="step-ref bg-step">103</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalDue = 0</div></div><div class="time-cell passed">19</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="104"><div class="step-ref bg-step">104</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumber = collectionServicesConstants.parameters.transactionNumber</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="105"><div class="step-ref bg-step">105</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumber = collectionServicesConstants.parameters.instrumentNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="106"><div class="step-ref bg-step">106</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCard = collectionServicesConstants.parameters.paymentMode2</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="107"><div class="step-ref bg-step">107</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCheque = collectionServicesConstants.parameters.paymentModeForCheque</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="108"><div class="step-ref bg-step">108</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberForCheque = collectionServicesConstants.parameters.transactionNumberForCheque</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="109"><div class="step-ref bg-step">109</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberForCheque = collectionServicesConstants.parameters.instrumentNumberForCheque</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="110"><div class="step-ref bg-step">110</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="111"><div class="step-ref bg-step">111</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def ifscCode = collectionServicesConstants.parameters.ifscCode</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="112"><div class="step-ref bg-step">112</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="113"><div class="step-ref bg-step">113</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="114"><div class="step-ref bg-step">114</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequest = read('../../business-services/requestPayload/collection-services/create.json')</div></div><div class="time-cell passed">19</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="115"><div class="step-ref bg-step">115</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def workflowRequest = read('../../business-services/requestPayload/collection-services/workflow.json')</div></div><div class="time-cell passed">8</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="116"><div class="step-ref bg-step">116</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPaymentRequest = read('../../business-services/requestPayload/collection-services/search.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="117"><div class="step-ref bg-step">117</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTreceiptcount = read('../../business-services/requestPayload/collection-services/receiptcount.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="118"><div class="step-ref bg-step">118</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequestForCheque = read('../../business-services/requestPayload/collection-services/createPaymentWithCheque.json')</div></div><div class="time-cell passed">16</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="119"><div class="step-ref bg-step">119</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def eChallanPaymentcount = read('../../business-services/requestPayload/collection-services/echallancount.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="120"><div class="step-ref bg-step">120</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="121"><div class="step-ref bg-step">121</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = 'invalid_'+randomNumber(4)</div></div><div class="time-cell passed">8</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="122"><div class="step-ref bg-step">122</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBusinessId = 'PT'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="123"><div class="step-ref bg-step">123</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentMode = randomString(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="124"><div class="step-ref bg-step">124</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantId = randomString(5)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="125"><div class="step-ref bg-step">125</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def negativeTotalAmount = '-'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="126"><div class="step-ref bg-step">126</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url payment</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="127"><div class="step-ref bg-step">127</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request createPaymentRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print createPaymentRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="128"><div class="step-ref bg-step">128</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">430</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="129"><div class="step-ref bg-step">129</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="130"><div class="step-ref bg-step">130</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="131"><div class="step-ref bg-step">131</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="132"><div class="step-ref bg-step">132</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def Payments = collectionServicesResponseBody.Payments</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="133"><div class="step-ref bg-step">133</div><div class="step-indent"> </div><div class="step-cell passed">* match response.ResponseInfo.status == '200 OK'</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="134"><div class="step-ref bg-step">134</div><div class="step-indent"> </div><div class="step-cell passed">* def paymentId = collectionServicesResponseBody.Payments[0].id</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="135"><div class="step-ref bg-step">135</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/collectionServicesPretest.feature@processworkflow')</div></div><div class="time-cell passed">1043</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="135.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/collectionServicesPretest.feature</div></div><div class="time-cell passed">961</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="136"><div class="step-ref bg-step">136</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">28</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="137"><div class="step-ref bg-step">137</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="138"><div class="step-ref bg-step">138</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="139"><div class="step-ref bg-step">139</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def tenantId = tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="140"><div class="step-ref bg-step">140</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentMode = collectionServicesConstants.parameters.paymentMode</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="141"><div class="step-ref bg-step">141</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBy = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">11</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="142"><div class="step-ref bg-step">142</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="143"><div class="step-ref bg-step">143</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def payerName = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="144"><div class="step-ref bg-step">144</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalDue = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="145"><div class="step-ref bg-step">145</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumber = collectionServicesConstants.parameters.transactionNumber</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="146"><div class="step-ref bg-step">146</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumber = collectionServicesConstants.parameters.instrumentNumber</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="147"><div class="step-ref bg-step">147</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCard = collectionServicesConstants.parameters.paymentMode2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="148"><div class="step-ref bg-step">148</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCheque = collectionServicesConstants.parameters.paymentModeForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="149"><div class="step-ref bg-step">149</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberForCheque = collectionServicesConstants.parameters.transactionNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="150"><div class="step-ref bg-step">150</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberForCheque = collectionServicesConstants.parameters.instrumentNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="151"><div class="step-ref bg-step">151</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="152"><div class="step-ref bg-step">152</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def ifscCode = collectionServicesConstants.parameters.ifscCode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="153"><div class="step-ref bg-step">153</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="154"><div class="step-ref bg-step">154</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="155"><div class="step-ref bg-step">155</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequest = read('../../business-services/requestPayload/collection-services/create.json')</div></div><div class="time-cell passed">16</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="156"><div class="step-ref bg-step">156</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def workflowRequest = read('../../business-services/requestPayload/collection-services/workflow.json')</div></div><div class="time-cell passed">7</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="157"><div class="step-ref bg-step">157</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPaymentRequest = read('../../business-services/requestPayload/collection-services/search.json')</div></div><div class="time-cell passed">10</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="158"><div class="step-ref bg-step">158</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTreceiptcount = read('../../business-services/requestPayload/collection-services/receiptcount.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="159"><div class="step-ref bg-step">159</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequestForCheque = read('../../business-services/requestPayload/collection-services/createPaymentWithCheque.json')</div></div><div class="time-cell passed">18</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="160"><div class="step-ref bg-step">160</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def eChallanPaymentcount = read('../../business-services/requestPayload/collection-services/echallancount.json')</div></div><div class="time-cell passed">19</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="161"><div class="step-ref bg-step">161</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="162"><div class="step-ref bg-step">162</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = 'invalid_'+randomNumber(4)</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="163"><div class="step-ref bg-step">163</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBusinessId = 'PT'+randomNumber(4)</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="164"><div class="step-ref bg-step">164</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentMode = randomString(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="165"><div class="step-ref bg-step">165</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantId = randomString(5)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="166"><div class="step-ref bg-step">166</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def negativeTotalAmount = '-'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="167"><div class="step-ref bg-step">167</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url collectionServiceWorkflowUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="168"><div class="step-ref bg-step">168</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request workflowRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print workflowRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="169"><div class="step-ref bg-step">169</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">800</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="170"><div class="step-ref bg-step">170</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="171"><div class="step-ref bg-step">171</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[1:9]bg"><div class="step-container" id="172"><div class="step-ref bg-step">172</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="173"><div class="step-ref passed">173</div><div class="step-cell passed">* def key = pdfCreateConstant.parameters.valid.keyForPt</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-cell comment"># calling create pdf pretest</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="174"><div class="step-ref passed">174</div><div class="step-cell passed">* call read('../../core-services/pretests/pdfServiceCreate.feature@createPdfForPtSuccessfully')</div></div><div class="time-cell passed">878</div></div><div class="step-row"><div class="step-container" id="174.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-cell passed">com/egov/core-services/tests/../../core-services/pretests/pdfServiceCreate.feature</div></div><div class="time-cell passed">863</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-cell comment"># * call read('../../business-services/tests/collectionServicesCreate.feature@Create_PaymentWithValidBillID_01')</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-cell comment">#* def Payments = Payments</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="175"><div class="step-ref passed">175</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayload = read('../../core-services/requestPayload/pdf-service/pdfCreate.json')</div></div><div class="time-cell passed">8</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-cell comment"># initializing pdf create payload objects</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="176"><div class="step-ref passed">176</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayloadFirst = pdfCreatePayload.TL</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="177"><div class="step-ref passed">177</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayloadSecond = pdfCreatePayload.PT</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="178"><div class="step-ref passed">178</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayloadThird = pdfCreatePayload.FireNoc</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="179"><div class="step-ref passed">179</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayloadFourth = pdfCreatePayload.WS</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="180"><div class="step-ref passed">180</div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="181"><div class="step-ref passed">181</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreateParam =</div></div><div class="time-cell passed">1</div></div><div class="preformatted" data-parent="181">{
 key: '#(key)',
 tenantId: '#(tenantId)'
}</div><div class="step-row"><div class="step-container" id="182"><div class="step-ref passed">182</div><div class="step-indent"> </div><div class="step-cell passed">Given url createPdf</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="183"><div class="step-ref passed">183</div><div class="step-indent"> </div><div class="step-cell passed">And params pdfCreateParam</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="184"><div class="step-ref passed">184</div><div class="step-indent"> </div><div class="step-cell passed">* eval pdfCreatePayloadSecond.Payments = Payments</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="185"><div class="step-ref passed">185</div><div class="step-indent"> </div><div class="step-cell passed">And request pdfCreatePayloadSecond</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="186"><div class="step-ref passed">186</div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">844</div></div><div class="step-row"><div class="step-container" id="187"><div class="step-ref passed">187</div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="188"><div class="step-ref passed">188</div><div class="step-indent"> </div><div class="step-cell passed">And def pdfCreateResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="189"><div class="step-ref passed">189</div><div class="step-indent"> </div><div class="step-cell passed">And def pdfCreateResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="190"><div class="step-ref passed">190</div><div class="step-cell passed">* match pdfCreateResponseBody == '#present'</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="191"><div class="step-ref passed">191</div><div class="step-cell passed">* assert pdfCreateResponseBody.message == pdfCreateConstant.expectedMessages.message</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="192"><div class="step-ref passed">192</div><div class="step-cell passed">* match pdfCreateResponseBody.ResponseInfo.userInfo.roles.length == '##[_ &gt; 0]'</div></div><div class="time-cell passed">1</div></div></div><div class="scenario"><div class="scenario-heading" id="[2:18]"><div class="heading-container"><div class="scenario-tags"><a class="badge badge-primary" href="karate-tags.html">pdf_create_PT_FS_02</a><a class="badge badge-primary" href="karate-tags.html">regression</a><a class="badge badge-primary" href="karate-tags.html">positive</a><a class="badge badge-primary" href="karate-tags.html">pdfservice</a><a class="badge badge-primary" href="karate-tags.html">coreServices</a></div><span class="scenario-keyword">Scenario: [2:18]</span><span class="scenario-name">Verify the FileStore ID is created in the Response for the PT API call for PDF generation service </span></div><div class="scenario-time passed">ms: 2793</div></div><div class="step-row"><div class="step-container" id="[2:18]bg"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-cell passed">Background:</div></div><div class="time-cell passed"></div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-cell comment"># reading javascript utils for using generic methods</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="193"><div class="step-ref bg-step">193</div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">13</div></div><div class="preformatted" data-parent="193">15:37:21.413 karate.env:  
15:37:21.413 locale: en_IN 
15:37:21.414 tenantId: pb.amritsar</div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="194"><div class="step-ref bg-step">194</div><div class="step-cell passed">* def pdfCreateConstant = read('../../core-services/constants/pdfService.yaml')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="195"><div class="step-ref bg-step">195</div><div class="step-cell passed">* call read('../../business-services/tests/collectionServicesCreate.feature@Create_PaymentWithValidBillID_01')</div></div><div class="time-cell passed">1980</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="195.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/tests/collectionServicesCreate.feature</div></div><div class="time-cell passed">1964</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="196"><div class="step-ref bg-step">196</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/tests/billingServicesDemand.feature@create_01')</div></div><div class="time-cell passed">295</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="196.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/tests/billingServicesDemand.feature</div></div><div class="time-cell passed">255</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="197"><div class="step-ref bg-step">197</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="198"><div class="step-ref bg-step">198</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceDemandConstants = read('../../business-services/constants/billing-service-demand.yaml')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="199"><div class="step-ref bg-step">199</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="200"><div class="step-ref bg-step">200</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell passed">6</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="201"><div class="step-ref bg-step">201</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def consumerType = mdmsStateBillingService.BusinessService[0].businessService</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="202"><div class="step-ref bg-step">202</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = mdmsStateBillingService.BusinessService[0].code</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="203"><div class="step-ref bg-step">203</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxPeriodFrom = getCurrentEpochTime()</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="204"><div class="step-ref bg-step">204</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def daysFromToday = 2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="205"><div class="step-ref bg-step">205</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxPeriodTo = getEpochDate(daysFromToday)</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="206"><div class="step-ref bg-step">206</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxHeadMasterCodes = karate.jsonPath(mdmsStateBillingService, "$.TaxHeadMaster[?(@.service=='" + businessService + "')].code")</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="207"><div class="step-ref bg-step">207</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxHeadMasterCode = taxHeadMasterCodes[randomNumber(taxHeadMasterCodes.length)]</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="208"><div class="step-ref bg-step">208</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxAmount = 200</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="209"><div class="step-ref bg-step">209</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionAmount = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="210"><div class="step-ref bg-step">210</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def minimumAmountPayable = 1</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Steps to create a new Employee through HRMS</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="211"><div class="step-ref bg-step">211</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServiceDemandPretest.feature@createBillDemand')</div></div><div class="time-cell passed">211</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="211.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServiceDemandPretest.feature</div></div><div class="time-cell passed">202</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="212"><div class="step-ref bg-step">212</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="213"><div class="step-ref bg-step">213</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceDemandConstants = read('../../business-services/constants/billing-service-demand.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="214"><div class="step-ref bg-step">214</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="215"><div class="step-ref bg-step">215</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createDemandRequest = read('../../business-services/requestPayload/billing-service-demand/create.json')</div></div><div class="time-cell passed">19</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="216"><div class="step-ref bg-step">216</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchDemandRequest = read('../../business-services/requestPayload/billing-service-demand/search.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="217"><div class="step-ref bg-step">217</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def updateDemandRequest = read('../../business-services/requestPayload/billing-service-demand/update.json')</div></div><div class="time-cell passed">13</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="218"><div class="step-ref bg-step">218</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="219"><div class="step-ref bg-step">219</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url createDemandUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print createDemandRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="220"><div class="step-ref bg-step">220</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request createDemandRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="221"><div class="step-ref bg-step">221</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">151</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="222"><div class="step-ref bg-step">222</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="223"><div class="step-ref bg-step">223</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billingServiceDemandResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="224"><div class="step-ref bg-step">224</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billingServiceDemandResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="225"><div class="step-ref bg-step">225</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* print billingServiceDemandResponseBody</div></div><div class="time-cell passed">0</div></div><div class="preformatted" data-parent="225">15:37:21.731 [print] {
  "ResponseInfo": {
    "ver": null,
    "resMsgId": null,
    "msgId": null,
    "apiId": null,
    "ts": null,
    "status": "201 CREATED"
  },
  "Demands": [
    {
      "taxPeriodFrom": 1628590041509,
      "businessService": "PT",
      "minimumAmountPayable": 1,
      "taxPeriodTo": 1628762841513,
      "fixedBillExpiryDate": null,
      "additionalDetails": null,
      "payer": null,
      "demandDetails": [
        {
          "demandId": "82fecdec-96be-491a-aa78-192cae2775d7",
          "taxHeadMasterCode": "PT_TIME_REBATE",
          "collectionAmount": 0,
          "auditDetails": {
            "lastModifiedTime": 1628590041917,
            "createdBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
            "lastModifiedBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
            "createdTime": 1628590041917
          },
          "tenantId": "pb.amritsar",
          "id": "4f6266dd-f8ec-44b4-b2f4-d91c92a4a743",
          "taxAmount": 200,
          "additionalDetails": null
        }
      ],
      "consumerType": "PropertyTax",
      "auditDetails": {
        "lastModifiedTime": 1628590041917,
        "createdBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
        "lastModifiedBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
        "createdTime": 1628590041917
      },
      "tenantId": "pb.amritsar",
      "consumerCode": "Consumer-Code-Test-639658",
      "id": "82fecdec-96be-491a-aa78-192cae2775d7",
      "billExpiryTime": null,
      "isPaymentCompleted": false,
      "status": "ACTIVE"
    }
  ],
  "CollectedReceipt": null
}</div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="226"><div class="step-ref bg-step">226</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def Demands = billingServiceDemandResponseBody.Demands</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="227"><div class="step-ref bg-step">227</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def demandId = Demands[0].id</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="228"><div class="step-ref bg-step">228</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def consumerCode = Demands[0].consumerCode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the status Created</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="229"><div class="step-ref bg-step">229</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* assert billingServiceDemandResponseBody.ResponseInfo.status == commonConstants.expectedStatus.created</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand id is present</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="230"><div class="step-ref bg-step">230</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].id == "#present"</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the tenantId of demand response is equal with current tenantId</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="231"><div class="step-ref bg-step">231</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].tenantId == tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the consumer code of demand response is equal with defined consumerCode</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="232"><div class="step-ref bg-step">232</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].consumerCode == consumerCode</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the consumerType of demand response is equal with defined consumerType</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="233"><div class="step-ref bg-step">233</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].consumerType == consumerType</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the businessService of demand response is equal with defined businessService</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="234"><div class="step-ref bg-step">234</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].businessService == businessService</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxPeriodFrom of demand response is equal with defined taxPeriodFrom</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="235"><div class="step-ref bg-step">235</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].taxPeriodFrom == taxPeriodFrom</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxPeriodTo of demand response is equal with defined taxPeriodTo</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="236"><div class="step-ref bg-step">236</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].taxPeriodTo == taxPeriodTo</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand details id is present in demand response body</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="237"><div class="step-ref bg-step">237</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].id == "#present"</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demandId is present in demand response body</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="238"><div class="step-ref bg-step">238</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].demandId == "#present"</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxHeadMasterCode of demand response is equal with defined taxHeadMasterCode</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="239"><div class="step-ref bg-step">239</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].taxHeadMasterCode == taxHeadMasterCode</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxAmount of demand response is equal with defined taxAmount</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="240"><div class="step-ref bg-step">240</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].taxAmount == taxAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the collectionAmount of demand response is equal with defined collectionAmount</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="241"><div class="step-ref bg-step">241</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].collectionAmount == collectionAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the minimumAmountPayable of demand response is equal with defined minimumAmountPayable</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="242"><div class="step-ref bg-step">242</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].minimumAmountPayable == minimumAmountPayable</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand status is equal with expected demand status `ACTIVE`</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="243"><div class="step-ref bg-step">243</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].status == billingServiceDemandConstants.parameters.status</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="244"><div class="step-ref bg-step">244</div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="245"><div class="step-ref bg-step">245</div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="246"><div class="step-ref bg-step">246</div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="247"><div class="step-ref bg-step">247</div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="248"><div class="step-ref bg-step">248</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServicePretest.feature@fetchBill')</div></div><div class="time-cell passed">342</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="248.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServicePretest.feature</div></div><div class="time-cell passed">333</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="249"><div class="step-ref bg-step">249</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceConstants = read('../../business-services/constants/billing-service.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="250"><div class="step-ref bg-step">250</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionServiceConstants = read('../../business-services/constants/apportionService.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="251"><div class="step-ref bg-step">251</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = billingServiceConstants.parameters.businessService</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="252"><div class="step-ref bg-step">252</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionbusinessService = apportionServiceConstants.parameters.businessService</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="253"><div class="step-ref bg-step">253</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason1 = apportionServiceConstants.parameters.reason1</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="254"><div class="step-ref bg-step">254</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason2 = apportionServiceConstants.parameters.reason2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="255"><div class="step-ref bg-step">255</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason3 = apportionServiceConstants.parameters.reason3</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="256"><div class="step-ref bg-step">256</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason4 = apportionServiceConstants.parameters.reason4</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment">#* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="257"><div class="step-ref bg-step">257</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillRequest = read('../../business-services/requestPayload/collection-services/fetchBill.json')</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="258"><div class="step-ref bg-step">258</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillRequest = read('../../business-services/requestPayload/collection-services/cancelBill.json')</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="259"><div class="step-ref bg-step">259</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="260"><div class="step-ref bg-step">260</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillParams =</div></div><div class="time-cell passed">1</div></div><div class="preformatted" data-parent="260">{
   consumerCode: '#(consumerCode)',
   businessService: '#(businessService)',
   tenantId: '#(tenantId)'
}</div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="261"><div class="step-ref bg-step">261</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url fetchBill</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="262"><div class="step-ref bg-step">262</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And params fetchBillParams</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillParams</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="263"><div class="step-ref bg-step">263</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request fetchBillRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="264"><div class="step-ref bg-step">264</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">300</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillResponse</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="265"><div class="step-ref bg-step">265</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="266"><div class="step-ref bg-step">266</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def fetchBillResponse = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="267"><div class="step-ref bg-step">267</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmount = response.Bill[0].totalAmount</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="268"><div class="step-ref bg-step">268</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billId = response.Bill[0].id</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="269"><div class="step-ref bg-step">269</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def txnAmount = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="270"><div class="step-ref bg-step">270</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmountPaid = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="271"><div class="step-ref bg-step">271</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalDue = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="272"><div class="step-ref bg-step">272</div><div class="step-indent"> </div><div class="step-cell passed">* def paidBillIdError = collectionServicesConstants.errorMessages.paidBillId</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="273"><div class="step-ref bg-step">273</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillIdError = collectionServicesConstants.errorMessages.invalidBillId</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="274"><div class="step-ref bg-step">274</div><div class="step-indent"> </div><div class="step-cell passed">* def totalAmountPaidError = collectionServicesConstants.errorMessages.totalAmountPaidNull</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="275"><div class="step-ref bg-step">275</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentModeError = collectionServicesConstants.errorMessages.invalidPaymentMode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="276"><div class="step-ref bg-step">276</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantIdError = commonConstants.errorMessages.invalidTenantIdError</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="277"><div class="step-ref bg-step">277</div><div class="step-indent"> </div><div class="step-cell passed">* def nullTenantIdError = commonConstants.errorMessages.nullParameterError</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="278"><div class="step-ref bg-step">278</div><div class="step-indent"> </div><div class="step-cell passed">* def reason = collectionServicesConstants.parameters.reason</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="279"><div class="step-ref bg-step">279</div><div class="step-indent"> </div><div class="step-cell passed">* def action = collectionServicesConstants.parameters.action</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="280"><div class="step-ref bg-step">280</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDateError = collectionServicesConstants.errorMessages.instrumentDateAsNull</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="281"><div class="step-ref bg-step">281</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentPastDateError = collectionServicesConstants.errorMessages.instrumentDatePastNinetyDays</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="282"><div class="step-ref bg-step">282</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentFutureDateError = collectionServicesConstants.errorMessages.futureInstrumentDate</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="283"><div class="step-ref bg-step">283</div><div class="step-indent"> </div><div class="step-cell passed">* def moreThanDueAmountError = collectionServicesConstants.errorMessages.moreThanDueAmount</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="284"><div class="step-ref bg-step">284</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberError = collectionServicesConstants.errorMessages.instrumentNumberAsEmptyString</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="285"><div class="step-ref bg-step">285</div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberError = collectionServicesConstants.errorMessages.transactionNumberAsEmptyString</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="286"><div class="step-ref bg-step">286</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/collectionServicesPretest.feature@createPayment')</div></div><div class="time-cell passed">473</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="286.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/collectionServicesPretest.feature</div></div><div class="time-cell passed">453</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="287"><div class="step-ref bg-step">287</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="288"><div class="step-ref bg-step">288</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="289"><div class="step-ref bg-step">289</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="290"><div class="step-ref bg-step">290</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def tenantId = tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="291"><div class="step-ref bg-step">291</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentMode = collectionServicesConstants.parameters.paymentMode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="292"><div class="step-ref bg-step">292</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBy = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="293"><div class="step-ref bg-step">293</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">6</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="294"><div class="step-ref bg-step">294</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def payerName = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="295"><div class="step-ref bg-step">295</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalDue = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="296"><div class="step-ref bg-step">296</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumber = collectionServicesConstants.parameters.transactionNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="297"><div class="step-ref bg-step">297</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumber = collectionServicesConstants.parameters.instrumentNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="298"><div class="step-ref bg-step">298</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCard = collectionServicesConstants.parameters.paymentMode2</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="299"><div class="step-ref bg-step">299</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCheque = collectionServicesConstants.parameters.paymentModeForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="300"><div class="step-ref bg-step">300</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberForCheque = collectionServicesConstants.parameters.transactionNumberForCheque</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="301"><div class="step-ref bg-step">301</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberForCheque = collectionServicesConstants.parameters.instrumentNumberForCheque</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="302"><div class="step-ref bg-step">302</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="303"><div class="step-ref bg-step">303</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def ifscCode = collectionServicesConstants.parameters.ifscCode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="304"><div class="step-ref bg-step">304</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="305"><div class="step-ref bg-step">305</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="306"><div class="step-ref bg-step">306</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequest = read('../../business-services/requestPayload/collection-services/create.json')</div></div><div class="time-cell passed">12</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="307"><div class="step-ref bg-step">307</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def workflowRequest = read('../../business-services/requestPayload/collection-services/workflow.json')</div></div><div class="time-cell passed">7</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="308"><div class="step-ref bg-step">308</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPaymentRequest = read('../../business-services/requestPayload/collection-services/search.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="309"><div class="step-ref bg-step">309</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTreceiptcount = read('../../business-services/requestPayload/collection-services/receiptcount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="310"><div class="step-ref bg-step">310</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequestForCheque = read('../../business-services/requestPayload/collection-services/createPaymentWithCheque.json')</div></div><div class="time-cell passed">13</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="311"><div class="step-ref bg-step">311</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def eChallanPaymentcount = read('../../business-services/requestPayload/collection-services/echallancount.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="312"><div class="step-ref bg-step">312</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="313"><div class="step-ref bg-step">313</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = 'invalid_'+randomNumber(4)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="314"><div class="step-ref bg-step">314</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBusinessId = 'PT'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="315"><div class="step-ref bg-step">315</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentMode = randomString(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="316"><div class="step-ref bg-step">316</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantId = randomString(5)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="317"><div class="step-ref bg-step">317</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def negativeTotalAmount = '-'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="318"><div class="step-ref bg-step">318</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url payment</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="319"><div class="step-ref bg-step">319</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request createPaymentRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print createPaymentRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="320"><div class="step-ref bg-step">320</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">363</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="321"><div class="step-ref bg-step">321</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="322"><div class="step-ref bg-step">322</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="323"><div class="step-ref bg-step">323</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="324"><div class="step-ref bg-step">324</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def Payments = collectionServicesResponseBody.Payments</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="325"><div class="step-ref bg-step">325</div><div class="step-indent"> </div><div class="step-cell passed">* match response.ResponseInfo.status == '200 OK'</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="326"><div class="step-ref bg-step">326</div><div class="step-indent"> </div><div class="step-cell passed">* def paymentId = collectionServicesResponseBody.Payments[0].id</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="327"><div class="step-ref bg-step">327</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/collectionServicesPretest.feature@processworkflow')</div></div><div class="time-cell passed">827</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="327.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/collectionServicesPretest.feature</div></div><div class="time-cell passed">804</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="328"><div class="step-ref bg-step">328</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">14</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="329"><div class="step-ref bg-step">329</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="330"><div class="step-ref bg-step">330</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="331"><div class="step-ref bg-step">331</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def tenantId = tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="332"><div class="step-ref bg-step">332</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentMode = collectionServicesConstants.parameters.paymentMode</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="333"><div class="step-ref bg-step">333</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBy = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">6</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="334"><div class="step-ref bg-step">334</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="335"><div class="step-ref bg-step">335</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def payerName = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="336"><div class="step-ref bg-step">336</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalDue = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="337"><div class="step-ref bg-step">337</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumber = collectionServicesConstants.parameters.transactionNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="338"><div class="step-ref bg-step">338</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumber = collectionServicesConstants.parameters.instrumentNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="339"><div class="step-ref bg-step">339</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCard = collectionServicesConstants.parameters.paymentMode2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="340"><div class="step-ref bg-step">340</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCheque = collectionServicesConstants.parameters.paymentModeForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="341"><div class="step-ref bg-step">341</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberForCheque = collectionServicesConstants.parameters.transactionNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="342"><div class="step-ref bg-step">342</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberForCheque = collectionServicesConstants.parameters.instrumentNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="343"><div class="step-ref bg-step">343</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="344"><div class="step-ref bg-step">344</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def ifscCode = collectionServicesConstants.parameters.ifscCode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="345"><div class="step-ref bg-step">345</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="346"><div class="step-ref bg-step">346</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="347"><div class="step-ref bg-step">347</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequest = read('../../business-services/requestPayload/collection-services/create.json')</div></div><div class="time-cell passed">8</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="348"><div class="step-ref bg-step">348</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def workflowRequest = read('../../business-services/requestPayload/collection-services/workflow.json')</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="349"><div class="step-ref bg-step">349</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPaymentRequest = read('../../business-services/requestPayload/collection-services/search.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="350"><div class="step-ref bg-step">350</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTreceiptcount = read('../../business-services/requestPayload/collection-services/receiptcount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="351"><div class="step-ref bg-step">351</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequestForCheque = read('../../business-services/requestPayload/collection-services/createPaymentWithCheque.json')</div></div><div class="time-cell passed">10</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="352"><div class="step-ref bg-step">352</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def eChallanPaymentcount = read('../../business-services/requestPayload/collection-services/echallancount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="353"><div class="step-ref bg-step">353</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="354"><div class="step-ref bg-step">354</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = 'invalid_'+randomNumber(4)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="355"><div class="step-ref bg-step">355</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBusinessId = 'PT'+randomNumber(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="356"><div class="step-ref bg-step">356</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentMode = randomString(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="357"><div class="step-ref bg-step">357</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantId = randomString(5)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="358"><div class="step-ref bg-step">358</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def negativeTotalAmount = '-'+randomNumber(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="359"><div class="step-ref bg-step">359</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url collectionServiceWorkflowUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="360"><div class="step-ref bg-step">360</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request workflowRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print workflowRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="361"><div class="step-ref bg-step">361</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">717</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="362"><div class="step-ref bg-step">362</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="363"><div class="step-ref bg-step">363</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[2:18]bg"><div class="step-container" id="364"><div class="step-ref bg-step">364</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="365"><div class="step-ref passed">365</div><div class="step-cell passed">* def key = pdfCreateConstant.parameters.valid.keyForPt</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-cell comment"># calling create pdf pretest</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="366"><div class="step-ref passed">366</div><div class="step-cell passed">* call read('../../core-services/pretests/pdfServiceCreate.feature@createPdfForPtSuccessfully')</div></div><div class="time-cell passed">788</div></div><div class="step-row"><div class="step-container" id="366.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-cell passed">com/egov/core-services/tests/../../core-services/pretests/pdfServiceCreate.feature</div></div><div class="time-cell passed">775</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-cell comment"># * call read('../../business-services/tests/collectionServicesCreate.feature@Create_PaymentWithValidBillID_01')</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-cell comment">#* def Payments = Payments</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="367"><div class="step-ref passed">367</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayload = read('../../core-services/requestPayload/pdf-service/pdfCreate.json')</div></div><div class="time-cell passed">7</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-cell comment"># initializing pdf create payload objects</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="368"><div class="step-ref passed">368</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayloadFirst = pdfCreatePayload.TL</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="369"><div class="step-ref passed">369</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayloadSecond = pdfCreatePayload.PT</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="370"><div class="step-ref passed">370</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayloadThird = pdfCreatePayload.FireNoc</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="371"><div class="step-ref passed">371</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayloadFourth = pdfCreatePayload.WS</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="372"><div class="step-ref passed">372</div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="373"><div class="step-ref passed">373</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreateParam =</div></div><div class="time-cell passed">1</div></div><div class="preformatted" data-parent="373">{
 key: '#(key)',
 tenantId: '#(tenantId)'
}</div><div class="step-row"><div class="step-container" id="374"><div class="step-ref passed">374</div><div class="step-indent"> </div><div class="step-cell passed">Given url createPdf</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="375"><div class="step-ref passed">375</div><div class="step-indent"> </div><div class="step-cell passed">And params pdfCreateParam</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="376"><div class="step-ref passed">376</div><div class="step-indent"> </div><div class="step-cell passed">* eval pdfCreatePayloadSecond.Payments = Payments</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="377"><div class="step-ref passed">377</div><div class="step-indent"> </div><div class="step-cell passed">And request pdfCreatePayloadSecond</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="378"><div class="step-ref passed">378</div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">760</div></div><div class="step-row"><div class="step-container" id="379"><div class="step-ref passed">379</div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="380"><div class="step-ref passed">380</div><div class="step-indent"> </div><div class="step-cell passed">And def pdfCreateResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="381"><div class="step-ref passed">381</div><div class="step-indent"> </div><div class="step-cell passed">And def pdfCreateResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="382"><div class="step-ref passed">382</div><div class="step-cell passed">* assert pdfCreateResponseBody.message == pdfCreateConstant.expectedMessages.message</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="383"><div class="step-ref passed">383</div><div class="step-cell passed">* match pdfCreateResponseBody.filestoreIds[0] == '#present'</div></div><div class="time-cell passed">1</div></div></div><div class="scenario"><div class="scenario-heading" id="[3:26]"><div class="heading-container"><div class="scenario-tags"><a class="badge badge-primary" href="karate-tags.html">pdf_create_TL_03</a><a class="badge badge-primary" href="karate-tags.html">regression</a><a class="badge badge-primary" href="karate-tags.html">positive</a><a class="badge badge-primary" href="karate-tags.html">pdfservice</a><a class="badge badge-primary" href="karate-tags.html">coreServices</a></div><span class="scenario-keyword">Scenario: [3:26]</span><span class="scenario-name">Verify a pdf is generated successfully for Trade License  module </span></div><div class="scenario-time passed">ms: 2904</div></div><div class="step-row"><div class="step-container" id="[3:26]bg"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-cell passed">Background:</div></div><div class="time-cell passed"></div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-cell comment"># reading javascript utils for using generic methods</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="384"><div class="step-ref bg-step">384</div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">11</div></div><div class="preformatted" data-parent="384">15:37:24.297 karate.env:  
15:37:24.298 locale: en_IN 
15:37:24.298 tenantId: pb.amritsar</div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="385"><div class="step-ref bg-step">385</div><div class="step-cell passed">* def pdfCreateConstant = read('../../core-services/constants/pdfService.yaml')</div></div><div class="time-cell passed">7</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="386"><div class="step-ref bg-step">386</div><div class="step-cell passed">* call read('../../business-services/tests/collectionServicesCreate.feature@Create_PaymentWithValidBillID_01')</div></div><div class="time-cell passed">2107</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="386.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/tests/collectionServicesCreate.feature</div></div><div class="time-cell passed">2087</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="387"><div class="step-ref bg-step">387</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/tests/billingServicesDemand.feature@create_01')</div></div><div class="time-cell passed">334</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="387.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/tests/billingServicesDemand.feature</div></div><div class="time-cell passed">282</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="388"><div class="step-ref bg-step">388</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="389"><div class="step-ref bg-step">389</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceDemandConstants = read('../../business-services/constants/billing-service-demand.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="390"><div class="step-ref bg-step">390</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="391"><div class="step-ref bg-step">391</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="392"><div class="step-ref bg-step">392</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def consumerType = mdmsStateBillingService.BusinessService[0].businessService</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="393"><div class="step-ref bg-step">393</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = mdmsStateBillingService.BusinessService[0].code</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="394"><div class="step-ref bg-step">394</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxPeriodFrom = getCurrentEpochTime()</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="395"><div class="step-ref bg-step">395</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def daysFromToday = 2</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="396"><div class="step-ref bg-step">396</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxPeriodTo = getEpochDate(daysFromToday)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="397"><div class="step-ref bg-step">397</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxHeadMasterCodes = karate.jsonPath(mdmsStateBillingService, "$.TaxHeadMaster[?(@.service=='" + businessService + "')].code")</div></div><div class="time-cell passed">7</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="398"><div class="step-ref bg-step">398</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxHeadMasterCode = taxHeadMasterCodes[randomNumber(taxHeadMasterCodes.length)]</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="399"><div class="step-ref bg-step">399</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxAmount = 200</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="400"><div class="step-ref bg-step">400</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionAmount = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="401"><div class="step-ref bg-step">401</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def minimumAmountPayable = 1</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Steps to create a new Employee through HRMS</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="402"><div class="step-ref bg-step">402</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServiceDemandPretest.feature@createBillDemand')</div></div><div class="time-cell passed">234</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="402.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServiceDemandPretest.feature</div></div><div class="time-cell passed">218</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="403"><div class="step-ref bg-step">403</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">8</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="404"><div class="step-ref bg-step">404</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceDemandConstants = read('../../business-services/constants/billing-service-demand.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="405"><div class="step-ref bg-step">405</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="406"><div class="step-ref bg-step">406</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createDemandRequest = read('../../business-services/requestPayload/billing-service-demand/create.json')</div></div><div class="time-cell passed">21</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="407"><div class="step-ref bg-step">407</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchDemandRequest = read('../../business-services/requestPayload/billing-service-demand/search.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="408"><div class="step-ref bg-step">408</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def updateDemandRequest = read('../../business-services/requestPayload/billing-service-demand/update.json')</div></div><div class="time-cell passed">15</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="409"><div class="step-ref bg-step">409</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="410"><div class="step-ref bg-step">410</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url createDemandUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print createDemandRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="411"><div class="step-ref bg-step">411</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request createDemandRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="412"><div class="step-ref bg-step">412</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">159</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="413"><div class="step-ref bg-step">413</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="414"><div class="step-ref bg-step">414</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billingServiceDemandResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="415"><div class="step-ref bg-step">415</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billingServiceDemandResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="416"><div class="step-ref bg-step">416</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* print billingServiceDemandResponseBody</div></div><div class="time-cell passed">0</div></div><div class="preformatted" data-parent="416">15:37:24.658 [print] {
  "ResponseInfo": {
    "ver": null,
    "resMsgId": null,
    "msgId": null,
    "apiId": null,
    "ts": null,
    "status": "201 CREATED"
  },
  "Demands": [
    {
      "taxPeriodFrom": 1628590044409,
      "businessService": "PT",
      "minimumAmountPayable": 1,
      "taxPeriodTo": 1628762844415,
      "fixedBillExpiryDate": null,
      "additionalDetails": null,
      "payer": null,
      "demandDetails": [
        {
          "demandId": "ef096b21-e762-4724-9244-bfb25434d26d",
          "taxHeadMasterCode": "PT_FIRE_CESS",
          "collectionAmount": 0,
          "auditDetails": {
            "lastModifiedTime": 1628590044829,
            "createdBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
            "lastModifiedBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
            "createdTime": 1628590044829
          },
          "tenantId": "pb.amritsar",
          "id": "5cd1882c-bbeb-4587-bcd0-ee355640ec1b",
          "taxAmount": 200,
          "additionalDetails": null
        }
      ],
      "consumerType": "PropertyTax",
      "auditDetails": {
        "lastModifiedTime": 1628590044829,
        "createdBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
        "lastModifiedBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
        "createdTime": 1628590044829
      },
      "tenantId": "pb.amritsar",
      "consumerCode": "Consumer-Code-Test-593675",
      "id": "ef096b21-e762-4724-9244-bfb25434d26d",
      "billExpiryTime": null,
      "isPaymentCompleted": false,
      "status": "ACTIVE"
    }
  ],
  "CollectedReceipt": null
}</div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="417"><div class="step-ref bg-step">417</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def Demands = billingServiceDemandResponseBody.Demands</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="418"><div class="step-ref bg-step">418</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def demandId = Demands[0].id</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="419"><div class="step-ref bg-step">419</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def consumerCode = Demands[0].consumerCode</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the status Created</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="420"><div class="step-ref bg-step">420</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* assert billingServiceDemandResponseBody.ResponseInfo.status == commonConstants.expectedStatus.created</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand id is present</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="421"><div class="step-ref bg-step">421</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].id == "#present"</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the tenantId of demand response is equal with current tenantId</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="422"><div class="step-ref bg-step">422</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].tenantId == tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the consumer code of demand response is equal with defined consumerCode</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="423"><div class="step-ref bg-step">423</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].consumerCode == consumerCode</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the consumerType of demand response is equal with defined consumerType</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="424"><div class="step-ref bg-step">424</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].consumerType == consumerType</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the businessService of demand response is equal with defined businessService</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="425"><div class="step-ref bg-step">425</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].businessService == businessService</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxPeriodFrom of demand response is equal with defined taxPeriodFrom</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="426"><div class="step-ref bg-step">426</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].taxPeriodFrom == taxPeriodFrom</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxPeriodTo of demand response is equal with defined taxPeriodTo</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="427"><div class="step-ref bg-step">427</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].taxPeriodTo == taxPeriodTo</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand details id is present in demand response body</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="428"><div class="step-ref bg-step">428</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].id == "#present"</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demandId is present in demand response body</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="429"><div class="step-ref bg-step">429</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].demandId == "#present"</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxHeadMasterCode of demand response is equal with defined taxHeadMasterCode</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="430"><div class="step-ref bg-step">430</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].taxHeadMasterCode == taxHeadMasterCode</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxAmount of demand response is equal with defined taxAmount</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="431"><div class="step-ref bg-step">431</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].taxAmount == taxAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the collectionAmount of demand response is equal with defined collectionAmount</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="432"><div class="step-ref bg-step">432</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].collectionAmount == collectionAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the minimumAmountPayable of demand response is equal with defined minimumAmountPayable</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="433"><div class="step-ref bg-step">433</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].minimumAmountPayable == minimumAmountPayable</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand status is equal with expected demand status `ACTIVE`</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="434"><div class="step-ref bg-step">434</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].status == billingServiceDemandConstants.parameters.status</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="435"><div class="step-ref bg-step">435</div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="436"><div class="step-ref bg-step">436</div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="437"><div class="step-ref bg-step">437</div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="438"><div class="step-ref bg-step">438</div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="439"><div class="step-ref bg-step">439</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServicePretest.feature@fetchBill')</div></div><div class="time-cell passed">308</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="439.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServicePretest.feature</div></div><div class="time-cell passed">295</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="440"><div class="step-ref bg-step">440</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceConstants = read('../../business-services/constants/billing-service.yaml')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="441"><div class="step-ref bg-step">441</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionServiceConstants = read('../../business-services/constants/apportionService.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="442"><div class="step-ref bg-step">442</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = billingServiceConstants.parameters.businessService</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="443"><div class="step-ref bg-step">443</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionbusinessService = apportionServiceConstants.parameters.businessService</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="444"><div class="step-ref bg-step">444</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason1 = apportionServiceConstants.parameters.reason1</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="445"><div class="step-ref bg-step">445</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason2 = apportionServiceConstants.parameters.reason2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="446"><div class="step-ref bg-step">446</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason3 = apportionServiceConstants.parameters.reason3</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="447"><div class="step-ref bg-step">447</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason4 = apportionServiceConstants.parameters.reason4</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment">#* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="448"><div class="step-ref bg-step">448</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillRequest = read('../../business-services/requestPayload/collection-services/fetchBill.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="449"><div class="step-ref bg-step">449</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillRequest = read('../../business-services/requestPayload/collection-services/cancelBill.json')</div></div><div class="time-cell passed">7</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="450"><div class="step-ref bg-step">450</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="451"><div class="step-ref bg-step">451</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillParams =</div></div><div class="time-cell passed">0</div></div><div class="preformatted" data-parent="451">{
   consumerCode: '#(consumerCode)',
   businessService: '#(businessService)',
   tenantId: '#(tenantId)'
}</div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="452"><div class="step-ref bg-step">452</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url fetchBill</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="453"><div class="step-ref bg-step">453</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And params fetchBillParams</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillParams</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="454"><div class="step-ref bg-step">454</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request fetchBillRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="455"><div class="step-ref bg-step">455</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">264</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillResponse</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="456"><div class="step-ref bg-step">456</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="457"><div class="step-ref bg-step">457</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def fetchBillResponse = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="458"><div class="step-ref bg-step">458</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmount = response.Bill[0].totalAmount</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="459"><div class="step-ref bg-step">459</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billId = response.Bill[0].id</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="460"><div class="step-ref bg-step">460</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def txnAmount = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="461"><div class="step-ref bg-step">461</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmountPaid = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="462"><div class="step-ref bg-step">462</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalDue = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="463"><div class="step-ref bg-step">463</div><div class="step-indent"> </div><div class="step-cell passed">* def paidBillIdError = collectionServicesConstants.errorMessages.paidBillId</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="464"><div class="step-ref bg-step">464</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillIdError = collectionServicesConstants.errorMessages.invalidBillId</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="465"><div class="step-ref bg-step">465</div><div class="step-indent"> </div><div class="step-cell passed">* def totalAmountPaidError = collectionServicesConstants.errorMessages.totalAmountPaidNull</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="466"><div class="step-ref bg-step">466</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentModeError = collectionServicesConstants.errorMessages.invalidPaymentMode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="467"><div class="step-ref bg-step">467</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantIdError = commonConstants.errorMessages.invalidTenantIdError</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="468"><div class="step-ref bg-step">468</div><div class="step-indent"> </div><div class="step-cell passed">* def nullTenantIdError = commonConstants.errorMessages.nullParameterError</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="469"><div class="step-ref bg-step">469</div><div class="step-indent"> </div><div class="step-cell passed">* def reason = collectionServicesConstants.parameters.reason</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="470"><div class="step-ref bg-step">470</div><div class="step-indent"> </div><div class="step-cell passed">* def action = collectionServicesConstants.parameters.action</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="471"><div class="step-ref bg-step">471</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDateError = collectionServicesConstants.errorMessages.instrumentDateAsNull</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="472"><div class="step-ref bg-step">472</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentPastDateError = collectionServicesConstants.errorMessages.instrumentDatePastNinetyDays</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="473"><div class="step-ref bg-step">473</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentFutureDateError = collectionServicesConstants.errorMessages.futureInstrumentDate</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="474"><div class="step-ref bg-step">474</div><div class="step-indent"> </div><div class="step-cell passed">* def moreThanDueAmountError = collectionServicesConstants.errorMessages.moreThanDueAmount</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="475"><div class="step-ref bg-step">475</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberError = collectionServicesConstants.errorMessages.instrumentNumberAsEmptyString</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="476"><div class="step-ref bg-step">476</div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberError = collectionServicesConstants.errorMessages.transactionNumberAsEmptyString</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="477"><div class="step-ref bg-step">477</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/collectionServicesPretest.feature@createPayment')</div></div><div class="time-cell passed">565</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="477.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/collectionServicesPretest.feature</div></div><div class="time-cell passed">540</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="478"><div class="step-ref bg-step">478</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="479"><div class="step-ref bg-step">479</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="480"><div class="step-ref bg-step">480</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="481"><div class="step-ref bg-step">481</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def tenantId = tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="482"><div class="step-ref bg-step">482</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentMode = collectionServicesConstants.parameters.paymentMode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="483"><div class="step-ref bg-step">483</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBy = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="484"><div class="step-ref bg-step">484</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="485"><div class="step-ref bg-step">485</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def payerName = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="486"><div class="step-ref bg-step">486</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalDue = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="487"><div class="step-ref bg-step">487</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumber = collectionServicesConstants.parameters.transactionNumber</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="488"><div class="step-ref bg-step">488</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumber = collectionServicesConstants.parameters.instrumentNumber</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="489"><div class="step-ref bg-step">489</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCard = collectionServicesConstants.parameters.paymentMode2</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="490"><div class="step-ref bg-step">490</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCheque = collectionServicesConstants.parameters.paymentModeForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="491"><div class="step-ref bg-step">491</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberForCheque = collectionServicesConstants.parameters.transactionNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="492"><div class="step-ref bg-step">492</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberForCheque = collectionServicesConstants.parameters.instrumentNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="493"><div class="step-ref bg-step">493</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="494"><div class="step-ref bg-step">494</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def ifscCode = collectionServicesConstants.parameters.ifscCode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="495"><div class="step-ref bg-step">495</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="496"><div class="step-ref bg-step">496</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="497"><div class="step-ref bg-step">497</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequest = read('../../business-services/requestPayload/collection-services/create.json')</div></div><div class="time-cell passed">15</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="498"><div class="step-ref bg-step">498</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def workflowRequest = read('../../business-services/requestPayload/collection-services/workflow.json')</div></div><div class="time-cell passed">6</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="499"><div class="step-ref bg-step">499</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPaymentRequest = read('../../business-services/requestPayload/collection-services/search.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="500"><div class="step-ref bg-step">500</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTreceiptcount = read('../../business-services/requestPayload/collection-services/receiptcount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="501"><div class="step-ref bg-step">501</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequestForCheque = read('../../business-services/requestPayload/collection-services/createPaymentWithCheque.json')</div></div><div class="time-cell passed">14</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="502"><div class="step-ref bg-step">502</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def eChallanPaymentcount = read('../../business-services/requestPayload/collection-services/echallancount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="503"><div class="step-ref bg-step">503</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">104</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="504"><div class="step-ref bg-step">504</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = 'invalid_'+randomNumber(4)</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="505"><div class="step-ref bg-step">505</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBusinessId = 'PT'+randomNumber(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="506"><div class="step-ref bg-step">506</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentMode = randomString(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="507"><div class="step-ref bg-step">507</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantId = randomString(5)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="508"><div class="step-ref bg-step">508</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def negativeTotalAmount = '-'+randomNumber(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="509"><div class="step-ref bg-step">509</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url payment</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="510"><div class="step-ref bg-step">510</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request createPaymentRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print createPaymentRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="511"><div class="step-ref bg-step">511</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">347</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="512"><div class="step-ref bg-step">512</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="513"><div class="step-ref bg-step">513</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="514"><div class="step-ref bg-step">514</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="515"><div class="step-ref bg-step">515</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def Payments = collectionServicesResponseBody.Payments</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="516"><div class="step-ref bg-step">516</div><div class="step-indent"> </div><div class="step-cell passed">* match response.ResponseInfo.status == '200 OK'</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="517"><div class="step-ref bg-step">517</div><div class="step-indent"> </div><div class="step-cell passed">* def paymentId = collectionServicesResponseBody.Payments[0].id</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="518"><div class="step-ref bg-step">518</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/collectionServicesPretest.feature@processworkflow')</div></div><div class="time-cell passed">848</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="518.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/collectionServicesPretest.feature</div></div><div class="time-cell passed">826</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="519"><div class="step-ref bg-step">519</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">11</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="520"><div class="step-ref bg-step">520</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="521"><div class="step-ref bg-step">521</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="522"><div class="step-ref bg-step">522</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def tenantId = tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="523"><div class="step-ref bg-step">523</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentMode = collectionServicesConstants.parameters.paymentMode</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="524"><div class="step-ref bg-step">524</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBy = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="525"><div class="step-ref bg-step">525</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="526"><div class="step-ref bg-step">526</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def payerName = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="527"><div class="step-ref bg-step">527</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalDue = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="528"><div class="step-ref bg-step">528</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumber = collectionServicesConstants.parameters.transactionNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="529"><div class="step-ref bg-step">529</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumber = collectionServicesConstants.parameters.instrumentNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="530"><div class="step-ref bg-step">530</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCard = collectionServicesConstants.parameters.paymentMode2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="531"><div class="step-ref bg-step">531</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCheque = collectionServicesConstants.parameters.paymentModeForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="532"><div class="step-ref bg-step">532</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberForCheque = collectionServicesConstants.parameters.transactionNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="533"><div class="step-ref bg-step">533</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberForCheque = collectionServicesConstants.parameters.instrumentNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="534"><div class="step-ref bg-step">534</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="535"><div class="step-ref bg-step">535</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def ifscCode = collectionServicesConstants.parameters.ifscCode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="536"><div class="step-ref bg-step">536</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="537"><div class="step-ref bg-step">537</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="538"><div class="step-ref bg-step">538</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequest = read('../../business-services/requestPayload/collection-services/create.json')</div></div><div class="time-cell passed">10</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="539"><div class="step-ref bg-step">539</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def workflowRequest = read('../../business-services/requestPayload/collection-services/workflow.json')</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="540"><div class="step-ref bg-step">540</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPaymentRequest = read('../../business-services/requestPayload/collection-services/search.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="541"><div class="step-ref bg-step">541</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTreceiptcount = read('../../business-services/requestPayload/collection-services/receiptcount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="542"><div class="step-ref bg-step">542</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequestForCheque = read('../../business-services/requestPayload/collection-services/createPaymentWithCheque.json')</div></div><div class="time-cell passed">11</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="543"><div class="step-ref bg-step">543</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def eChallanPaymentcount = read('../../business-services/requestPayload/collection-services/echallancount.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="544"><div class="step-ref bg-step">544</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="545"><div class="step-ref bg-step">545</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = 'invalid_'+randomNumber(4)</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="546"><div class="step-ref bg-step">546</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBusinessId = 'PT'+randomNumber(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="547"><div class="step-ref bg-step">547</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentMode = randomString(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="548"><div class="step-ref bg-step">548</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantId = randomString(5)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="549"><div class="step-ref bg-step">549</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def negativeTotalAmount = '-'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="550"><div class="step-ref bg-step">550</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url collectionServiceWorkflowUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="551"><div class="step-ref bg-step">551</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request workflowRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print workflowRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="552"><div class="step-ref bg-step">552</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">735</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="553"><div class="step-ref bg-step">553</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="554"><div class="step-ref bg-step">554</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[3:26]bg"><div class="step-container" id="555"><div class="step-ref bg-step">555</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="556"><div class="step-ref passed">556</div><div class="step-cell passed">* def key = pdfCreateConstant.parameters.valid.keyForTl</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-cell comment"># calling create pdf pretest</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="557"><div class="step-ref passed">557</div><div class="step-cell passed">* call read('../../core-services/pretests/pdfServiceCreate.feature@createPdfSuccessfully')</div></div><div class="time-cell passed">771</div></div><div class="step-row"><div class="step-container" id="557.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-cell passed">com/egov/core-services/tests/../../core-services/pretests/pdfServiceCreate.feature</div></div><div class="time-cell passed">761</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-cell comment"># * call read('../../business-services/tests/collectionServicesCreate.feature@Create_PaymentWithValidBillID_01')</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-cell comment">#* def Payments = Payments</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="558"><div class="step-ref passed">558</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayload = read('../../core-services/requestPayload/pdf-service/pdfCreate.json')</div></div><div class="time-cell passed">7</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-cell comment"># initializing pdf create payload objects</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="559"><div class="step-ref passed">559</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayloadFirst = pdfCreatePayload.TL</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="560"><div class="step-ref passed">560</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayloadSecond = pdfCreatePayload.PT</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="561"><div class="step-ref passed">561</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayloadThird = pdfCreatePayload.FireNoc</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="562"><div class="step-ref passed">562</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayloadFourth = pdfCreatePayload.WS</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="563"><div class="step-ref passed">563</div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="564"><div class="step-ref passed">564</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreateParam =</div></div><div class="time-cell passed">1</div></div><div class="preformatted" data-parent="564">{
 key: '#(key)',
 tenantId: '#(tenantId)'
}</div><div class="step-row"><div class="step-container" id="565"><div class="step-ref passed">565</div><div class="step-indent"> </div><div class="step-cell passed">Given url createPdf</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="566"><div class="step-ref passed">566</div><div class="step-indent"> </div><div class="step-cell passed">And params pdfCreateParam</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="567"><div class="step-ref passed">567</div><div class="step-indent"> </div><div class="step-cell passed">* eval pdfCreatePayloadSecond.Payments = Payments</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="568"><div class="step-ref passed">568</div><div class="step-indent"> </div><div class="step-cell passed">And request pdfCreatePayloadFirst</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="569"><div class="step-ref passed">569</div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">745</div></div><div class="step-row"><div class="step-container" id="570"><div class="step-ref passed">570</div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="571"><div class="step-ref passed">571</div><div class="step-indent"> </div><div class="step-cell passed">And def pdfCreateResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="572"><div class="step-ref passed">572</div><div class="step-indent"> </div><div class="step-cell passed">And def pdfCreateResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="573"><div class="step-ref passed">573</div><div class="step-cell passed">* match pdfCreateResponseBody == '#present'</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="574"><div class="step-ref passed">574</div><div class="step-cell passed">* assert pdfCreateResponseBody.message == pdfCreateConstant.expectedMessages.message</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="575"><div class="step-ref passed">575</div><div class="step-cell passed">* match pdfCreateResponseBody.ResponseInfo.userInfo.roles.length == '##[_ &gt; 0]'</div></div><div class="time-cell passed">2</div></div></div><div class="scenario"><div class="scenario-heading" id="[4:36]"><div class="heading-container"><div class="scenario-tags"><a class="badge badge-primary" href="karate-tags.html">pdf_create_TL_FS_04</a><a class="badge badge-primary" href="karate-tags.html">regression</a><a class="badge badge-primary" href="karate-tags.html">positive</a><a class="badge badge-primary" href="karate-tags.html">pdfservice</a><a class="badge badge-primary" href="karate-tags.html">coreServices</a></div><span class="scenario-keyword">Scenario: [4:36]</span><span class="scenario-name">Verify the FileStore ID is created in the Response for the TL API call for PDF generation service </span></div><div class="scenario-time passed">ms: 2731</div></div><div class="step-row"><div class="step-container" id="[4:36]bg"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-cell passed">Background:</div></div><div class="time-cell passed"></div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-cell comment"># reading javascript utils for using generic methods</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="576"><div class="step-ref bg-step">576</div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">9</div></div><div class="preformatted" data-parent="576">15:37:27.290 karate.env:  
15:37:27.290 locale: en_IN 
15:37:27.291 tenantId: pb.amritsar</div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="577"><div class="step-ref bg-step">577</div><div class="step-cell passed">* def pdfCreateConstant = read('../../core-services/constants/pdfService.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="578"><div class="step-ref bg-step">578</div><div class="step-cell passed">* call read('../../business-services/tests/collectionServicesCreate.feature@Create_PaymentWithValidBillID_01')</div></div><div class="time-cell passed">1919</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="578.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/tests/collectionServicesCreate.feature</div></div><div class="time-cell passed">1896</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="579"><div class="step-ref bg-step">579</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/tests/billingServicesDemand.feature@create_01')</div></div><div class="time-cell passed">327</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="579.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/tests/billingServicesDemand.feature</div></div><div class="time-cell passed">277</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="580"><div class="step-ref bg-step">580</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="581"><div class="step-ref bg-step">581</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceDemandConstants = read('../../business-services/constants/billing-service-demand.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="582"><div class="step-ref bg-step">582</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="583"><div class="step-ref bg-step">583</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="584"><div class="step-ref bg-step">584</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def consumerType = mdmsStateBillingService.BusinessService[0].businessService</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="585"><div class="step-ref bg-step">585</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = mdmsStateBillingService.BusinessService[0].code</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="586"><div class="step-ref bg-step">586</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxPeriodFrom = getCurrentEpochTime()</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="587"><div class="step-ref bg-step">587</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def daysFromToday = 2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="588"><div class="step-ref bg-step">588</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxPeriodTo = getEpochDate(daysFromToday)</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="589"><div class="step-ref bg-step">589</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxHeadMasterCodes = karate.jsonPath(mdmsStateBillingService, "$.TaxHeadMaster[?(@.service=='" + businessService + "')].code")</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="590"><div class="step-ref bg-step">590</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxHeadMasterCode = taxHeadMasterCodes[randomNumber(taxHeadMasterCodes.length)]</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="591"><div class="step-ref bg-step">591</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxAmount = 200</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="592"><div class="step-ref bg-step">592</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionAmount = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="593"><div class="step-ref bg-step">593</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def minimumAmountPayable = 1</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Steps to create a new Employee through HRMS</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="594"><div class="step-ref bg-step">594</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServiceDemandPretest.feature@createBillDemand')</div></div><div class="time-cell passed">232</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="594.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServiceDemandPretest.feature</div></div><div class="time-cell passed">212</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="595"><div class="step-ref bg-step">595</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="596"><div class="step-ref bg-step">596</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceDemandConstants = read('../../business-services/constants/billing-service-demand.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="597"><div class="step-ref bg-step">597</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="598"><div class="step-ref bg-step">598</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createDemandRequest = read('../../business-services/requestPayload/billing-service-demand/create.json')</div></div><div class="time-cell passed">21</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="599"><div class="step-ref bg-step">599</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchDemandRequest = read('../../business-services/requestPayload/billing-service-demand/search.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="600"><div class="step-ref bg-step">600</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def updateDemandRequest = read('../../business-services/requestPayload/billing-service-demand/update.json')</div></div><div class="time-cell passed">13</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="601"><div class="step-ref bg-step">601</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="602"><div class="step-ref bg-step">602</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url createDemandUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print createDemandRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="603"><div class="step-ref bg-step">603</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request createDemandRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="604"><div class="step-ref bg-step">604</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">161</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="605"><div class="step-ref bg-step">605</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="606"><div class="step-ref bg-step">606</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billingServiceDemandResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="607"><div class="step-ref bg-step">607</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billingServiceDemandResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="608"><div class="step-ref bg-step">608</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* print billingServiceDemandResponseBody</div></div><div class="time-cell passed">0</div></div><div class="preformatted" data-parent="608">15:37:27.639 [print] {
  "ResponseInfo": {
    "ver": null,
    "resMsgId": null,
    "msgId": null,
    "apiId": null,
    "ts": null,
    "status": "201 CREATED"
  },
  "Demands": [
    {
      "taxPeriodFrom": 1628590047395,
      "businessService": "PT",
      "minimumAmountPayable": 1,
      "taxPeriodTo": 1628762847399,
      "fixedBillExpiryDate": null,
      "additionalDetails": null,
      "payer": null,
      "demandDetails": [
        {
          "demandId": "c047b233-b8af-45a7-a7b6-d67e8538724a",
          "taxHeadMasterCode": "PT_TIME_REBATE",
          "collectionAmount": 0,
          "auditDetails": {
            "lastModifiedTime": 1628590047820,
            "createdBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
            "lastModifiedBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
            "createdTime": 1628590047820
          },
          "tenantId": "pb.amritsar",
          "id": "4f067d19-2517-4e8d-8f73-637139e01d84",
          "taxAmount": 200,
          "additionalDetails": null
        }
      ],
      "consumerType": "PropertyTax",
      "auditDetails": {
        "lastModifiedTime": 1628590047820,
        "createdBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
        "lastModifiedBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
        "createdTime": 1628590047820
      },
      "tenantId": "pb.amritsar",
      "consumerCode": "Consumer-Code-Test-178645",
      "id": "c047b233-b8af-45a7-a7b6-d67e8538724a",
      "billExpiryTime": null,
      "isPaymentCompleted": false,
      "status": "ACTIVE"
    }
  ],
  "CollectedReceipt": null
}</div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="609"><div class="step-ref bg-step">609</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def Demands = billingServiceDemandResponseBody.Demands</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="610"><div class="step-ref bg-step">610</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def demandId = Demands[0].id</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="611"><div class="step-ref bg-step">611</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def consumerCode = Demands[0].consumerCode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the status Created</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="612"><div class="step-ref bg-step">612</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* assert billingServiceDemandResponseBody.ResponseInfo.status == commonConstants.expectedStatus.created</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand id is present</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="613"><div class="step-ref bg-step">613</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].id == "#present"</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the tenantId of demand response is equal with current tenantId</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="614"><div class="step-ref bg-step">614</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].tenantId == tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the consumer code of demand response is equal with defined consumerCode</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="615"><div class="step-ref bg-step">615</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].consumerCode == consumerCode</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the consumerType of demand response is equal with defined consumerType</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="616"><div class="step-ref bg-step">616</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].consumerType == consumerType</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the businessService of demand response is equal with defined businessService</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="617"><div class="step-ref bg-step">617</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].businessService == businessService</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxPeriodFrom of demand response is equal with defined taxPeriodFrom</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="618"><div class="step-ref bg-step">618</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].taxPeriodFrom == taxPeriodFrom</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxPeriodTo of demand response is equal with defined taxPeriodTo</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="619"><div class="step-ref bg-step">619</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].taxPeriodTo == taxPeriodTo</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand details id is present in demand response body</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="620"><div class="step-ref bg-step">620</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].id == "#present"</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demandId is present in demand response body</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="621"><div class="step-ref bg-step">621</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].demandId == "#present"</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxHeadMasterCode of demand response is equal with defined taxHeadMasterCode</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="622"><div class="step-ref bg-step">622</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].taxHeadMasterCode == taxHeadMasterCode</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxAmount of demand response is equal with defined taxAmount</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="623"><div class="step-ref bg-step">623</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].taxAmount == taxAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the collectionAmount of demand response is equal with defined collectionAmount</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="624"><div class="step-ref bg-step">624</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].collectionAmount == collectionAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the minimumAmountPayable of demand response is equal with defined minimumAmountPayable</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="625"><div class="step-ref bg-step">625</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].minimumAmountPayable == minimumAmountPayable</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand status is equal with expected demand status `ACTIVE`</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="626"><div class="step-ref bg-step">626</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].status == billingServiceDemandConstants.parameters.status</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="627"><div class="step-ref bg-step">627</div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="628"><div class="step-ref bg-step">628</div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="629"><div class="step-ref bg-step">629</div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="630"><div class="step-ref bg-step">630</div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="631"><div class="step-ref bg-step">631</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServicePretest.feature@fetchBill')</div></div><div class="time-cell passed">207</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="631.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServicePretest.feature</div></div><div class="time-cell passed">195</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="632"><div class="step-ref bg-step">632</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceConstants = read('../../business-services/constants/billing-service.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="633"><div class="step-ref bg-step">633</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionServiceConstants = read('../../business-services/constants/apportionService.yaml')</div></div><div class="time-cell passed">7</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="634"><div class="step-ref bg-step">634</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = billingServiceConstants.parameters.businessService</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="635"><div class="step-ref bg-step">635</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionbusinessService = apportionServiceConstants.parameters.businessService</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="636"><div class="step-ref bg-step">636</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason1 = apportionServiceConstants.parameters.reason1</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="637"><div class="step-ref bg-step">637</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason2 = apportionServiceConstants.parameters.reason2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="638"><div class="step-ref bg-step">638</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason3 = apportionServiceConstants.parameters.reason3</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="639"><div class="step-ref bg-step">639</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason4 = apportionServiceConstants.parameters.reason4</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment">#* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="640"><div class="step-ref bg-step">640</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillRequest = read('../../business-services/requestPayload/collection-services/fetchBill.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="641"><div class="step-ref bg-step">641</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillRequest = read('../../business-services/requestPayload/collection-services/cancelBill.json')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="642"><div class="step-ref bg-step">642</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="643"><div class="step-ref bg-step">643</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillParams =</div></div><div class="time-cell passed">1</div></div><div class="preformatted" data-parent="643">{
   consumerCode: '#(consumerCode)',
   businessService: '#(businessService)',
   tenantId: '#(tenantId)'
}</div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="644"><div class="step-ref bg-step">644</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url fetchBill</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="645"><div class="step-ref bg-step">645</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And params fetchBillParams</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillParams</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="646"><div class="step-ref bg-step">646</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request fetchBillRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="647"><div class="step-ref bg-step">647</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">164</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillResponse</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="648"><div class="step-ref bg-step">648</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="649"><div class="step-ref bg-step">649</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def fetchBillResponse = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="650"><div class="step-ref bg-step">650</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmount = response.Bill[0].totalAmount</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="651"><div class="step-ref bg-step">651</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billId = response.Bill[0].id</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="652"><div class="step-ref bg-step">652</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def txnAmount = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="653"><div class="step-ref bg-step">653</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmountPaid = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="654"><div class="step-ref bg-step">654</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalDue = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="655"><div class="step-ref bg-step">655</div><div class="step-indent"> </div><div class="step-cell passed">* def paidBillIdError = collectionServicesConstants.errorMessages.paidBillId</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="656"><div class="step-ref bg-step">656</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillIdError = collectionServicesConstants.errorMessages.invalidBillId</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="657"><div class="step-ref bg-step">657</div><div class="step-indent"> </div><div class="step-cell passed">* def totalAmountPaidError = collectionServicesConstants.errorMessages.totalAmountPaidNull</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="658"><div class="step-ref bg-step">658</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentModeError = collectionServicesConstants.errorMessages.invalidPaymentMode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="659"><div class="step-ref bg-step">659</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantIdError = commonConstants.errorMessages.invalidTenantIdError</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="660"><div class="step-ref bg-step">660</div><div class="step-indent"> </div><div class="step-cell passed">* def nullTenantIdError = commonConstants.errorMessages.nullParameterError</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="661"><div class="step-ref bg-step">661</div><div class="step-indent"> </div><div class="step-cell passed">* def reason = collectionServicesConstants.parameters.reason</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="662"><div class="step-ref bg-step">662</div><div class="step-indent"> </div><div class="step-cell passed">* def action = collectionServicesConstants.parameters.action</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="663"><div class="step-ref bg-step">663</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDateError = collectionServicesConstants.errorMessages.instrumentDateAsNull</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="664"><div class="step-ref bg-step">664</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentPastDateError = collectionServicesConstants.errorMessages.instrumentDatePastNinetyDays</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="665"><div class="step-ref bg-step">665</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentFutureDateError = collectionServicesConstants.errorMessages.futureInstrumentDate</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="666"><div class="step-ref bg-step">666</div><div class="step-indent"> </div><div class="step-cell passed">* def moreThanDueAmountError = collectionServicesConstants.errorMessages.moreThanDueAmount</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="667"><div class="step-ref bg-step">667</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberError = collectionServicesConstants.errorMessages.instrumentNumberAsEmptyString</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="668"><div class="step-ref bg-step">668</div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberError = collectionServicesConstants.errorMessages.transactionNumberAsEmptyString</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="669"><div class="step-ref bg-step">669</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/collectionServicesPretest.feature@createPayment')</div></div><div class="time-cell passed">477</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="669.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/collectionServicesPretest.feature</div></div><div class="time-cell passed">458</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="670"><div class="step-ref bg-step">670</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="671"><div class="step-ref bg-step">671</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="672"><div class="step-ref bg-step">672</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="673"><div class="step-ref bg-step">673</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def tenantId = tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="674"><div class="step-ref bg-step">674</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentMode = collectionServicesConstants.parameters.paymentMode</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="675"><div class="step-ref bg-step">675</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBy = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="676"><div class="step-ref bg-step">676</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="677"><div class="step-ref bg-step">677</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def payerName = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="678"><div class="step-ref bg-step">678</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalDue = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="679"><div class="step-ref bg-step">679</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumber = collectionServicesConstants.parameters.transactionNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="680"><div class="step-ref bg-step">680</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumber = collectionServicesConstants.parameters.instrumentNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="681"><div class="step-ref bg-step">681</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCard = collectionServicesConstants.parameters.paymentMode2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="682"><div class="step-ref bg-step">682</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCheque = collectionServicesConstants.parameters.paymentModeForCheque</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="683"><div class="step-ref bg-step">683</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberForCheque = collectionServicesConstants.parameters.transactionNumberForCheque</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="684"><div class="step-ref bg-step">684</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberForCheque = collectionServicesConstants.parameters.instrumentNumberForCheque</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="685"><div class="step-ref bg-step">685</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="686"><div class="step-ref bg-step">686</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def ifscCode = collectionServicesConstants.parameters.ifscCode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="687"><div class="step-ref bg-step">687</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="688"><div class="step-ref bg-step">688</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="689"><div class="step-ref bg-step">689</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequest = read('../../business-services/requestPayload/collection-services/create.json')</div></div><div class="time-cell passed">12</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="690"><div class="step-ref bg-step">690</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def workflowRequest = read('../../business-services/requestPayload/collection-services/workflow.json')</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="691"><div class="step-ref bg-step">691</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPaymentRequest = read('../../business-services/requestPayload/collection-services/search.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="692"><div class="step-ref bg-step">692</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTreceiptcount = read('../../business-services/requestPayload/collection-services/receiptcount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="693"><div class="step-ref bg-step">693</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequestForCheque = read('../../business-services/requestPayload/collection-services/createPaymentWithCheque.json')</div></div><div class="time-cell passed">13</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="694"><div class="step-ref bg-step">694</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def eChallanPaymentcount = read('../../business-services/requestPayload/collection-services/echallancount.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="695"><div class="step-ref bg-step">695</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="696"><div class="step-ref bg-step">696</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = 'invalid_'+randomNumber(4)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="697"><div class="step-ref bg-step">697</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBusinessId = 'PT'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="698"><div class="step-ref bg-step">698</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentMode = randomString(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="699"><div class="step-ref bg-step">699</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantId = randomString(5)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="700"><div class="step-ref bg-step">700</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def negativeTotalAmount = '-'+randomNumber(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="701"><div class="step-ref bg-step">701</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url payment</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="702"><div class="step-ref bg-step">702</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request createPaymentRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print createPaymentRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="703"><div class="step-ref bg-step">703</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">376</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="704"><div class="step-ref bg-step">704</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="705"><div class="step-ref bg-step">705</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="706"><div class="step-ref bg-step">706</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="707"><div class="step-ref bg-step">707</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def Payments = collectionServicesResponseBody.Payments</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="708"><div class="step-ref bg-step">708</div><div class="step-indent"> </div><div class="step-cell passed">* match response.ResponseInfo.status == '200 OK'</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="709"><div class="step-ref bg-step">709</div><div class="step-indent"> </div><div class="step-cell passed">* def paymentId = collectionServicesResponseBody.Payments[0].id</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="710"><div class="step-ref bg-step">710</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/collectionServicesPretest.feature@processworkflow')</div></div><div class="time-cell passed">856</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="710.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/collectionServicesPretest.feature</div></div><div class="time-cell passed">834</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="711"><div class="step-ref bg-step">711</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">13</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="712"><div class="step-ref bg-step">712</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="713"><div class="step-ref bg-step">713</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="714"><div class="step-ref bg-step">714</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def tenantId = tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="715"><div class="step-ref bg-step">715</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentMode = collectionServicesConstants.parameters.paymentMode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="716"><div class="step-ref bg-step">716</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBy = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="717"><div class="step-ref bg-step">717</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="718"><div class="step-ref bg-step">718</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def payerName = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="719"><div class="step-ref bg-step">719</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalDue = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="720"><div class="step-ref bg-step">720</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumber = collectionServicesConstants.parameters.transactionNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="721"><div class="step-ref bg-step">721</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumber = collectionServicesConstants.parameters.instrumentNumber</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="722"><div class="step-ref bg-step">722</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCard = collectionServicesConstants.parameters.paymentMode2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="723"><div class="step-ref bg-step">723</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCheque = collectionServicesConstants.parameters.paymentModeForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="724"><div class="step-ref bg-step">724</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberForCheque = collectionServicesConstants.parameters.transactionNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="725"><div class="step-ref bg-step">725</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberForCheque = collectionServicesConstants.parameters.instrumentNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="726"><div class="step-ref bg-step">726</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="727"><div class="step-ref bg-step">727</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def ifscCode = collectionServicesConstants.parameters.ifscCode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="728"><div class="step-ref bg-step">728</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="729"><div class="step-ref bg-step">729</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="730"><div class="step-ref bg-step">730</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequest = read('../../business-services/requestPayload/collection-services/create.json')</div></div><div class="time-cell passed">8</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="731"><div class="step-ref bg-step">731</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def workflowRequest = read('../../business-services/requestPayload/collection-services/workflow.json')</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="732"><div class="step-ref bg-step">732</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPaymentRequest = read('../../business-services/requestPayload/collection-services/search.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="733"><div class="step-ref bg-step">733</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTreceiptcount = read('../../business-services/requestPayload/collection-services/receiptcount.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="734"><div class="step-ref bg-step">734</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequestForCheque = read('../../business-services/requestPayload/collection-services/createPaymentWithCheque.json')</div></div><div class="time-cell passed">12</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="735"><div class="step-ref bg-step">735</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def eChallanPaymentcount = read('../../business-services/requestPayload/collection-services/echallancount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="736"><div class="step-ref bg-step">736</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="737"><div class="step-ref bg-step">737</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = 'invalid_'+randomNumber(4)</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="738"><div class="step-ref bg-step">738</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBusinessId = 'PT'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="739"><div class="step-ref bg-step">739</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentMode = randomString(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="740"><div class="step-ref bg-step">740</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantId = randomString(5)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="741"><div class="step-ref bg-step">741</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def negativeTotalAmount = '-'+randomNumber(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="742"><div class="step-ref bg-step">742</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url collectionServiceWorkflowUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="743"><div class="step-ref bg-step">743</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request workflowRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print workflowRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="744"><div class="step-ref bg-step">744</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">746</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="745"><div class="step-ref bg-step">745</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="746"><div class="step-ref bg-step">746</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[4:36]bg"><div class="step-container" id="747"><div class="step-ref bg-step">747</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="748"><div class="step-ref passed">748</div><div class="step-cell passed">* def key = pdfCreateConstant.parameters.valid.keyForTl</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-cell comment"># calling create pdf pretest</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="749"><div class="step-ref passed">749</div><div class="step-cell passed">* call read('../../core-services/pretests/pdfServiceCreate.feature@createPdfSuccessfully')</div></div><div class="time-cell passed">796</div></div><div class="step-row"><div class="step-container" id="749.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-cell passed">com/egov/core-services/tests/../../core-services/pretests/pdfServiceCreate.feature</div></div><div class="time-cell passed">786</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-cell comment"># * call read('../../business-services/tests/collectionServicesCreate.feature@Create_PaymentWithValidBillID_01')</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-cell comment">#* def Payments = Payments</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="750"><div class="step-ref passed">750</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayload = read('../../core-services/requestPayload/pdf-service/pdfCreate.json')</div></div><div class="time-cell passed">6</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-cell comment"># initializing pdf create payload objects</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="751"><div class="step-ref passed">751</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayloadFirst = pdfCreatePayload.TL</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="752"><div class="step-ref passed">752</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayloadSecond = pdfCreatePayload.PT</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="753"><div class="step-ref passed">753</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayloadThird = pdfCreatePayload.FireNoc</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="754"><div class="step-ref passed">754</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayloadFourth = pdfCreatePayload.WS</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="755"><div class="step-ref passed">755</div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="756"><div class="step-ref passed">756</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreateParam =</div></div><div class="time-cell passed">1</div></div><div class="preformatted" data-parent="756">{
 key: '#(key)',
 tenantId: '#(tenantId)'
}</div><div class="step-row"><div class="step-container" id="757"><div class="step-ref passed">757</div><div class="step-indent"> </div><div class="step-cell passed">Given url createPdf</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="758"><div class="step-ref passed">758</div><div class="step-indent"> </div><div class="step-cell passed">And params pdfCreateParam</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="759"><div class="step-ref passed">759</div><div class="step-indent"> </div><div class="step-cell passed">* eval pdfCreatePayloadSecond.Payments = Payments</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="760"><div class="step-ref passed">760</div><div class="step-indent"> </div><div class="step-cell passed">And request pdfCreatePayloadFirst</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="761"><div class="step-ref passed">761</div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">769</div></div><div class="step-row"><div class="step-container" id="762"><div class="step-ref passed">762</div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="763"><div class="step-ref passed">763</div><div class="step-indent"> </div><div class="step-cell passed">And def pdfCreateResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="764"><div class="step-ref passed">764</div><div class="step-indent"> </div><div class="step-cell passed">And def pdfCreateResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="765"><div class="step-ref passed">765</div><div class="step-cell passed">* match pdfCreateResponseBody.filestoreIds[0] == '#present'</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="766"><div class="step-ref passed">766</div><div class="step-cell passed">* assert pdfCreateResponseBody.message == pdfCreateConstant.expectedMessages.message</div></div><div class="time-cell passed">2</div></div></div><div class="scenario"><div class="scenario-heading" id="[5:44]"><div class="heading-container"><div class="scenario-tags"><a class="badge badge-primary" href="karate-tags.html">regression</a><a class="badge badge-primary" href="karate-tags.html">pdf_create_Fire_05</a><a class="badge badge-primary" href="karate-tags.html">positive</a><a class="badge badge-primary" href="karate-tags.html">pdfservice</a><a class="badge badge-primary" href="karate-tags.html">coreServices</a></div><span class="scenario-keyword">Scenario: [5:44]</span><span class="scenario-name">Verify a pdf is generated successfully for Fire NOC module </span></div><div class="scenario-time passed">ms: 3143</div></div><div class="step-row"><div class="step-container" id="[5:44]bg"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-cell passed">Background:</div></div><div class="time-cell passed"></div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-cell comment"># reading javascript utils for using generic methods</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="767"><div class="step-ref bg-step">767</div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">9</div></div><div class="preformatted" data-parent="767">15:37:30.101 karate.env:  
15:37:30.101 locale: en_IN 
15:37:30.102 tenantId: pb.amritsar</div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="768"><div class="step-ref bg-step">768</div><div class="step-cell passed">* def pdfCreateConstant = read('../../core-services/constants/pdfService.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="769"><div class="step-ref bg-step">769</div><div class="step-cell passed">* call read('../../business-services/tests/collectionServicesCreate.feature@Create_PaymentWithValidBillID_01')</div></div><div class="time-cell passed">1980</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="769.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/tests/collectionServicesCreate.feature</div></div><div class="time-cell passed">1957</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="770"><div class="step-ref bg-step">770</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/tests/billingServicesDemand.feature@create_01')</div></div><div class="time-cell passed">333</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="770.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/tests/billingServicesDemand.feature</div></div><div class="time-cell passed">287</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="771"><div class="step-ref bg-step">771</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="772"><div class="step-ref bg-step">772</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceDemandConstants = read('../../business-services/constants/billing-service-demand.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="773"><div class="step-ref bg-step">773</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="774"><div class="step-ref bg-step">774</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="775"><div class="step-ref bg-step">775</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def consumerType = mdmsStateBillingService.BusinessService[0].businessService</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="776"><div class="step-ref bg-step">776</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = mdmsStateBillingService.BusinessService[0].code</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="777"><div class="step-ref bg-step">777</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxPeriodFrom = getCurrentEpochTime()</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="778"><div class="step-ref bg-step">778</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def daysFromToday = 2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="779"><div class="step-ref bg-step">779</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxPeriodTo = getEpochDate(daysFromToday)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="780"><div class="step-ref bg-step">780</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxHeadMasterCodes = karate.jsonPath(mdmsStateBillingService, "$.TaxHeadMaster[?(@.service=='" + businessService + "')].code")</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="781"><div class="step-ref bg-step">781</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxHeadMasterCode = taxHeadMasterCodes[randomNumber(taxHeadMasterCodes.length)]</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="782"><div class="step-ref bg-step">782</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxAmount = 200</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="783"><div class="step-ref bg-step">783</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionAmount = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="784"><div class="step-ref bg-step">784</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def minimumAmountPayable = 1</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Steps to create a new Employee through HRMS</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="785"><div class="step-ref bg-step">785</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServiceDemandPretest.feature@createBillDemand')</div></div><div class="time-cell passed">250</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="785.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServiceDemandPretest.feature</div></div><div class="time-cell passed">234</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="786"><div class="step-ref bg-step">786</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="787"><div class="step-ref bg-step">787</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceDemandConstants = read('../../business-services/constants/billing-service-demand.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="788"><div class="step-ref bg-step">788</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="789"><div class="step-ref bg-step">789</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createDemandRequest = read('../../business-services/requestPayload/billing-service-demand/create.json')</div></div><div class="time-cell passed">24</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="790"><div class="step-ref bg-step">790</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchDemandRequest = read('../../business-services/requestPayload/billing-service-demand/search.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="791"><div class="step-ref bg-step">791</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def updateDemandRequest = read('../../business-services/requestPayload/billing-service-demand/update.json')</div></div><div class="time-cell passed">18</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="792"><div class="step-ref bg-step">792</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="793"><div class="step-ref bg-step">793</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url createDemandUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print createDemandRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="794"><div class="step-ref bg-step">794</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request createDemandRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="795"><div class="step-ref bg-step">795</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">171</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="796"><div class="step-ref bg-step">796</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="797"><div class="step-ref bg-step">797</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billingServiceDemandResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="798"><div class="step-ref bg-step">798</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billingServiceDemandResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="799"><div class="step-ref bg-step">799</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* print billingServiceDemandResponseBody</div></div><div class="time-cell passed">0</div></div><div class="preformatted" data-parent="799">15:37:30.455 [print] {
  "ResponseInfo": {
    "ver": null,
    "resMsgId": null,
    "msgId": null,
    "apiId": null,
    "ts": null,
    "status": "201 CREATED"
  },
  "Demands": [
    {
      "taxPeriodFrom": 1628590050201,
      "businessService": "PT",
      "minimumAmountPayable": 1,
      "taxPeriodTo": 1628762850204,
      "fixedBillExpiryDate": null,
      "additionalDetails": null,
      "payer": null,
      "demandDetails": [
        {
          "demandId": "64f63174-622a-455c-92ca-69658048c994",
          "taxHeadMasterCode": "PT_FIRE_CESS",
          "collectionAmount": 0,
          "auditDetails": {
            "lastModifiedTime": 1628590050628,
            "createdBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
            "lastModifiedBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
            "createdTime": 1628590050628
          },
          "tenantId": "pb.amritsar",
          "id": "442b9b1c-24b4-43ad-9b9c-6e125c5774f1",
          "taxAmount": 200,
          "additionalDetails": null
        }
      ],
      "consumerType": "PropertyTax",
      "auditDetails": {
        "lastModifiedTime": 1628590050628,
        "createdBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
        "lastModifiedBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
        "createdTime": 1628590050628
      },
      "tenantId": "pb.amritsar",
      "consumerCode": "Consumer-Code-Test-157058",
      "id": "64f63174-622a-455c-92ca-69658048c994",
      "billExpiryTime": null,
      "isPaymentCompleted": false,
      "status": "ACTIVE"
    }
  ],
  "CollectedReceipt": null
}</div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="800"><div class="step-ref bg-step">800</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def Demands = billingServiceDemandResponseBody.Demands</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="801"><div class="step-ref bg-step">801</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def demandId = Demands[0].id</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="802"><div class="step-ref bg-step">802</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def consumerCode = Demands[0].consumerCode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the status Created</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="803"><div class="step-ref bg-step">803</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* assert billingServiceDemandResponseBody.ResponseInfo.status == commonConstants.expectedStatus.created</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand id is present</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="804"><div class="step-ref bg-step">804</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].id == "#present"</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the tenantId of demand response is equal with current tenantId</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="805"><div class="step-ref bg-step">805</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].tenantId == tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the consumer code of demand response is equal with defined consumerCode</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="806"><div class="step-ref bg-step">806</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].consumerCode == consumerCode</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the consumerType of demand response is equal with defined consumerType</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="807"><div class="step-ref bg-step">807</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].consumerType == consumerType</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the businessService of demand response is equal with defined businessService</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="808"><div class="step-ref bg-step">808</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].businessService == businessService</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxPeriodFrom of demand response is equal with defined taxPeriodFrom</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="809"><div class="step-ref bg-step">809</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].taxPeriodFrom == taxPeriodFrom</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxPeriodTo of demand response is equal with defined taxPeriodTo</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="810"><div class="step-ref bg-step">810</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].taxPeriodTo == taxPeriodTo</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand details id is present in demand response body</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="811"><div class="step-ref bg-step">811</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].id == "#present"</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demandId is present in demand response body</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="812"><div class="step-ref bg-step">812</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].demandId == "#present"</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxHeadMasterCode of demand response is equal with defined taxHeadMasterCode</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="813"><div class="step-ref bg-step">813</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].taxHeadMasterCode == taxHeadMasterCode</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxAmount of demand response is equal with defined taxAmount</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="814"><div class="step-ref bg-step">814</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].taxAmount == taxAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the collectionAmount of demand response is equal with defined collectionAmount</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="815"><div class="step-ref bg-step">815</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].collectionAmount == collectionAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the minimumAmountPayable of demand response is equal with defined minimumAmountPayable</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="816"><div class="step-ref bg-step">816</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].minimumAmountPayable == minimumAmountPayable</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand status is equal with expected demand status `ACTIVE`</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="817"><div class="step-ref bg-step">817</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].status == billingServiceDemandConstants.parameters.status</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="818"><div class="step-ref bg-step">818</div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="819"><div class="step-ref bg-step">819</div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="820"><div class="step-ref bg-step">820</div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="821"><div class="step-ref bg-step">821</div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="822"><div class="step-ref bg-step">822</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServicePretest.feature@fetchBill')</div></div><div class="time-cell passed">205</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="822.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServicePretest.feature</div></div><div class="time-cell passed">197</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="823"><div class="step-ref bg-step">823</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceConstants = read('../../business-services/constants/billing-service.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="824"><div class="step-ref bg-step">824</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionServiceConstants = read('../../business-services/constants/apportionService.yaml')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="825"><div class="step-ref bg-step">825</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = billingServiceConstants.parameters.businessService</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="826"><div class="step-ref bg-step">826</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionbusinessService = apportionServiceConstants.parameters.businessService</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="827"><div class="step-ref bg-step">827</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason1 = apportionServiceConstants.parameters.reason1</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="828"><div class="step-ref bg-step">828</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason2 = apportionServiceConstants.parameters.reason2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="829"><div class="step-ref bg-step">829</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason3 = apportionServiceConstants.parameters.reason3</div></div><div class="time-cell passed">6</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="830"><div class="step-ref bg-step">830</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason4 = apportionServiceConstants.parameters.reason4</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment">#* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="831"><div class="step-ref bg-step">831</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillRequest = read('../../business-services/requestPayload/collection-services/fetchBill.json')</div></div><div class="time-cell passed">10</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="832"><div class="step-ref bg-step">832</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillRequest = read('../../business-services/requestPayload/collection-services/cancelBill.json')</div></div><div class="time-cell passed">15</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="833"><div class="step-ref bg-step">833</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="834"><div class="step-ref bg-step">834</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillParams =</div></div><div class="time-cell passed">0</div></div><div class="preformatted" data-parent="834">{
   consumerCode: '#(consumerCode)',
   businessService: '#(businessService)',
   tenantId: '#(tenantId)'
}</div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="835"><div class="step-ref bg-step">835</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url fetchBill</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="836"><div class="step-ref bg-step">836</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And params fetchBillParams</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillParams</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="837"><div class="step-ref bg-step">837</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request fetchBillRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="838"><div class="step-ref bg-step">838</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">147</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillResponse</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="839"><div class="step-ref bg-step">839</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="840"><div class="step-ref bg-step">840</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def fetchBillResponse = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="841"><div class="step-ref bg-step">841</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmount = response.Bill[0].totalAmount</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="842"><div class="step-ref bg-step">842</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billId = response.Bill[0].id</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="843"><div class="step-ref bg-step">843</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def txnAmount = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="844"><div class="step-ref bg-step">844</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmountPaid = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="845"><div class="step-ref bg-step">845</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalDue = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="846"><div class="step-ref bg-step">846</div><div class="step-indent"> </div><div class="step-cell passed">* def paidBillIdError = collectionServicesConstants.errorMessages.paidBillId</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="847"><div class="step-ref bg-step">847</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillIdError = collectionServicesConstants.errorMessages.invalidBillId</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="848"><div class="step-ref bg-step">848</div><div class="step-indent"> </div><div class="step-cell passed">* def totalAmountPaidError = collectionServicesConstants.errorMessages.totalAmountPaidNull</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="849"><div class="step-ref bg-step">849</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentModeError = collectionServicesConstants.errorMessages.invalidPaymentMode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="850"><div class="step-ref bg-step">850</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantIdError = commonConstants.errorMessages.invalidTenantIdError</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="851"><div class="step-ref bg-step">851</div><div class="step-indent"> </div><div class="step-cell passed">* def nullTenantIdError = commonConstants.errorMessages.nullParameterError</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="852"><div class="step-ref bg-step">852</div><div class="step-indent"> </div><div class="step-cell passed">* def reason = collectionServicesConstants.parameters.reason</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="853"><div class="step-ref bg-step">853</div><div class="step-indent"> </div><div class="step-cell passed">* def action = collectionServicesConstants.parameters.action</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="854"><div class="step-ref bg-step">854</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDateError = collectionServicesConstants.errorMessages.instrumentDateAsNull</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="855"><div class="step-ref bg-step">855</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentPastDateError = collectionServicesConstants.errorMessages.instrumentDatePastNinetyDays</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="856"><div class="step-ref bg-step">856</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentFutureDateError = collectionServicesConstants.errorMessages.futureInstrumentDate</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="857"><div class="step-ref bg-step">857</div><div class="step-indent"> </div><div class="step-cell passed">* def moreThanDueAmountError = collectionServicesConstants.errorMessages.moreThanDueAmount</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="858"><div class="step-ref bg-step">858</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberError = collectionServicesConstants.errorMessages.instrumentNumberAsEmptyString</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="859"><div class="step-ref bg-step">859</div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberError = collectionServicesConstants.errorMessages.transactionNumberAsEmptyString</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="860"><div class="step-ref bg-step">860</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/collectionServicesPretest.feature@createPayment')</div></div><div class="time-cell passed">474</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="860.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/collectionServicesPretest.feature</div></div><div class="time-cell passed">457</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="861"><div class="step-ref bg-step">861</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="862"><div class="step-ref bg-step">862</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="863"><div class="step-ref bg-step">863</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="864"><div class="step-ref bg-step">864</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def tenantId = tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="865"><div class="step-ref bg-step">865</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentMode = collectionServicesConstants.parameters.paymentMode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="866"><div class="step-ref bg-step">866</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBy = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="867"><div class="step-ref bg-step">867</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="868"><div class="step-ref bg-step">868</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def payerName = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="869"><div class="step-ref bg-step">869</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalDue = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="870"><div class="step-ref bg-step">870</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumber = collectionServicesConstants.parameters.transactionNumber</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="871"><div class="step-ref bg-step">871</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumber = collectionServicesConstants.parameters.instrumentNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="872"><div class="step-ref bg-step">872</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCard = collectionServicesConstants.parameters.paymentMode2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="873"><div class="step-ref bg-step">873</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCheque = collectionServicesConstants.parameters.paymentModeForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="874"><div class="step-ref bg-step">874</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberForCheque = collectionServicesConstants.parameters.transactionNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="875"><div class="step-ref bg-step">875</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberForCheque = collectionServicesConstants.parameters.instrumentNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="876"><div class="step-ref bg-step">876</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="877"><div class="step-ref bg-step">877</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def ifscCode = collectionServicesConstants.parameters.ifscCode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="878"><div class="step-ref bg-step">878</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="879"><div class="step-ref bg-step">879</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="880"><div class="step-ref bg-step">880</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequest = read('../../business-services/requestPayload/collection-services/create.json')</div></div><div class="time-cell passed">11</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="881"><div class="step-ref bg-step">881</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def workflowRequest = read('../../business-services/requestPayload/collection-services/workflow.json')</div></div><div class="time-cell passed">6</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="882"><div class="step-ref bg-step">882</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPaymentRequest = read('../../business-services/requestPayload/collection-services/search.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="883"><div class="step-ref bg-step">883</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTreceiptcount = read('../../business-services/requestPayload/collection-services/receiptcount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="884"><div class="step-ref bg-step">884</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequestForCheque = read('../../business-services/requestPayload/collection-services/createPaymentWithCheque.json')</div></div><div class="time-cell passed">9</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="885"><div class="step-ref bg-step">885</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def eChallanPaymentcount = read('../../business-services/requestPayload/collection-services/echallancount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="886"><div class="step-ref bg-step">886</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="887"><div class="step-ref bg-step">887</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = 'invalid_'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="888"><div class="step-ref bg-step">888</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBusinessId = 'PT'+randomNumber(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="889"><div class="step-ref bg-step">889</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentMode = randomString(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="890"><div class="step-ref bg-step">890</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantId = randomString(5)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="891"><div class="step-ref bg-step">891</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def negativeTotalAmount = '-'+randomNumber(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="892"><div class="step-ref bg-step">892</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url payment</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="893"><div class="step-ref bg-step">893</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request createPaymentRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print createPaymentRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="894"><div class="step-ref bg-step">894</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">383</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="895"><div class="step-ref bg-step">895</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="896"><div class="step-ref bg-step">896</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="897"><div class="step-ref bg-step">897</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="898"><div class="step-ref bg-step">898</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def Payments = collectionServicesResponseBody.Payments</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="899"><div class="step-ref bg-step">899</div><div class="step-indent"> </div><div class="step-cell passed">* match response.ResponseInfo.status == '200 OK'</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="900"><div class="step-ref bg-step">900</div><div class="step-indent"> </div><div class="step-cell passed">* def paymentId = collectionServicesResponseBody.Payments[0].id</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="901"><div class="step-ref bg-step">901</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/collectionServicesPretest.feature@processworkflow')</div></div><div class="time-cell passed">923</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="901.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/collectionServicesPretest.feature</div></div><div class="time-cell passed">891</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="902"><div class="step-ref bg-step">902</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">21</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="903"><div class="step-ref bg-step">903</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="904"><div class="step-ref bg-step">904</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="905"><div class="step-ref bg-step">905</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def tenantId = tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="906"><div class="step-ref bg-step">906</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentMode = collectionServicesConstants.parameters.paymentMode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="907"><div class="step-ref bg-step">907</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBy = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="908"><div class="step-ref bg-step">908</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="909"><div class="step-ref bg-step">909</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def payerName = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="910"><div class="step-ref bg-step">910</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalDue = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="911"><div class="step-ref bg-step">911</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumber = collectionServicesConstants.parameters.transactionNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="912"><div class="step-ref bg-step">912</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumber = collectionServicesConstants.parameters.instrumentNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="913"><div class="step-ref bg-step">913</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCard = collectionServicesConstants.parameters.paymentMode2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="914"><div class="step-ref bg-step">914</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCheque = collectionServicesConstants.parameters.paymentModeForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="915"><div class="step-ref bg-step">915</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberForCheque = collectionServicesConstants.parameters.transactionNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="916"><div class="step-ref bg-step">916</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberForCheque = collectionServicesConstants.parameters.instrumentNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="917"><div class="step-ref bg-step">917</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="918"><div class="step-ref bg-step">918</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def ifscCode = collectionServicesConstants.parameters.ifscCode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="919"><div class="step-ref bg-step">919</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="920"><div class="step-ref bg-step">920</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="921"><div class="step-ref bg-step">921</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequest = read('../../business-services/requestPayload/collection-services/create.json')</div></div><div class="time-cell passed">9</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="922"><div class="step-ref bg-step">922</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def workflowRequest = read('../../business-services/requestPayload/collection-services/workflow.json')</div></div><div class="time-cell passed">9</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="923"><div class="step-ref bg-step">923</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPaymentRequest = read('../../business-services/requestPayload/collection-services/search.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="924"><div class="step-ref bg-step">924</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTreceiptcount = read('../../business-services/requestPayload/collection-services/receiptcount.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="925"><div class="step-ref bg-step">925</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequestForCheque = read('../../business-services/requestPayload/collection-services/createPaymentWithCheque.json')</div></div><div class="time-cell passed">9</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="926"><div class="step-ref bg-step">926</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def eChallanPaymentcount = read('../../business-services/requestPayload/collection-services/echallancount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="927"><div class="step-ref bg-step">927</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="928"><div class="step-ref bg-step">928</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = 'invalid_'+randomNumber(4)</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="929"><div class="step-ref bg-step">929</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBusinessId = 'PT'+randomNumber(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="930"><div class="step-ref bg-step">930</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentMode = randomString(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="931"><div class="step-ref bg-step">931</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantId = randomString(5)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="932"><div class="step-ref bg-step">932</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def negativeTotalAmount = '-'+randomNumber(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="933"><div class="step-ref bg-step">933</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url collectionServiceWorkflowUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="934"><div class="step-ref bg-step">934</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request workflowRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print workflowRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="935"><div class="step-ref bg-step">935</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">796</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="936"><div class="step-ref bg-step">936</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="937"><div class="step-ref bg-step">937</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[5:44]bg"><div class="step-container" id="938"><div class="step-ref bg-step">938</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="939"><div class="step-ref passed">939</div><div class="step-cell passed">* def key = pdfCreateConstant.parameters.valid.keyForFireNoc</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-cell comment"># calling create pdf pretest</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="940"><div class="step-ref passed">940</div><div class="step-cell passed">* call read('../../core-services/pretests/pdfServiceCreate.feature@createPdfForFireNocSuccessfully')</div></div><div class="time-cell passed">1147</div></div><div class="step-row"><div class="step-container" id="940.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-cell passed">com/egov/core-services/tests/../../core-services/pretests/pdfServiceCreate.feature</div></div><div class="time-cell passed">1134</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-cell comment"># * call read('../../business-services/tests/collectionServicesCreate.feature@Create_PaymentWithValidBillID_01')</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-cell comment">#* def Payments = Payments</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="941"><div class="step-ref passed">941</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayload = read('../../core-services/requestPayload/pdf-service/pdfCreate.json')</div></div><div class="time-cell passed">8</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-cell comment"># initializing pdf create payload objects</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="942"><div class="step-ref passed">942</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayloadFirst = pdfCreatePayload.TL</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="943"><div class="step-ref passed">943</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayloadSecond = pdfCreatePayload.PT</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="944"><div class="step-ref passed">944</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayloadThird = pdfCreatePayload.FireNoc</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="945"><div class="step-ref passed">945</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayloadFourth = pdfCreatePayload.WS</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="946"><div class="step-ref passed">946</div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="947"><div class="step-ref passed">947</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreateParam =</div></div><div class="time-cell passed">2</div></div><div class="preformatted" data-parent="947">{
 key: '#(key)',
 tenantId: '#(tenantId)'
}</div><div class="step-row"><div class="step-container" id="948"><div class="step-ref passed">948</div><div class="step-indent"> </div><div class="step-cell passed">Given url createPdf</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="949"><div class="step-ref passed">949</div><div class="step-indent"> </div><div class="step-cell passed">And params pdfCreateParam</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="950"><div class="step-ref passed">950</div><div class="step-indent"> </div><div class="step-cell passed">And request pdfCreatePayloadThird</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="951"><div class="step-ref passed">951</div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">1116</div></div><div class="step-row"><div class="step-container" id="952"><div class="step-ref passed">952</div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="953"><div class="step-ref passed">953</div><div class="step-indent"> </div><div class="step-cell passed">And def pdfCreateResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="954"><div class="step-ref passed">954</div><div class="step-indent"> </div><div class="step-cell passed">And def pdfCreateResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="955"><div class="step-ref passed">955</div><div class="step-cell passed">* match pdfCreateResponseBody == '#present'</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="956"><div class="step-ref passed">956</div><div class="step-cell passed">* match pdfCreateResponseBody.ResponseInfo.userInfo.roles.length == '##[_ &gt; 0]'</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="957"><div class="step-ref passed">957</div><div class="step-cell passed">* assert pdfCreateResponseBody.message == pdfCreateConstant.expectedMessages.message</div></div><div class="time-cell passed">1</div></div></div><div class="scenario"><div class="scenario-heading" id="[6:54]"><div class="heading-container"><div class="scenario-tags"><a class="badge badge-primary" href="karate-tags.html">regression</a><a class="badge badge-primary" href="karate-tags.html">pdf_create_Fire_FS_06</a><a class="badge badge-primary" href="karate-tags.html">positive</a><a class="badge badge-primary" href="karate-tags.html">pdfservice</a><a class="badge badge-primary" href="karate-tags.html">coreServices</a></div><span class="scenario-keyword">Scenario: [6:54]</span><span class="scenario-name">Verify the FileStore ID is created in the Response for the FireNOC API call for PDF generation service </span></div><div class="scenario-time passed">ms: 3080</div></div><div class="step-row"><div class="step-container" id="[6:54]bg"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-cell passed">Background:</div></div><div class="time-cell passed"></div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-cell comment"># reading javascript utils for using generic methods</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="958"><div class="step-ref bg-step">958</div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">16</div></div><div class="preformatted" data-parent="958">15:37:33.324 karate.env:  
15:37:33.324 locale: en_IN 
15:37:33.325 tenantId: pb.amritsar</div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="959"><div class="step-ref bg-step">959</div><div class="step-cell passed">* def pdfCreateConstant = read('../../core-services/constants/pdfService.yaml')</div></div><div class="time-cell passed">7</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="960"><div class="step-ref bg-step">960</div><div class="step-cell passed">* call read('../../business-services/tests/collectionServicesCreate.feature@Create_PaymentWithValidBillID_01')</div></div><div class="time-cell passed">2149</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="960.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/tests/collectionServicesCreate.feature</div></div><div class="time-cell passed">2136</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="961"><div class="step-ref bg-step">961</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/tests/billingServicesDemand.feature@create_01')</div></div><div class="time-cell passed">265</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="961.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/tests/billingServicesDemand.feature</div></div><div class="time-cell passed">236</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="962"><div class="step-ref bg-step">962</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="963"><div class="step-ref bg-step">963</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceDemandConstants = read('../../business-services/constants/billing-service-demand.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="964"><div class="step-ref bg-step">964</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="965"><div class="step-ref bg-step">965</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="966"><div class="step-ref bg-step">966</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def consumerType = mdmsStateBillingService.BusinessService[0].businessService</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="967"><div class="step-ref bg-step">967</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = mdmsStateBillingService.BusinessService[0].code</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="968"><div class="step-ref bg-step">968</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxPeriodFrom = getCurrentEpochTime()</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="969"><div class="step-ref bg-step">969</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def daysFromToday = 2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="970"><div class="step-ref bg-step">970</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxPeriodTo = getEpochDate(daysFromToday)</div></div><div class="time-cell passed">6</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="971"><div class="step-ref bg-step">971</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxHeadMasterCodes = karate.jsonPath(mdmsStateBillingService, "$.TaxHeadMaster[?(@.service=='" + businessService + "')].code")</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="972"><div class="step-ref bg-step">972</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxHeadMasterCode = taxHeadMasterCodes[randomNumber(taxHeadMasterCodes.length)]</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="973"><div class="step-ref bg-step">973</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxAmount = 200</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="974"><div class="step-ref bg-step">974</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionAmount = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="975"><div class="step-ref bg-step">975</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def minimumAmountPayable = 1</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Steps to create a new Employee through HRMS</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="976"><div class="step-ref bg-step">976</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServiceDemandPretest.feature@createBillDemand')</div></div><div class="time-cell passed">199</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="976.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServiceDemandPretest.feature</div></div><div class="time-cell passed">188</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="977"><div class="step-ref bg-step">977</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="978"><div class="step-ref bg-step">978</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceDemandConstants = read('../../business-services/constants/billing-service-demand.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="979"><div class="step-ref bg-step">979</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="980"><div class="step-ref bg-step">980</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createDemandRequest = read('../../business-services/requestPayload/billing-service-demand/create.json')</div></div><div class="time-cell passed">18</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="981"><div class="step-ref bg-step">981</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchDemandRequest = read('../../business-services/requestPayload/billing-service-demand/search.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="982"><div class="step-ref bg-step">982</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def updateDemandRequest = read('../../business-services/requestPayload/billing-service-demand/update.json')</div></div><div class="time-cell passed">13</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="983"><div class="step-ref bg-step">983</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="984"><div class="step-ref bg-step">984</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url createDemandUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print createDemandRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="985"><div class="step-ref bg-step">985</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request createDemandRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="986"><div class="step-ref bg-step">986</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">141</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="987"><div class="step-ref bg-step">987</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="988"><div class="step-ref bg-step">988</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billingServiceDemandResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="989"><div class="step-ref bg-step">989</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billingServiceDemandResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="990"><div class="step-ref bg-step">990</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* print billingServiceDemandResponseBody</div></div><div class="time-cell passed">0</div></div><div class="preformatted" data-parent="990">15:37:33.616 [print] {
  "ResponseInfo": {
    "ver": null,
    "resMsgId": null,
    "msgId": null,
    "apiId": null,
    "ts": null,
    "status": "201 CREATED"
  },
  "Demands": [
    {
      "taxPeriodFrom": 1628590053407,
      "businessService": "PT",
      "minimumAmountPayable": 1,
      "taxPeriodTo": 1628762853414,
      "fixedBillExpiryDate": null,
      "additionalDetails": null,
      "payer": null,
      "demandDetails": [
        {
          "demandId": "7e708543-e9ff-4370-a42a-09e4af101020",
          "taxHeadMasterCode": "PT_DECIMAL_CEILING_DEBIT",
          "collectionAmount": 0,
          "auditDetails": {
            "lastModifiedTime": 1628590053804,
            "createdBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
            "lastModifiedBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
            "createdTime": 1628590053804
          },
          "tenantId": "pb.amritsar",
          "id": "1e73af5e-67ad-410e-bb59-e151279f757e",
          "taxAmount": 200,
          "additionalDetails": null
        }
      ],
      "consumerType": "PropertyTax",
      "auditDetails": {
        "lastModifiedTime": 1628590053804,
        "createdBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
        "lastModifiedBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
        "createdTime": 1628590053804
      },
      "tenantId": "pb.amritsar",
      "consumerCode": "Consumer-Code-Test-614990",
      "id": "7e708543-e9ff-4370-a42a-09e4af101020",
      "billExpiryTime": null,
      "isPaymentCompleted": false,
      "status": "ACTIVE"
    }
  ],
  "CollectedReceipt": null
}</div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="991"><div class="step-ref bg-step">991</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def Demands = billingServiceDemandResponseBody.Demands</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="992"><div class="step-ref bg-step">992</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def demandId = Demands[0].id</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="993"><div class="step-ref bg-step">993</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def consumerCode = Demands[0].consumerCode</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the status Created</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="994"><div class="step-ref bg-step">994</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* assert billingServiceDemandResponseBody.ResponseInfo.status == commonConstants.expectedStatus.created</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand id is present</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="995"><div class="step-ref bg-step">995</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].id == "#present"</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the tenantId of demand response is equal with current tenantId</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="996"><div class="step-ref bg-step">996</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].tenantId == tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the consumer code of demand response is equal with defined consumerCode</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="997"><div class="step-ref bg-step">997</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].consumerCode == consumerCode</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the consumerType of demand response is equal with defined consumerType</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="998"><div class="step-ref bg-step">998</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].consumerType == consumerType</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the businessService of demand response is equal with defined businessService</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="999"><div class="step-ref bg-step">999</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].businessService == businessService</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxPeriodFrom of demand response is equal with defined taxPeriodFrom</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1000"><div class="step-ref bg-step">1000</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].taxPeriodFrom == taxPeriodFrom</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxPeriodTo of demand response is equal with defined taxPeriodTo</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1001"><div class="step-ref bg-step">1001</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].taxPeriodTo == taxPeriodTo</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand details id is present in demand response body</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1002"><div class="step-ref bg-step">1002</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].id == "#present"</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demandId is present in demand response body</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1003"><div class="step-ref bg-step">1003</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].demandId == "#present"</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxHeadMasterCode of demand response is equal with defined taxHeadMasterCode</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1004"><div class="step-ref bg-step">1004</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].taxHeadMasterCode == taxHeadMasterCode</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxAmount of demand response is equal with defined taxAmount</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1005"><div class="step-ref bg-step">1005</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].taxAmount == taxAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the collectionAmount of demand response is equal with defined collectionAmount</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1006"><div class="step-ref bg-step">1006</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].collectionAmount == collectionAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the minimumAmountPayable of demand response is equal with defined minimumAmountPayable</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1007"><div class="step-ref bg-step">1007</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].minimumAmountPayable == minimumAmountPayable</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand status is equal with expected demand status `ACTIVE`</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1008"><div class="step-ref bg-step">1008</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].status == billingServiceDemandConstants.parameters.status</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1009"><div class="step-ref bg-step">1009</div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1010"><div class="step-ref bg-step">1010</div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1011"><div class="step-ref bg-step">1011</div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1012"><div class="step-ref bg-step">1012</div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1013"><div class="step-ref bg-step">1013</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServicePretest.feature@fetchBill')</div></div><div class="time-cell passed">231</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1013.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServicePretest.feature</div></div><div class="time-cell passed">221</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1014"><div class="step-ref bg-step">1014</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceConstants = read('../../business-services/constants/billing-service.yaml')</div></div><div class="time-cell passed">8</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1015"><div class="step-ref bg-step">1015</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionServiceConstants = read('../../business-services/constants/apportionService.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1016"><div class="step-ref bg-step">1016</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = billingServiceConstants.parameters.businessService</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1017"><div class="step-ref bg-step">1017</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionbusinessService = apportionServiceConstants.parameters.businessService</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1018"><div class="step-ref bg-step">1018</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason1 = apportionServiceConstants.parameters.reason1</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1019"><div class="step-ref bg-step">1019</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason2 = apportionServiceConstants.parameters.reason2</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1020"><div class="step-ref bg-step">1020</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason3 = apportionServiceConstants.parameters.reason3</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1021"><div class="step-ref bg-step">1021</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason4 = apportionServiceConstants.parameters.reason4</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment">#* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1022"><div class="step-ref bg-step">1022</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillRequest = read('../../business-services/requestPayload/collection-services/fetchBill.json')</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1023"><div class="step-ref bg-step">1023</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillRequest = read('../../business-services/requestPayload/collection-services/cancelBill.json')</div></div><div class="time-cell passed">12</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1024"><div class="step-ref bg-step">1024</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1025"><div class="step-ref bg-step">1025</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillParams =</div></div><div class="time-cell passed">1</div></div><div class="preformatted" data-parent="1025">{
   consumerCode: '#(consumerCode)',
   businessService: '#(businessService)',
   tenantId: '#(tenantId)'
}</div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1026"><div class="step-ref bg-step">1026</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url fetchBill</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1027"><div class="step-ref bg-step">1027</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And params fetchBillParams</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillParams</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1028"><div class="step-ref bg-step">1028</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request fetchBillRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1029"><div class="step-ref bg-step">1029</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">174</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillResponse</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1030"><div class="step-ref bg-step">1030</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1031"><div class="step-ref bg-step">1031</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def fetchBillResponse = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1032"><div class="step-ref bg-step">1032</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmount = response.Bill[0].totalAmount</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1033"><div class="step-ref bg-step">1033</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billId = response.Bill[0].id</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1034"><div class="step-ref bg-step">1034</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def txnAmount = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1035"><div class="step-ref bg-step">1035</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmountPaid = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1036"><div class="step-ref bg-step">1036</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalDue = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1037"><div class="step-ref bg-step">1037</div><div class="step-indent"> </div><div class="step-cell passed">* def paidBillIdError = collectionServicesConstants.errorMessages.paidBillId</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1038"><div class="step-ref bg-step">1038</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillIdError = collectionServicesConstants.errorMessages.invalidBillId</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1039"><div class="step-ref bg-step">1039</div><div class="step-indent"> </div><div class="step-cell passed">* def totalAmountPaidError = collectionServicesConstants.errorMessages.totalAmountPaidNull</div></div><div class="time-cell passed">9</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1040"><div class="step-ref bg-step">1040</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentModeError = collectionServicesConstants.errorMessages.invalidPaymentMode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1041"><div class="step-ref bg-step">1041</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantIdError = commonConstants.errorMessages.invalidTenantIdError</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1042"><div class="step-ref bg-step">1042</div><div class="step-indent"> </div><div class="step-cell passed">* def nullTenantIdError = commonConstants.errorMessages.nullParameterError</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1043"><div class="step-ref bg-step">1043</div><div class="step-indent"> </div><div class="step-cell passed">* def reason = collectionServicesConstants.parameters.reason</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1044"><div class="step-ref bg-step">1044</div><div class="step-indent"> </div><div class="step-cell passed">* def action = collectionServicesConstants.parameters.action</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1045"><div class="step-ref bg-step">1045</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDateError = collectionServicesConstants.errorMessages.instrumentDateAsNull</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1046"><div class="step-ref bg-step">1046</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentPastDateError = collectionServicesConstants.errorMessages.instrumentDatePastNinetyDays</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1047"><div class="step-ref bg-step">1047</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentFutureDateError = collectionServicesConstants.errorMessages.futureInstrumentDate</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1048"><div class="step-ref bg-step">1048</div><div class="step-indent"> </div><div class="step-cell passed">* def moreThanDueAmountError = collectionServicesConstants.errorMessages.moreThanDueAmount</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1049"><div class="step-ref bg-step">1049</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberError = collectionServicesConstants.errorMessages.instrumentNumberAsEmptyString</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1050"><div class="step-ref bg-step">1050</div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberError = collectionServicesConstants.errorMessages.transactionNumberAsEmptyString</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1051"><div class="step-ref bg-step">1051</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/collectionServicesPretest.feature@createPayment')</div></div><div class="time-cell passed">605</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1051.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/collectionServicesPretest.feature</div></div><div class="time-cell passed">575</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1052"><div class="step-ref bg-step">1052</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">16</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1053"><div class="step-ref bg-step">1053</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1054"><div class="step-ref bg-step">1054</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1055"><div class="step-ref bg-step">1055</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def tenantId = tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1056"><div class="step-ref bg-step">1056</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentMode = collectionServicesConstants.parameters.paymentMode</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1057"><div class="step-ref bg-step">1057</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBy = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1058"><div class="step-ref bg-step">1058</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">8</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1059"><div class="step-ref bg-step">1059</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def payerName = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1060"><div class="step-ref bg-step">1060</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalDue = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1061"><div class="step-ref bg-step">1061</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumber = collectionServicesConstants.parameters.transactionNumber</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1062"><div class="step-ref bg-step">1062</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumber = collectionServicesConstants.parameters.instrumentNumber</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1063"><div class="step-ref bg-step">1063</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCard = collectionServicesConstants.parameters.paymentMode2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1064"><div class="step-ref bg-step">1064</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCheque = collectionServicesConstants.parameters.paymentModeForCheque</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1065"><div class="step-ref bg-step">1065</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberForCheque = collectionServicesConstants.parameters.transactionNumberForCheque</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1066"><div class="step-ref bg-step">1066</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberForCheque = collectionServicesConstants.parameters.instrumentNumberForCheque</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1067"><div class="step-ref bg-step">1067</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">7</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1068"><div class="step-ref bg-step">1068</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def ifscCode = collectionServicesConstants.parameters.ifscCode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1069"><div class="step-ref bg-step">1069</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1070"><div class="step-ref bg-step">1070</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1071"><div class="step-ref bg-step">1071</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequest = read('../../business-services/requestPayload/collection-services/create.json')</div></div><div class="time-cell passed">31</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1072"><div class="step-ref bg-step">1072</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def workflowRequest = read('../../business-services/requestPayload/collection-services/workflow.json')</div></div><div class="time-cell passed">12</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1073"><div class="step-ref bg-step">1073</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPaymentRequest = read('../../business-services/requestPayload/collection-services/search.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1074"><div class="step-ref bg-step">1074</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTreceiptcount = read('../../business-services/requestPayload/collection-services/receiptcount.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1075"><div class="step-ref bg-step">1075</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequestForCheque = read('../../business-services/requestPayload/collection-services/createPaymentWithCheque.json')</div></div><div class="time-cell passed">31</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1076"><div class="step-ref bg-step">1076</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def eChallanPaymentcount = read('../../business-services/requestPayload/collection-services/echallancount.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1077"><div class="step-ref bg-step">1077</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1078"><div class="step-ref bg-step">1078</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = 'invalid_'+randomNumber(4)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1079"><div class="step-ref bg-step">1079</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBusinessId = 'PT'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1080"><div class="step-ref bg-step">1080</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentMode = randomString(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1081"><div class="step-ref bg-step">1081</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantId = randomString(5)</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1082"><div class="step-ref bg-step">1082</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def negativeTotalAmount = '-'+randomNumber(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1083"><div class="step-ref bg-step">1083</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url payment</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1084"><div class="step-ref bg-step">1084</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request createPaymentRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print createPaymentRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1085"><div class="step-ref bg-step">1085</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">412</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1086"><div class="step-ref bg-step">1086</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1087"><div class="step-ref bg-step">1087</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1088"><div class="step-ref bg-step">1088</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1089"><div class="step-ref bg-step">1089</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def Payments = collectionServicesResponseBody.Payments</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1090"><div class="step-ref bg-step">1090</div><div class="step-indent"> </div><div class="step-cell passed">* match response.ResponseInfo.status == '200 OK'</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1091"><div class="step-ref bg-step">1091</div><div class="step-indent"> </div><div class="step-cell passed">* def paymentId = collectionServicesResponseBody.Payments[0].id</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1092"><div class="step-ref bg-step">1092</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/collectionServicesPretest.feature@processworkflow')</div></div><div class="time-cell passed">998</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1092.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/collectionServicesPretest.feature</div></div><div class="time-cell passed">977</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1093"><div class="step-ref bg-step">1093</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">8</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1094"><div class="step-ref bg-step">1094</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1095"><div class="step-ref bg-step">1095</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1096"><div class="step-ref bg-step">1096</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def tenantId = tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1097"><div class="step-ref bg-step">1097</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentMode = collectionServicesConstants.parameters.paymentMode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1098"><div class="step-ref bg-step">1098</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBy = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1099"><div class="step-ref bg-step">1099</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1100"><div class="step-ref bg-step">1100</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def payerName = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1101"><div class="step-ref bg-step">1101</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalDue = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1102"><div class="step-ref bg-step">1102</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumber = collectionServicesConstants.parameters.transactionNumber</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1103"><div class="step-ref bg-step">1103</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumber = collectionServicesConstants.parameters.instrumentNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1104"><div class="step-ref bg-step">1104</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCard = collectionServicesConstants.parameters.paymentMode2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1105"><div class="step-ref bg-step">1105</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCheque = collectionServicesConstants.parameters.paymentModeForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1106"><div class="step-ref bg-step">1106</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberForCheque = collectionServicesConstants.parameters.transactionNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1107"><div class="step-ref bg-step">1107</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberForCheque = collectionServicesConstants.parameters.instrumentNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1108"><div class="step-ref bg-step">1108</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1109"><div class="step-ref bg-step">1109</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def ifscCode = collectionServicesConstants.parameters.ifscCode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1110"><div class="step-ref bg-step">1110</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1111"><div class="step-ref bg-step">1111</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1112"><div class="step-ref bg-step">1112</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequest = read('../../business-services/requestPayload/collection-services/create.json')</div></div><div class="time-cell passed">8</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1113"><div class="step-ref bg-step">1113</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def workflowRequest = read('../../business-services/requestPayload/collection-services/workflow.json')</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1114"><div class="step-ref bg-step">1114</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPaymentRequest = read('../../business-services/requestPayload/collection-services/search.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1115"><div class="step-ref bg-step">1115</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTreceiptcount = read('../../business-services/requestPayload/collection-services/receiptcount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1116"><div class="step-ref bg-step">1116</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequestForCheque = read('../../business-services/requestPayload/collection-services/createPaymentWithCheque.json')</div></div><div class="time-cell passed">11</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1117"><div class="step-ref bg-step">1117</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def eChallanPaymentcount = read('../../business-services/requestPayload/collection-services/echallancount.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1118"><div class="step-ref bg-step">1118</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1119"><div class="step-ref bg-step">1119</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = 'invalid_'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1120"><div class="step-ref bg-step">1120</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBusinessId = 'PT'+randomNumber(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1121"><div class="step-ref bg-step">1121</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentMode = randomString(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1122"><div class="step-ref bg-step">1122</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantId = randomString(5)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1123"><div class="step-ref bg-step">1123</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def negativeTotalAmount = '-'+randomNumber(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1124"><div class="step-ref bg-step">1124</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url collectionServiceWorkflowUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1125"><div class="step-ref bg-step">1125</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request workflowRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print workflowRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1126"><div class="step-ref bg-step">1126</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">896</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1127"><div class="step-ref bg-step">1127</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1128"><div class="step-ref bg-step">1128</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[6:54]bg"><div class="step-container" id="1129"><div class="step-ref bg-step">1129</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1130"><div class="step-ref passed">1130</div><div class="step-cell passed">* def key = pdfCreateConstant.parameters.valid.keyForFireNoc</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-cell comment"># calling create pdf pretest</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="1131"><div class="step-ref passed">1131</div><div class="step-cell passed">* call read('../../core-services/pretests/pdfServiceCreate.feature@createPdfForFireNocSuccessfully')</div></div><div class="time-cell passed">903</div></div><div class="step-row"><div class="step-container" id="1131.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-cell passed">com/egov/core-services/tests/../../core-services/pretests/pdfServiceCreate.feature</div></div><div class="time-cell passed">892</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-cell comment"># * call read('../../business-services/tests/collectionServicesCreate.feature@Create_PaymentWithValidBillID_01')</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-cell comment">#* def Payments = Payments</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="1132"><div class="step-ref passed">1132</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayload = read('../../core-services/requestPayload/pdf-service/pdfCreate.json')</div></div><div class="time-cell passed">6</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-cell comment"># initializing pdf create payload objects</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="1133"><div class="step-ref passed">1133</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayloadFirst = pdfCreatePayload.TL</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="1134"><div class="step-ref passed">1134</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayloadSecond = pdfCreatePayload.PT</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="1135"><div class="step-ref passed">1135</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayloadThird = pdfCreatePayload.FireNoc</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="1136"><div class="step-ref passed">1136</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayloadFourth = pdfCreatePayload.WS</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="1137"><div class="step-ref passed">1137</div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1138"><div class="step-ref passed">1138</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreateParam =</div></div><div class="time-cell passed">2</div></div><div class="preformatted" data-parent="1138">{
 key: '#(key)',
 tenantId: '#(tenantId)'
}</div><div class="step-row"><div class="step-container" id="1139"><div class="step-ref passed">1139</div><div class="step-indent"> </div><div class="step-cell passed">Given url createPdf</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1140"><div class="step-ref passed">1140</div><div class="step-indent"> </div><div class="step-cell passed">And params pdfCreateParam</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1141"><div class="step-ref passed">1141</div><div class="step-indent"> </div><div class="step-cell passed">And request pdfCreatePayloadThird</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1142"><div class="step-ref passed">1142</div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">877</div></div><div class="step-row"><div class="step-container" id="1143"><div class="step-ref passed">1143</div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1144"><div class="step-ref passed">1144</div><div class="step-indent"> </div><div class="step-cell passed">And def pdfCreateResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1145"><div class="step-ref passed">1145</div><div class="step-indent"> </div><div class="step-cell passed">And def pdfCreateResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1146"><div class="step-ref passed">1146</div><div class="step-cell passed">* match pdfCreateResponseBody.filestoreIds[0] == '#present'</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="1147"><div class="step-ref passed">1147</div><div class="step-cell passed">* assert pdfCreateResponseBody.message == pdfCreateConstant.expectedMessages.message</div></div><div class="time-cell passed">2</div></div></div><div class="scenario"><div class="scenario-heading" id="[7:62]"><div class="heading-container"><div class="scenario-tags"><a class="badge badge-primary" href="karate-tags.html">pdf_create_WS_05</a><a class="badge badge-primary" href="karate-tags.html">regression</a><a class="badge badge-primary" href="karate-tags.html">positive</a><a class="badge badge-primary" href="karate-tags.html">pdfservice</a><a class="badge badge-primary" href="karate-tags.html">coreServices</a></div><span class="scenario-keyword">Scenario: [7:62]</span><span class="scenario-name">Verify a pdf is generated successfully for water &amp; Severage module </span></div><div class="scenario-time failed">ms: 2697</div></div><div class="step-row"><div class="step-container" id="[7:62]bg"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-cell passed">Background:</div></div><div class="time-cell passed"></div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-cell comment"># reading javascript utils for using generic methods</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1148"><div class="step-ref bg-step">1148</div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">21</div></div><div class="preformatted" data-parent="1148">15:37:36.481 karate.env:  
15:37:36.483 locale: en_IN 
15:37:36.491 tenantId: pb.amritsar</div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1149"><div class="step-ref bg-step">1149</div><div class="step-cell passed">* def pdfCreateConstant = read('../../core-services/constants/pdfService.yaml')</div></div><div class="time-cell passed">6</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1150"><div class="step-ref bg-step">1150</div><div class="step-cell passed">* call read('../../business-services/tests/collectionServicesCreate.feature@Create_PaymentWithValidBillID_01')</div></div><div class="time-cell passed">2241</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1150.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/tests/collectionServicesCreate.feature</div></div><div class="time-cell passed">2222</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1151"><div class="step-ref bg-step">1151</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/tests/billingServicesDemand.feature@create_01')</div></div><div class="time-cell passed">298</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1151.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/tests/billingServicesDemand.feature</div></div><div class="time-cell passed">261</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1152"><div class="step-ref bg-step">1152</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1153"><div class="step-ref bg-step">1153</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceDemandConstants = read('../../business-services/constants/billing-service-demand.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1154"><div class="step-ref bg-step">1154</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1155"><div class="step-ref bg-step">1155</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell passed">6</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1156"><div class="step-ref bg-step">1156</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def consumerType = mdmsStateBillingService.BusinessService[0].businessService</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1157"><div class="step-ref bg-step">1157</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = mdmsStateBillingService.BusinessService[0].code</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1158"><div class="step-ref bg-step">1158</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxPeriodFrom = getCurrentEpochTime()</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1159"><div class="step-ref bg-step">1159</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def daysFromToday = 2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1160"><div class="step-ref bg-step">1160</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxPeriodTo = getEpochDate(daysFromToday)</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1161"><div class="step-ref bg-step">1161</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxHeadMasterCodes = karate.jsonPath(mdmsStateBillingService, "$.TaxHeadMaster[?(@.service=='" + businessService + "')].code")</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1162"><div class="step-ref bg-step">1162</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxHeadMasterCode = taxHeadMasterCodes[randomNumber(taxHeadMasterCodes.length)]</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1163"><div class="step-ref bg-step">1163</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxAmount = 200</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1164"><div class="step-ref bg-step">1164</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionAmount = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1165"><div class="step-ref bg-step">1165</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def minimumAmountPayable = 1</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Steps to create a new Employee through HRMS</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1166"><div class="step-ref bg-step">1166</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServiceDemandPretest.feature@createBillDemand')</div></div><div class="time-cell passed">220</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1166.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServiceDemandPretest.feature</div></div><div class="time-cell passed">211</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1167"><div class="step-ref bg-step">1167</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1168"><div class="step-ref bg-step">1168</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceDemandConstants = read('../../business-services/constants/billing-service-demand.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1169"><div class="step-ref bg-step">1169</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1170"><div class="step-ref bg-step">1170</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createDemandRequest = read('../../business-services/requestPayload/billing-service-demand/create.json')</div></div><div class="time-cell passed">17</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1171"><div class="step-ref bg-step">1171</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchDemandRequest = read('../../business-services/requestPayload/billing-service-demand/search.json')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1172"><div class="step-ref bg-step">1172</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def updateDemandRequest = read('../../business-services/requestPayload/billing-service-demand/update.json')</div></div><div class="time-cell passed">13</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1173"><div class="step-ref bg-step">1173</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1174"><div class="step-ref bg-step">1174</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url createDemandUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print createDemandRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1175"><div class="step-ref bg-step">1175</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request createDemandRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1176"><div class="step-ref bg-step">1176</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">162</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1177"><div class="step-ref bg-step">1177</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1178"><div class="step-ref bg-step">1178</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billingServiceDemandResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1179"><div class="step-ref bg-step">1179</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billingServiceDemandResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1180"><div class="step-ref bg-step">1180</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* print billingServiceDemandResponseBody</div></div><div class="time-cell passed">0</div></div><div class="preformatted" data-parent="1180">15:37:36.826 [print] {
  "ResponseInfo": {
    "ver": null,
    "resMsgId": null,
    "msgId": null,
    "apiId": null,
    "ts": null,
    "status": "201 CREATED"
  },
  "Demands": [
    {
      "taxPeriodFrom": 1628590056596,
      "businessService": "PT",
      "minimumAmountPayable": 1,
      "taxPeriodTo": 1628762856601,
      "fixedBillExpiryDate": null,
      "additionalDetails": null,
      "payer": null,
      "demandDetails": [
        {
          "demandId": "72e525a7-a10b-4910-b6bb-15109c04217a",
          "taxHeadMasterCode": "PT_UNIT_USAGE_EXEMPTION",
          "collectionAmount": 0,
          "auditDetails": {
            "lastModifiedTime": 1628590057007,
            "createdBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
            "lastModifiedBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
            "createdTime": 1628590057007
          },
          "tenantId": "pb.amritsar",
          "id": "b625b7ba-c56c-4cb0-9c73-0807210c897f",
          "taxAmount": 200,
          "additionalDetails": null
        }
      ],
      "consumerType": "PropertyTax",
      "auditDetails": {
        "lastModifiedTime": 1628590057007,
        "createdBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
        "lastModifiedBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
        "createdTime": 1628590057007
      },
      "tenantId": "pb.amritsar",
      "consumerCode": "Consumer-Code-Test-999702",
      "id": "72e525a7-a10b-4910-b6bb-15109c04217a",
      "billExpiryTime": null,
      "isPaymentCompleted": false,
      "status": "ACTIVE"
    }
  ],
  "CollectedReceipt": null
}</div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1181"><div class="step-ref bg-step">1181</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def Demands = billingServiceDemandResponseBody.Demands</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1182"><div class="step-ref bg-step">1182</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def demandId = Demands[0].id</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1183"><div class="step-ref bg-step">1183</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def consumerCode = Demands[0].consumerCode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the status Created</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1184"><div class="step-ref bg-step">1184</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* assert billingServiceDemandResponseBody.ResponseInfo.status == commonConstants.expectedStatus.created</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand id is present</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1185"><div class="step-ref bg-step">1185</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].id == "#present"</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the tenantId of demand response is equal with current tenantId</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1186"><div class="step-ref bg-step">1186</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].tenantId == tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the consumer code of demand response is equal with defined consumerCode</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1187"><div class="step-ref bg-step">1187</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].consumerCode == consumerCode</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the consumerType of demand response is equal with defined consumerType</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1188"><div class="step-ref bg-step">1188</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].consumerType == consumerType</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the businessService of demand response is equal with defined businessService</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1189"><div class="step-ref bg-step">1189</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].businessService == businessService</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxPeriodFrom of demand response is equal with defined taxPeriodFrom</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1190"><div class="step-ref bg-step">1190</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].taxPeriodFrom == taxPeriodFrom</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxPeriodTo of demand response is equal with defined taxPeriodTo</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1191"><div class="step-ref bg-step">1191</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].taxPeriodTo == taxPeriodTo</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand details id is present in demand response body</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1192"><div class="step-ref bg-step">1192</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].id == "#present"</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demandId is present in demand response body</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1193"><div class="step-ref bg-step">1193</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].demandId == "#present"</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxHeadMasterCode of demand response is equal with defined taxHeadMasterCode</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1194"><div class="step-ref bg-step">1194</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].taxHeadMasterCode == taxHeadMasterCode</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxAmount of demand response is equal with defined taxAmount</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1195"><div class="step-ref bg-step">1195</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].taxAmount == taxAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the collectionAmount of demand response is equal with defined collectionAmount</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1196"><div class="step-ref bg-step">1196</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].collectionAmount == collectionAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the minimumAmountPayable of demand response is equal with defined minimumAmountPayable</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1197"><div class="step-ref bg-step">1197</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].minimumAmountPayable == minimumAmountPayable</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand status is equal with expected demand status `ACTIVE`</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1198"><div class="step-ref bg-step">1198</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].status == billingServiceDemandConstants.parameters.status</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1199"><div class="step-ref bg-step">1199</div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1200"><div class="step-ref bg-step">1200</div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1201"><div class="step-ref bg-step">1201</div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1202"><div class="step-ref bg-step">1202</div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1203"><div class="step-ref bg-step">1203</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServicePretest.feature@fetchBill')</div></div><div class="time-cell passed">192</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1203.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServicePretest.feature</div></div><div class="time-cell passed">177</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1204"><div class="step-ref bg-step">1204</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceConstants = read('../../business-services/constants/billing-service.yaml')</div></div><div class="time-cell passed">8</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1205"><div class="step-ref bg-step">1205</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionServiceConstants = read('../../business-services/constants/apportionService.yaml')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1206"><div class="step-ref bg-step">1206</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = billingServiceConstants.parameters.businessService</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1207"><div class="step-ref bg-step">1207</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionbusinessService = apportionServiceConstants.parameters.businessService</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1208"><div class="step-ref bg-step">1208</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason1 = apportionServiceConstants.parameters.reason1</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1209"><div class="step-ref bg-step">1209</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason2 = apportionServiceConstants.parameters.reason2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1210"><div class="step-ref bg-step">1210</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason3 = apportionServiceConstants.parameters.reason3</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1211"><div class="step-ref bg-step">1211</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason4 = apportionServiceConstants.parameters.reason4</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment">#* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1212"><div class="step-ref bg-step">1212</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillRequest = read('../../business-services/requestPayload/collection-services/fetchBill.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1213"><div class="step-ref bg-step">1213</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillRequest = read('../../business-services/requestPayload/collection-services/cancelBill.json')</div></div><div class="time-cell passed">6</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1214"><div class="step-ref bg-step">1214</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1215"><div class="step-ref bg-step">1215</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillParams =</div></div><div class="time-cell passed">0</div></div><div class="preformatted" data-parent="1215">{
   consumerCode: '#(consumerCode)',
   businessService: '#(businessService)',
   tenantId: '#(tenantId)'
}</div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1216"><div class="step-ref bg-step">1216</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url fetchBill</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1217"><div class="step-ref bg-step">1217</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And params fetchBillParams</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillParams</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1218"><div class="step-ref bg-step">1218</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request fetchBillRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1219"><div class="step-ref bg-step">1219</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">141</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillResponse</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1220"><div class="step-ref bg-step">1220</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1221"><div class="step-ref bg-step">1221</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def fetchBillResponse = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1222"><div class="step-ref bg-step">1222</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmount = response.Bill[0].totalAmount</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1223"><div class="step-ref bg-step">1223</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billId = response.Bill[0].id</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1224"><div class="step-ref bg-step">1224</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def txnAmount = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1225"><div class="step-ref bg-step">1225</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmountPaid = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1226"><div class="step-ref bg-step">1226</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalDue = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1227"><div class="step-ref bg-step">1227</div><div class="step-indent"> </div><div class="step-cell passed">* def paidBillIdError = collectionServicesConstants.errorMessages.paidBillId</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1228"><div class="step-ref bg-step">1228</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillIdError = collectionServicesConstants.errorMessages.invalidBillId</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1229"><div class="step-ref bg-step">1229</div><div class="step-indent"> </div><div class="step-cell passed">* def totalAmountPaidError = collectionServicesConstants.errorMessages.totalAmountPaidNull</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1230"><div class="step-ref bg-step">1230</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentModeError = collectionServicesConstants.errorMessages.invalidPaymentMode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1231"><div class="step-ref bg-step">1231</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantIdError = commonConstants.errorMessages.invalidTenantIdError</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1232"><div class="step-ref bg-step">1232</div><div class="step-indent"> </div><div class="step-cell passed">* def nullTenantIdError = commonConstants.errorMessages.nullParameterError</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1233"><div class="step-ref bg-step">1233</div><div class="step-indent"> </div><div class="step-cell passed">* def reason = collectionServicesConstants.parameters.reason</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1234"><div class="step-ref bg-step">1234</div><div class="step-indent"> </div><div class="step-cell passed">* def action = collectionServicesConstants.parameters.action</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1235"><div class="step-ref bg-step">1235</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDateError = collectionServicesConstants.errorMessages.instrumentDateAsNull</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1236"><div class="step-ref bg-step">1236</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentPastDateError = collectionServicesConstants.errorMessages.instrumentDatePastNinetyDays</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1237"><div class="step-ref bg-step">1237</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentFutureDateError = collectionServicesConstants.errorMessages.futureInstrumentDate</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1238"><div class="step-ref bg-step">1238</div><div class="step-indent"> </div><div class="step-cell passed">* def moreThanDueAmountError = collectionServicesConstants.errorMessages.moreThanDueAmount</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1239"><div class="step-ref bg-step">1239</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberError = collectionServicesConstants.errorMessages.instrumentNumberAsEmptyString</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1240"><div class="step-ref bg-step">1240</div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberError = collectionServicesConstants.errorMessages.transactionNumberAsEmptyString</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1241"><div class="step-ref bg-step">1241</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/collectionServicesPretest.feature@createPayment')</div></div><div class="time-cell passed">474</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1241.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/collectionServicesPretest.feature</div></div><div class="time-cell passed">450</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1242"><div class="step-ref bg-step">1242</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1243"><div class="step-ref bg-step">1243</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1244"><div class="step-ref bg-step">1244</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1245"><div class="step-ref bg-step">1245</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def tenantId = tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1246"><div class="step-ref bg-step">1246</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentMode = collectionServicesConstants.parameters.paymentMode</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1247"><div class="step-ref bg-step">1247</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBy = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1248"><div class="step-ref bg-step">1248</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">7</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1249"><div class="step-ref bg-step">1249</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def payerName = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1250"><div class="step-ref bg-step">1250</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalDue = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1251"><div class="step-ref bg-step">1251</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumber = collectionServicesConstants.parameters.transactionNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1252"><div class="step-ref bg-step">1252</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumber = collectionServicesConstants.parameters.instrumentNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1253"><div class="step-ref bg-step">1253</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCard = collectionServicesConstants.parameters.paymentMode2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1254"><div class="step-ref bg-step">1254</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCheque = collectionServicesConstants.parameters.paymentModeForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1255"><div class="step-ref bg-step">1255</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberForCheque = collectionServicesConstants.parameters.transactionNumberForCheque</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1256"><div class="step-ref bg-step">1256</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberForCheque = collectionServicesConstants.parameters.instrumentNumberForCheque</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1257"><div class="step-ref bg-step">1257</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">6</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1258"><div class="step-ref bg-step">1258</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def ifscCode = collectionServicesConstants.parameters.ifscCode</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1259"><div class="step-ref bg-step">1259</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1260"><div class="step-ref bg-step">1260</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1261"><div class="step-ref bg-step">1261</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequest = read('../../business-services/requestPayload/collection-services/create.json')</div></div><div class="time-cell passed">23</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1262"><div class="step-ref bg-step">1262</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def workflowRequest = read('../../business-services/requestPayload/collection-services/workflow.json')</div></div><div class="time-cell passed">7</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1263"><div class="step-ref bg-step">1263</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPaymentRequest = read('../../business-services/requestPayload/collection-services/search.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1264"><div class="step-ref bg-step">1264</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTreceiptcount = read('../../business-services/requestPayload/collection-services/receiptcount.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1265"><div class="step-ref bg-step">1265</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequestForCheque = read('../../business-services/requestPayload/collection-services/createPaymentWithCheque.json')</div></div><div class="time-cell passed">15</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1266"><div class="step-ref bg-step">1266</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def eChallanPaymentcount = read('../../business-services/requestPayload/collection-services/echallancount.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1267"><div class="step-ref bg-step">1267</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1268"><div class="step-ref bg-step">1268</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = 'invalid_'+randomNumber(4)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1269"><div class="step-ref bg-step">1269</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBusinessId = 'PT'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1270"><div class="step-ref bg-step">1270</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentMode = randomString(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1271"><div class="step-ref bg-step">1271</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantId = randomString(5)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1272"><div class="step-ref bg-step">1272</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def negativeTotalAmount = '-'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1273"><div class="step-ref bg-step">1273</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url payment</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1274"><div class="step-ref bg-step">1274</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request createPaymentRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print createPaymentRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1275"><div class="step-ref bg-step">1275</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">341</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1276"><div class="step-ref bg-step">1276</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1277"><div class="step-ref bg-step">1277</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1278"><div class="step-ref bg-step">1278</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1279"><div class="step-ref bg-step">1279</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def Payments = collectionServicesResponseBody.Payments</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1280"><div class="step-ref bg-step">1280</div><div class="step-indent"> </div><div class="step-cell passed">* match response.ResponseInfo.status == '200 OK'</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1281"><div class="step-ref bg-step">1281</div><div class="step-indent"> </div><div class="step-cell passed">* def paymentId = collectionServicesResponseBody.Payments[0].id</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1282"><div class="step-ref bg-step">1282</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/collectionServicesPretest.feature@processworkflow')</div></div><div class="time-cell passed">1232</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1282.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/collectionServicesPretest.feature</div></div><div class="time-cell passed">1202</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1283"><div class="step-ref bg-step">1283</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">11</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1284"><div class="step-ref bg-step">1284</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1285"><div class="step-ref bg-step">1285</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1286"><div class="step-ref bg-step">1286</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def tenantId = tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1287"><div class="step-ref bg-step">1287</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentMode = collectionServicesConstants.parameters.paymentMode</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1288"><div class="step-ref bg-step">1288</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBy = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">7</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1289"><div class="step-ref bg-step">1289</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1290"><div class="step-ref bg-step">1290</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def payerName = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1291"><div class="step-ref bg-step">1291</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalDue = 0</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1292"><div class="step-ref bg-step">1292</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumber = collectionServicesConstants.parameters.transactionNumber</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1293"><div class="step-ref bg-step">1293</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumber = collectionServicesConstants.parameters.instrumentNumber</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1294"><div class="step-ref bg-step">1294</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCard = collectionServicesConstants.parameters.paymentMode2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1295"><div class="step-ref bg-step">1295</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCheque = collectionServicesConstants.parameters.paymentModeForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1296"><div class="step-ref bg-step">1296</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberForCheque = collectionServicesConstants.parameters.transactionNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1297"><div class="step-ref bg-step">1297</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberForCheque = collectionServicesConstants.parameters.instrumentNumberForCheque</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1298"><div class="step-ref bg-step">1298</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">6</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1299"><div class="step-ref bg-step">1299</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def ifscCode = collectionServicesConstants.parameters.ifscCode</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1300"><div class="step-ref bg-step">1300</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">18</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1301"><div class="step-ref bg-step">1301</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1302"><div class="step-ref bg-step">1302</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequest = read('../../business-services/requestPayload/collection-services/create.json')</div></div><div class="time-cell passed">13</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1303"><div class="step-ref bg-step">1303</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def workflowRequest = read('../../business-services/requestPayload/collection-services/workflow.json')</div></div><div class="time-cell passed">8</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1304"><div class="step-ref bg-step">1304</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPaymentRequest = read('../../business-services/requestPayload/collection-services/search.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1305"><div class="step-ref bg-step">1305</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTreceiptcount = read('../../business-services/requestPayload/collection-services/receiptcount.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1306"><div class="step-ref bg-step">1306</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequestForCheque = read('../../business-services/requestPayload/collection-services/createPaymentWithCheque.json')</div></div><div class="time-cell passed">19</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1307"><div class="step-ref bg-step">1307</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def eChallanPaymentcount = read('../../business-services/requestPayload/collection-services/echallancount.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1308"><div class="step-ref bg-step">1308</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">25</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1309"><div class="step-ref bg-step">1309</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = 'invalid_'+randomNumber(4)</div></div><div class="time-cell passed">11</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1310"><div class="step-ref bg-step">1310</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBusinessId = 'PT'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1311"><div class="step-ref bg-step">1311</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentMode = randomString(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1312"><div class="step-ref bg-step">1312</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantId = randomString(5)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1313"><div class="step-ref bg-step">1313</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def negativeTotalAmount = '-'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1314"><div class="step-ref bg-step">1314</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url collectionServiceWorkflowUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1315"><div class="step-ref bg-step">1315</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request workflowRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print workflowRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1316"><div class="step-ref bg-step">1316</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">1043</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1317"><div class="step-ref bg-step">1317</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1318"><div class="step-ref bg-step">1318</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[7:62]bg"><div class="step-container" id="1319"><div class="step-ref bg-step">1319</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1320"><div class="step-ref passed">1320</div><div class="step-cell passed">* def key = pdfCreateConstant.parameters.valid.keyForWs</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container"><div class="step-ref failed"></div><div class="step-cell comment"># calling create pdf pretest</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="1321"><div class="step-ref failed">1321</div><div class="step-cell failed">* call read('../../core-services/pretests/pdfServiceCreate.feature@createPdfForWSSuccessfully')</div></div><div class="time-cell failed">427</div></div><div class="preformatted" data-parent="1321">15:37:39.192 feature call failed: classpath:com/egov/core-services/tests/../../core-services/pretests/pdfServiceCreate.feature
arg: null
pdfServiceCreate.feature:87 - status code was: 400, expected: 201, response time: 125, url: https://qa.digit.org/pdf-service/v1/_create?key=ws-bill&amp;tenantId=pb.amritsar, response: {"ResponseInfo":{"userInfo":{"mobileNumber":"7899179393","roles":[{"code":"NOC_CEMP","name":"NoC counter employee","tenantId":"pb.amritsar","id":null},{"code":"EGF_REPORT_VIEW","name":"Finance Report View","tenantId":"pb.amritsar","id":null},{"code":"QA_AUTOMATION","name":"QA Automation","tenantId":"pb.amritsar","id":null},{"code":"AssetReportViewer","name":"AssetReportViewer","tenantId":"pb.amritsar","id":null},{"code":"BPA_FIELD_INSPECTOR","name":"BPA Field Inspector","tenantId":"pb.amritsar","id":null},{"code":"TL_FIELD_INSPECTOR","name":"TL Field Inspector","tenantId":"pb.amritsar","id":null},{"code":"Asset Administrator","name":null,"tenantId":"pb.amritsar","id":null},{"code":"EGF_BILL_CREATOR","name":"EGF Bill Creator","tenantId":"pb.amritsar","id":null},{"code":"BPA_APPROVER","name":"BPA Services Approver","tenantId":"pb.amritsar","id":null},{"code":"WO_CREATOR","name":"WO Creator","tenantId":"pb.amritsar","id":null},{"code":"CEMP","name":"Counter Employee","tenantId":"pb.amritsar","id":null},{"code":"WS_CEMP","name":"WS Counter Employee","tenantId":"pb.amritsar","id":null},{"code":"BANK_COLL_OPERATOR","name":"Bank Collection Operator","tenantId":"pb.amritsar","id":null},{"code":"ANONYMUS","name":"Any User","tenantId":"pb.amritsar","id":null},{"code":"WS_FIELD_INSPECTOR","name":"WS Field Inspector","tenantId":"pb.amritsar","id":null},{"code":"FSM_ADMIN","name":"FSM Administrator","tenantId":"pb.amritsar","id":null},{"code":"BPAREG_EMPLOYEE","name":"BPAREG Employee","tenantId":"pb.amritsar","id":null},{"code":"COMMISSIONER","name":"Commissioner","tenantId":"pb.amritsar","id":null},{"code":"AIRPORT_AUTHORITY_APPROVER","name":"Airport authority Approver","tenantId":"pb.amritsar","id":null},{"code":"EGF_PAYMENT_CREATOR","name":"Finance Payment Creator","tenantId":"pb.amritsar","id":null},{"code":"TL_CREATOR","name":"TL Creator","tenantId":"pb.amritsar","id":null},{"code":"EGF_BILL_APPROVER","name":"EGF Bill Approver","tenantId":"pb.amritsar","id":null},{"code":"BPAREG_DOC_VERIFIER","name":"BPAREG doc verifier","tenantId":"pb.amritsar","id":null},{"code":"BPA_STRUCTURALENGINEER","name":"BPA Structural Engineer","tenantId":"pb.amritsar","id":null},{"code":"testonecode112234324","name":null,"tenantId":"pb.amritsar","id":null},{"code":"NOC_FIELD_INSPECTOR","name":"NoC Field Inpector","tenantId":"pb.amritsar","id":null},{"code":"GO","name":"Grievance Officer","tenantId":"pb.amritsar","id":null},{"code":"SW_CEMP","name":"SW Counter Employee","tenantId":"pb.amritsar","id":null},{"code":"FSM_CREATOR_EMP","name":"FSM Employee Application Creator","tenantId":"pb.amritsar","id":null},{"code":"SW_CLERK","name":"SW Clerk","tenantId":"pb.amritsar","id":null},{"code":"CFC","name":"Citizen Feedback Centre","tenantId":"pb.amritsar","id":null},{"code":"Property Approver","name":null,"tenantId":"pb.amritsar","id":null},{"code":"WORKS_FINANCIAL_APPROVER","name":"Financials Approver","tenantId":"pb.amritsar","id":null},{"code":"ANONYMOUS","name":"Anonymous User","tenantId":"pb.amritsar","id":null},{"code":"FSM_REPORT_VIEWER","name":"FSM Employee Report Viewer","tenantId":"pb.amritsar","id":null},{"code":"EMPLOYEE ADMIN","name":null,"tenantId":"pb.amritsar","id":null},{"code":"SW_DOC_VERIFIER","name":"SW Document Verifier","tenantId":"pb.amritsar","id":null},{"code":"DE_CREATOR","name":"Detailed Estimate Creator","tenantId":"pb.amritsar","id":null},{"code":"TL_APPROVER","name":"TL Approver","tenantId":"pb.amritsar","id":null},{"code":"PGR-ADMIN","name":"PGR Administrator","tenantId":"pb.amritsar","id":null},{"code":"CONTRACTOR_ADVANCE_CREATOR","name":"Contractor Advance creator","tenantId":"pb.amritsar","id":null},{"code":"BPA_TOWNPLANNER","name":"BPA Town Planner","tenantId":"pb.amritsar","id":null},{"code":"EGF_MASTER_ADMIN","name":"Finance Master Admin","tenantId":"pb.amritsar","id":null},{"code":"EGF_PAYMENT_APPROVER","name":"Finance Payment Approver","tenantId":"pb.amritsar","id":null},{"code":"DGRO","name":"Department Grievance Routing Officer","tenantId":"pb.amritsar","id":null},{"code":"FSM_VIEW_EMP","name":"FSM Employee Application Viewer","tenantId":"pb.amritsar","id":null},{"code":"CSC_COLL_OPERATOR","name":"CSC Collection Operator","tenantId":"pb.amritsar","id":null},{"code":"PTIS_MASTER","name":"PTIS Master","tenantId":"pb.amritsar","id":null},{"code":"FSM_DSO","name":"FSM Desluding Operator","tenantId":"pb.amritsar","id":null},{"code":"SW_FIELD_INSPECTOR","name":"SW Field Inspector","tenantId":"pb.amritsar","id":null},{"code":"CSR","name":"Customer Support Representative","tenantId":"pb.amritsar","id":null},{"code":"HRMS_ADMIN","name":"HRMS Admin","tenantId":"pb.amritsar","id":null},{"code":"EGF_VOUCHER_APPROVER","name":"Finance Voucher Approver","tenantId":"pb.amritsar","id":null},{"code":"WS_APPROVER","name":"WS Approver","tenantId":"pb.amritsar","id":null},{"code":"BPA_NOC_VERIFIER","name":"BPA NOC Verifier","tenantId":"pb.amritsar","id":null},{"code":"SYSTEM","name":"System user","tenantId":"pb.amritsar","id":null},{"code":"GA","name":"Grivance Administrator","tenantId":"pb.amritsar","id":null},{"code":"SYS_INTEGRATOR_FINANCE","name":"System Integrator Finance","tenantId":"pb.amritsar","id":null},{"code":"LOA_CREATOR","name":"LOA Creator","tenantId":"pb.amritsar","id":null},{"code":"GRO","name":"Grievance Routing Officer","tenantId":"pb.amritsar","id":null},{"code":"ULB Operator","name":null,"tenantId":"pb.amritsar","id":null},{"code":"BPA_BUILDER","name":"BPA Builder","tenantId":"pb.amritsar","id":null},{"code":"EMPLOYEE_FINANCE","name":"Employee Finance","tenantId":"pb.amritsar","id":null},{"code":"PGR_LME","name":"PGR Last Mile Employee","tenantId":"pb.amritsar","id":null},{"code":"COLL_REMIT_TO_BANK","name":"Collections Remitter","tenantId":"pb.amritsar","id":null},{"code":"PT_CEMP","name":"PT Counter Employee","tenantId":"pb.amritsar","id":null},{"code":"FIRE_NOC_APPROVER","name":"Fire Noc Department Approver","tenantId":"pb.amritsar","id":null},{"code":"WORKS_APPROVER","name":"Works Approver","tenantId":"pb.amritsar","id":null},{"code":"AE_CREATOR","name":"Abstract Estimate Creator","tenantId":"pb.amritsar","id":null},{"code":"CITY_ADMIN","name":"Admin of a ULB","tenantId":"pb.amritsar","id":null},{"code":"PT_FIELD_INSPECTOR","name":"PT Field Inspector","tenantId":"pb.amritsar","id":null},{"code":"FSM_DRIVER","name":"FSM Driver","tenantId":"pb.amritsar","id":null},{"code":"PTADMIN","name":"ULB Administrator","tenantId":"pb.amritsar","id":null},{"code":"WORKS_ADMINISTRATOR","name":"Works Administrator","tenantId":"pb.amritsar","id":null},{"code":"PT_DOC_VERIFIER","name":"PT Doc Verifier","tenantId":"pb.amritsar","id":null},{"code":"EMPLOYEE","name":"Employee","tenantId":"pb.amritsar","id":null},{"code":"COLL_RECEIPT_CREATOR","name":"Collections Receipt Creator","tenantId":"pb.amritsar","id":null},{"code":"TL_CEMP","name":"TL Counter Employee","tenantId":"pb.amritsar","id":null},{"code":"RO","name":"Redressal Officer","tenantId":"pb.amritsar","id":null},{"code":"COLL_REP_VIEW","name":"Collection Report Viewer","tenantId":"pb.amritsar","id":null},{"code":"UC_EMP","name":"Universal Collection Employee","tenantId":"pb.amritsar","id":null},{"code":"FSM_EMP_FSTPO","name":"FSM FSTP Opperator","tenantId":"pb.amritsar","id":null},{"code":"BPA_ENGINEER","name":"BPA Engineer","tenantId":"pb.amritsar","id":null},{"code":"BPA_VERIFIER","name":"BPA Services verifier","tenantId":"pb.amritsar","id":null},{"code":"PT_APPROVER","name":"PT Counter Approver","tenantId":"pb.amritsar","id":null},{"code":"STADMIN","name":"State Administrator","tenantId":"pb.amritsar","id":null},{"code":"WS_CLERK","name":"WS Clerk","tenantId":"pb.amritsar","id":null},{"code":"NOC_DOC_VERIFIER","name":"NoC Doc Verifier","tenantId":"pb.amritsar","id":null},{"code":"EGF_VOUCHER_CREATOR","name":"Finance Voucher Creator","tenantId":"pb.amritsar","id":null},{"code":"LEGACY_RECEIPT_CREATOR","name":"Legacy Receipt Creator","tenantId":"pb.amritsar","id":null},{"code":"WS_DOC_VERIFIER","name":"WS Document Verifier","tenantId":"pb.amritsar","id":null},{"code":"AssetCreator","name":"AssetCreator","tenantId":"pb.amritsar","id":null},{"code":"MB_CREATOR","name":"MB creator","tenantId":"pb.amritsar","id":null},{"code":"BPA_ARCHITECT","name":"BPA Architect","tenantId":"pb.amritsar","id":null},{"code":"testtwocode11234354","name":null,"tenantId":"pb.amritsar","id":null},{"code":"FEMP","name":"Field Employee","tenantId":"pb.amritsar","id":null},{"code":"PTIS_ADMIN","name":"PTIS Admin","tenantId":"pb.amritsar","id":null},{"code":"BPA_SUPERVISOR","name":"BPA Supervisor","tenantId":"pb.amritsar","id":null},{"code":"FSM_COLLECTOR","name":"FSM Payment Collector","tenantId":"pb.amritsar","id":null},{"code":"BPAREG_APPROVER","name":"BPAREG Approver","tenantId":"pb.amritsar","id":null},{"code":"EGF_ADMINISTRATOR","name":"Finance Adminsitrator","tenantId":"pb.amritsar","id":null},{"code":"FSM_EDITOR_EMP","name":"FSM Employee Application Editor","tenantId":"pb.amritsar","id":null},{"code":"COLL_OPERATOR","name":"Collection Operator","tenantId":"pb.amritsar","id":null},{"code":"TL_DOC_VERIFIER","name":"TL doc verifier","tenantId":"pb.amritsar","id":null},{"code":"TL_ADMIN","name":"TL Admin","tenantId":"pb.amritsar","id":null},{"code":"Property Verifier","name":null,"tenantId":"pb.amritsar","id":null},{"code":"NOC_APPROVER","name":"NoC counter Approver","tenantId":"pb.amritsar","id":null},{"code":"WORKS_BILL_CREATOR","name":"Works Bill Creator","tenantId":"pb.amritsar","id":null},{"code":"STORE INCHARGE","name":null,"tenantId":"pb.amritsar","id":null},{"code":"WORKS_MASTER_CREATOR","name":"Works Master creator","tenantId":"pb.amritsar","id":null},{"code":"SUPERUSER","name":"Super User","tenantId":"pb.amritsar","id":null},{"code":"directortestcode112234324","name":null,"tenantId":"pb.amritsar","id":null},{"code":"SYS_INTEGRATOR_WATER_SEW","name":"System Integrator W&amp;S","tenantId":"pb.amritsar","id":null},{"code":"FSM_DASHBOARD_VIEWER","name":"FSM Employee Dashboard Viewer","tenantId":"pb.amritsar","id":null},{"code":"SW_APPROVER","name":"SW Approver","tenantId":"pb.amritsar","id":null}],"name":"tvcrjhhwdc","tenantId":"pb.amritsar","emailId":"fcaae@auto.com","id":12138,"userName":"EMPAUTO","type":"EMPLOYEE","uuid":"959745fe-66bc-45b2-9a35-609ec994abd4"},"responseType":"arraybuffer","correlationId":"8a52f9e9-1ee2-42d0-8968-79ff6080c66a"},"message":"some unknown error while creating: could not find property of type array in request body with name $.Bill.*"}
pdfService.feature:65 - 
pdfServiceCreate.feature:87 - status code was: 400, expected: 201, response time: 125, url: https://qa.digit.org/pdf-service/v1/_create?key=ws-bill&amp;tenantId=pb.amritsar, response: {"ResponseInfo":{"userInfo":{"mobileNumber":"7899179393","roles":[{"code":"NOC_CEMP","name":"NoC counter employee","tenantId":"pb.amritsar","id":null},{"code":"EGF_REPORT_VIEW","name":"Finance Report View","tenantId":"pb.amritsar","id":null},{"code":"QA_AUTOMATION","name":"QA Automation","tenantId":"pb.amritsar","id":null},{"code":"AssetReportViewer","name":"AssetReportViewer","tenantId":"pb.amritsar","id":null},{"code":"BPA_FIELD_INSPECTOR","name":"BPA Field Inspector","tenantId":"pb.amritsar","id":null},{"code":"TL_FIELD_INSPECTOR","name":"TL Field Inspector","tenantId":"pb.amritsar","id":null},{"code":"Asset Administrator","name":null,"tenantId":"pb.amritsar","id":null},{"code":"EGF_BILL_CREATOR","name":"EGF Bill Creator","tenantId":"pb.amritsar","id":null},{"code":"BPA_APPROVER","name":"BPA Services Approver","tenantId":"pb.amritsar","id":null},{"code":"WO_CREATOR","name":"WO Creator","tenantId":"pb.amritsar","id":null},{"code":"CEMP","name":"Counter Employee","tenantId":"pb.amritsar","id":null},{"code":"WS_CEMP","name":"WS Counter Employee","tenantId":"pb.amritsar","id":null},{"code":"BANK_COLL_OPERATOR","name":"Bank Collection Operator","tenantId":"pb.amritsar","id":null},{"code":"ANONYMUS","name":"Any User","tenantId":"pb.amritsar","id":null},{"code":"WS_FIELD_INSPECTOR","name":"WS Field Inspector","tenantId":"pb.amritsar","id":null},{"code":"FSM_ADMIN","name":"FSM Administrator","tenantId":"pb.amritsar","id":null},{"code":"BPAREG_EMPLOYEE","name":"BPAREG Employee","tenantId":"pb.amritsar","id":null},{"code":"COMMISSIONER","name":"Commissioner","tenantId":"pb.amritsar","id":null},{"code":"AIRPORT_AUTHORITY_APPROVER","name":"Airport authority Approver","tenantId":"pb.amritsar","id":null},{"code":"EGF_PAYMENT_CREATOR","name":"Finance Payment Creator","tenantId":"pb.amritsar","id":null},{"code":"TL_CREATOR","name":"TL Creator","tenantId":"pb.amritsar","id":null},{"code":"EGF_BILL_APPROVER","name":"EGF Bill Approver","tenantId":"pb.amritsar","id":null},{"code":"BPAREG_DOC_VERIFIER","name":"BPAREG doc verifier","tenantId":"pb.amritsar","id":null},{"code":"BPA_STRUCTURALENGINEER","name":"BPA Structural Engineer","tenantId":"pb.amritsar","id":null},{"code":"testonecode112234324","name":null,"tenantId":"pb.amritsar","id":null},{"code":"NOC_FIELD_INSPECTOR","name":"NoC Field Inpector","tenantId":"pb.amritsar","id":null},{"code":"GO","name":"Grievance Officer","tenantId":"pb.amritsar","id":null},{"code":"SW_CEMP","name":"SW Counter Employee","tenantId":"pb.amritsar","id":null},{"code":"FSM_CREATOR_EMP","name":"FSM Employee Application Creator","tenantId":"pb.amritsar","id":null},{"code":"SW_CLERK","name":"SW Clerk","tenantId":"pb.amritsar","id":null},{"code":"CFC","name":"Citizen Feedback Centre","tenantId":"pb.amritsar","id":null},{"code":"Property Approver","name":null,"tenantId":"pb.amritsar","id":null},{"code":"WORKS_FINANCIAL_APPROVER","name":"Financials Approver","tenantId":"pb.amritsar","id":null},{"code":"ANONYMOUS","name":"Anonymous User","tenantId":"pb.amritsar","id":null},{"code":"FSM_REPORT_VIEWER","name":"FSM Employee Report Viewer","tenantId":"pb.amritsar","id":null},{"code":"EMPLOYEE ADMIN","name":null,"tenantId":"pb.amritsar","id":null},{"code":"SW_DOC_VERIFIER","name":"SW Document Verifier","tenantId":"pb.amritsar","id":null},{"code":"DE_CREATOR","name":"Detailed Estimate Creator","tenantId":"pb.amritsar","id":null},{"code":"TL_APPROVER","name":"TL Approver","tenantId":"pb.amritsar","id":null},{"code":"PGR-ADMIN","name":"PGR Administrator","tenantId":"pb.amritsar","id":null},{"code":"CONTRACTOR_ADVANCE_CREATOR","name":"Contractor Advance creator","tenantId":"pb.amritsar","id":null},{"code":"BPA_TOWNPLANNER","name":"BPA Town Planner","tenantId":"pb.amritsar","id":null},{"code":"EGF_MASTER_ADMIN","name":"Finance Master Admin","tenantId":"pb.amritsar","id":null},{"code":"EGF_PAYMENT_APPROVER","name":"Finance Payment Approver","tenantId":"pb.amritsar","id":null},{"code":"DGRO","name":"Department Grievance Routing Officer","tenantId":"pb.amritsar","id":null},{"code":"FSM_VIEW_EMP","name":"FSM Employee Application Viewer","tenantId":"pb.amritsar","id":null},{"code":"CSC_COLL_OPERATOR","name":"CSC Collection Operator","tenantId":"pb.amritsar","id":null},{"code":"PTIS_MASTER","name":"PTIS Master","tenantId":"pb.amritsar","id":null},{"code":"FSM_DSO","name":"FSM Desluding Operator","tenantId":"pb.amritsar","id":null},{"code":"SW_FIELD_INSPECTOR","name":"SW Field Inspector","tenantId":"pb.amritsar","id":null},{"code":"CSR","name":"Customer Support Representative","tenantId":"pb.amritsar","id":null},{"code":"HRMS_ADMIN","name":"HRMS Admin","tenantId":"pb.amritsar","id":null},{"code":"EGF_VOUCHER_APPROVER","name":"Finance Voucher Approver","tenantId":"pb.amritsar","id":null},{"code":"WS_APPROVER","name":"WS Approver","tenantId":"pb.amritsar","id":null},{"code":"BPA_NOC_VERIFIER","name":"BPA NOC Verifier","tenantId":"pb.amritsar","id":null},{"code":"SYSTEM","name":"System user","tenantId":"pb.amritsar","id":null},{"code":"GA","name":"Grivance Administrator","tenantId":"pb.amritsar","id":null},{"code":"SYS_INTEGRATOR_FINANCE","name":"System Integrator Finance","tenantId":"pb.amritsar","id":null},{"code":"LOA_CREATOR","name":"LOA Creator","tenantId":"pb.amritsar","id":null},{"code":"GRO","name":"Grievance Routing Officer","tenantId":"pb.amritsar","id":null},{"code":"ULB Operator","name":null,"tenantId":"pb.amritsar","id":null},{"code":"BPA_BUILDER","name":"BPA Builder","tenantId":"pb.amritsar","id":null},{"code":"EMPLOYEE_FINANCE","name":"Employee Finance","tenantId":"pb.amritsar","id":null},{"code":"PGR_LME","name":"PGR Last Mile Employee","tenantId":"pb.amritsar","id":null},{"code":"COLL_REMIT_TO_BANK","name":"Collections Remitter","tenantId":"pb.amritsar","id":null},{"code":"PT_CEMP","name":"PT Counter Employee","tenantId":"pb.amritsar","id":null},{"code":"FIRE_NOC_APPROVER","name":"Fire Noc Department Approver","tenantId":"pb.amritsar","id":null},{"code":"WORKS_APPROVER","name":"Works Approver","tenantId":"pb.amritsar","id":null},{"code":"AE_CREATOR","name":"Abstract Estimate Creator","tenantId":"pb.amritsar","id":null},{"code":"CITY_ADMIN","name":"Admin of a ULB","tenantId":"pb.amritsar","id":null},{"code":"PT_FIELD_INSPECTOR","name":"PT Field Inspector","tenantId":"pb.amritsar","id":null},{"code":"FSM_DRIVER","name":"FSM Driver","tenantId":"pb.amritsar","id":null},{"code":"PTADMIN","name":"ULB Administrator","tenantId":"pb.amritsar","id":null},{"code":"WORKS_ADMINISTRATOR","name":"Works Administrator","tenantId":"pb.amritsar","id":null},{"code":"PT_DOC_VERIFIER","name":"PT Doc Verifier","tenantId":"pb.amritsar","id":null},{"code":"EMPLOYEE","name":"Employee","tenantId":"pb.amritsar","id":null},{"code":"COLL_RECEIPT_CREATOR","name":"Collections Receipt Creator","tenantId":"pb.amritsar","id":null},{"code":"TL_CEMP","name":"TL Counter Employee","tenantId":"pb.amritsar","id":null},{"code":"RO","name":"Redressal Officer","tenantId":"pb.amritsar","id":null},{"code":"COLL_REP_VIEW","name":"Collection Report Viewer","tenantId":"pb.amritsar","id":null},{"code":"UC_EMP","name":"Universal Collection Employee","tenantId":"pb.amritsar","id":null},{"code":"FSM_EMP_FSTPO","name":"FSM FSTP Opperator","tenantId":"pb.amritsar","id":null},{"code":"BPA_ENGINEER","name":"BPA Engineer","tenantId":"pb.amritsar","id":null},{"code":"BPA_VERIFIER","name":"BPA Services verifier","tenantId":"pb.amritsar","id":null},{"code":"PT_APPROVER","name":"PT Counter Approver","tenantId":"pb.amritsar","id":null},{"code":"STADMIN","name":"State Administrator","tenantId":"pb.amritsar","id":null},{"code":"WS_CLERK","name":"WS Clerk","tenantId":"pb.amritsar","id":null},{"code":"NOC_DOC_VERIFIER","name":"NoC Doc Verifier","tenantId":"pb.amritsar","id":null},{"code":"EGF_VOUCHER_CREATOR","name":"Finance Voucher Creator","tenantId":"pb.amritsar","id":null},{"code":"LEGACY_RECEIPT_CREATOR","name":"Legacy Receipt Creator","tenantId":"pb.amritsar","id":null},{"code":"WS_DOC_VERIFIER","name":"WS Document Verifier","tenantId":"pb.amritsar","id":null},{"code":"AssetCreator","name":"AssetCreator","tenantId":"pb.amritsar","id":null},{"code":"MB_CREATOR","name":"MB creator","tenantId":"pb.amritsar","id":null},{"code":"BPA_ARCHITECT","name":"BPA Architect","tenantId":"pb.amritsar","id":null},{"code":"testtwocode11234354","name":null,"tenantId":"pb.amritsar","id":null},{"code":"FEMP","name":"Field Employee","tenantId":"pb.amritsar","id":null},{"code":"PTIS_ADMIN","name":"PTIS Admin","tenantId":"pb.amritsar","id":null},{"code":"BPA_SUPERVISOR","name":"BPA Supervisor","tenantId":"pb.amritsar","id":null},{"code":"FSM_COLLECTOR","name":"FSM Payment Collector","tenantId":"pb.amritsar","id":null},{"code":"BPAREG_APPROVER","name":"BPAREG Approver","tenantId":"pb.amritsar","id":null},{"code":"EGF_ADMINISTRATOR","name":"Finance Adminsitrator","tenantId":"pb.amritsar","id":null},{"code":"FSM_EDITOR_EMP","name":"FSM Employee Application Editor","tenantId":"pb.amritsar","id":null},{"code":"COLL_OPERATOR","name":"Collection Operator","tenantId":"pb.amritsar","id":null},{"code":"TL_DOC_VERIFIER","name":"TL doc verifier","tenantId":"pb.amritsar","id":null},{"code":"TL_ADMIN","name":"TL Admin","tenantId":"pb.amritsar","id":null},{"code":"Property Verifier","name":null,"tenantId":"pb.amritsar","id":null},{"code":"NOC_APPROVER","name":"NoC counter Approver","tenantId":"pb.amritsar","id":null},{"code":"WORKS_BILL_CREATOR","name":"Works Bill Creator","tenantId":"pb.amritsar","id":null},{"code":"STORE INCHARGE","name":null,"tenantId":"pb.amritsar","id":null},{"code":"WORKS_MASTER_CREATOR","name":"Works Master creator","tenantId":"pb.amritsar","id":null},{"code":"SUPERUSER","name":"Super User","tenantId":"pb.amritsar","id":null},{"code":"directortestcode112234324","name":null,"tenantId":"pb.amritsar","id":null},{"code":"SYS_INTEGRATOR_WATER_SEW","name":"System Integrator W&amp;S","tenantId":"pb.amritsar","id":null},{"code":"FSM_DASHBOARD_VIEWER","name":"FSM Employee Dashboard Viewer","tenantId":"pb.amritsar","id":null},{"code":"SW_APPROVER","name":"SW Approver","tenantId":"pb.amritsar","id":null}],"name":"tvcrjhhwdc","tenantId":"pb.amritsar","emailId":"fcaae@auto.com","id":12138,"userName":"EMPAUTO","type":"EMPLOYEE","uuid":"959745fe-66bc-45b2-9a35-609ec994abd4"},"responseType":"arraybuffer","correlationId":"8a52f9e9-1ee2-42d0-8968-79ff6080c66a"},"message":"some unknown error while creating: could not find property of type array in request body with name $.Bill.*"}</div><div class="step-row"><div class="step-container" id="1321.1"><div class="step-ref failed">&gt;&gt;</div><div class="step-cell failed">com/egov/core-services/tests/../../core-services/pretests/pdfServiceCreate.feature</div></div><div class="time-cell failed">411</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-cell comment"># * call read('../../business-services/tests/collectionServicesCreate.feature@Create_PaymentWithValidBillID_01')</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-cell comment">#* def Payments = Payments</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="1322"><div class="step-ref passed">1322</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayload = read('../../core-services/requestPayload/pdf-service/pdfCreate.json')</div></div><div class="time-cell passed">11</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-cell comment"># initializing pdf create payload objects</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="1323"><div class="step-ref passed">1323</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayloadFirst = pdfCreatePayload.TL</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="1324"><div class="step-ref passed">1324</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayloadSecond = pdfCreatePayload.PT</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="1325"><div class="step-ref passed">1325</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayloadThird = pdfCreatePayload.FireNoc</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="1326"><div class="step-ref passed">1326</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayloadFourth = pdfCreatePayload.WS</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="1327"><div class="step-ref passed">1327</div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="1328"><div class="step-ref passed">1328</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServicePretest.feature@fetchBill')</div></div><div class="time-cell passed">224</div></div><div class="step-row"><div class="step-container" id="1328.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServicePretest.feature</div></div><div class="time-cell passed">208</div></div><div class="step-row"><div class="step-container" id="1329"><div class="step-ref passed">1329</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceConstants = read('../../business-services/constants/billing-service.yaml')</div></div><div class="time-cell passed">8</div></div><div class="step-row"><div class="step-container" id="1330"><div class="step-ref passed">1330</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionServiceConstants = read('../../business-services/constants/apportionService.yaml')</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container" id="1331"><div class="step-ref passed">1331</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = billingServiceConstants.parameters.businessService</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="1332"><div class="step-ref passed">1332</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionbusinessService = apportionServiceConstants.parameters.businessService</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="1333"><div class="step-ref passed">1333</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason1 = apportionServiceConstants.parameters.reason1</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="1334"><div class="step-ref passed">1334</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason2 = apportionServiceConstants.parameters.reason2</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="1335"><div class="step-ref passed">1335</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason3 = apportionServiceConstants.parameters.reason3</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="1336"><div class="step-ref passed">1336</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason4 = apportionServiceConstants.parameters.reason4</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment">#* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="1337"><div class="step-ref passed">1337</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillRequest = read('../../business-services/requestPayload/collection-services/fetchBill.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="1338"><div class="step-ref passed">1338</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillRequest = read('../../business-services/requestPayload/collection-services/cancelBill.json')</div></div><div class="time-cell passed">12</div></div><div class="step-row"><div class="step-container" id="1339"><div class="step-ref passed">1339</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1340"><div class="step-ref passed">1340</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillParams =</div></div><div class="time-cell passed">2</div></div><div class="preformatted" data-parent="1340">{
   consumerCode: '#(consumerCode)',
   businessService: '#(businessService)',
   tenantId: '#(tenantId)'
}</div><div class="step-row"><div class="step-container" id="1341"><div class="step-ref passed">1341</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url fetchBill</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1342"><div class="step-ref passed">1342</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And params fetchBillParams</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillParams</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="1343"><div class="step-ref passed">1343</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request fetchBillRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1344"><div class="step-ref passed">1344</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">158</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillResponse</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="1345"><div class="step-ref passed">1345</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1346"><div class="step-ref passed">1346</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def fetchBillResponse = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1347"><div class="step-ref passed">1347</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmount = response.Bill[0].totalAmount</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="1348"><div class="step-ref passed">1348</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billId = response.Bill[0].id</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="1349"><div class="step-ref passed">1349</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def txnAmount = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1350"><div class="step-ref passed">1350</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmountPaid = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1351"><div class="step-ref passed">1351</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalDue = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1352"><div class="step-ref passed">1352</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreateParam =</div></div><div class="time-cell passed">3</div></div><div class="preformatted" data-parent="1352">{
 key: '#(key)',
 tenantId: '#(tenantId)'
}</div><div class="step-row"><div class="step-container" id="1353"><div class="step-ref passed">1353</div><div class="step-indent"> </div><div class="step-cell passed">Given url createPdf</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1354"><div class="step-ref passed">1354</div><div class="step-indent"> </div><div class="step-cell passed">And params pdfCreateParam</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1355"><div class="step-ref passed">1355</div><div class="step-indent"> </div><div class="step-cell passed">And request pdfCreatePayloadFourth</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1356"><div class="step-ref passed">1356</div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">162</div></div><div class="step-row"><div class="step-container" id="1357"><div class="step-ref failed">1357</div><div class="step-indent"> </div><div class="step-cell failed">Then status 201</div></div><div class="time-cell failed">1</div></div><div class="preformatted" data-parent="1357">15:37:39.191 status code was: 400, expected: 201, response time: 125, url: https://qa.digit.org/pdf-service/v1/_create?key=ws-bill&amp;tenantId=pb.amritsar, response: {"ResponseInfo":{"userInfo":{"mobileNumber":"7899179393","roles":[{"code":"NOC_CEMP","name":"NoC counter employee","tenantId":"pb.amritsar","id":null},{"code":"EGF_REPORT_VIEW","name":"Finance Report View","tenantId":"pb.amritsar","id":null},{"code":"QA_AUTOMATION","name":"QA Automation","tenantId":"pb.amritsar","id":null},{"code":"AssetReportViewer","name":"AssetReportViewer","tenantId":"pb.amritsar","id":null},{"code":"BPA_FIELD_INSPECTOR","name":"BPA Field Inspector","tenantId":"pb.amritsar","id":null},{"code":"TL_FIELD_INSPECTOR","name":"TL Field Inspector","tenantId":"pb.amritsar","id":null},{"code":"Asset Administrator","name":null,"tenantId":"pb.amritsar","id":null},{"code":"EGF_BILL_CREATOR","name":"EGF Bill Creator","tenantId":"pb.amritsar","id":null},{"code":"BPA_APPROVER","name":"BPA Services Approver","tenantId":"pb.amritsar","id":null},{"code":"WO_CREATOR","name":"WO Creator","tenantId":"pb.amritsar","id":null},{"code":"CEMP","name":"Counter Employee","tenantId":"pb.amritsar","id":null},{"code":"WS_CEMP","name":"WS Counter Employee","tenantId":"pb.amritsar","id":null},{"code":"BANK_COLL_OPERATOR","name":"Bank Collection Operator","tenantId":"pb.amritsar","id":null},{"code":"ANONYMUS","name":"Any User","tenantId":"pb.amritsar","id":null},{"code":"WS_FIELD_INSPECTOR","name":"WS Field Inspector","tenantId":"pb.amritsar","id":null},{"code":"FSM_ADMIN","name":"FSM Administrator","tenantId":"pb.amritsar","id":null},{"code":"BPAREG_EMPLOYEE","name":"BPAREG Employee","tenantId":"pb.amritsar","id":null},{"code":"COMMISSIONER","name":"Commissioner","tenantId":"pb.amritsar","id":null},{"code":"AIRPORT_AUTHORITY_APPROVER","name":"Airport authority Approver","tenantId":"pb.amritsar","id":null},{"code":"EGF_PAYMENT_CREATOR","name":"Finance Payment Creator","tenantId":"pb.amritsar","id":null},{"code":"TL_CREATOR","name":"TL Creator","tenantId":"pb.amritsar","id":null},{"code":"EGF_BILL_APPROVER","name":"EGF Bill Approver","tenantId":"pb.amritsar","id":null},{"code":"BPAREG_DOC_VERIFIER","name":"BPAREG doc verifier","tenantId":"pb.amritsar","id":null},{"code":"BPA_STRUCTURALENGINEER","name":"BPA Structural Engineer","tenantId":"pb.amritsar","id":null},{"code":"testonecode112234324","name":null,"tenantId":"pb.amritsar","id":null},{"code":"NOC_FIELD_INSPECTOR","name":"NoC Field Inpector","tenantId":"pb.amritsar","id":null},{"code":"GO","name":"Grievance Officer","tenantId":"pb.amritsar","id":null},{"code":"SW_CEMP","name":"SW Counter Employee","tenantId":"pb.amritsar","id":null},{"code":"FSM_CREATOR_EMP","name":"FSM Employee Application Creator","tenantId":"pb.amritsar","id":null},{"code":"SW_CLERK","name":"SW Clerk","tenantId":"pb.amritsar","id":null},{"code":"CFC","name":"Citizen Feedback Centre","tenantId":"pb.amritsar","id":null},{"code":"Property Approver","name":null,"tenantId":"pb.amritsar","id":null},{"code":"WORKS_FINANCIAL_APPROVER","name":"Financials Approver","tenantId":"pb.amritsar","id":null},{"code":"ANONYMOUS","name":"Anonymous User","tenantId":"pb.amritsar","id":null},{"code":"FSM_REPORT_VIEWER","name":"FSM Employee Report Viewer","tenantId":"pb.amritsar","id":null},{"code":"EMPLOYEE ADMIN","name":null,"tenantId":"pb.amritsar","id":null},{"code":"SW_DOC_VERIFIER","name":"SW Document Verifier","tenantId":"pb.amritsar","id":null},{"code":"DE_CREATOR","name":"Detailed Estimate Creator","tenantId":"pb.amritsar","id":null},{"code":"TL_APPROVER","name":"TL Approver","tenantId":"pb.amritsar","id":null},{"code":"PGR-ADMIN","name":"PGR Administrator","tenantId":"pb.amritsar","id":null},{"code":"CONTRACTOR_ADVANCE_CREATOR","name":"Contractor Advance creator","tenantId":"pb.amritsar","id":null},{"code":"BPA_TOWNPLANNER","name":"BPA Town Planner","tenantId":"pb.amritsar","id":null},{"code":"EGF_MASTER_ADMIN","name":"Finance Master Admin","tenantId":"pb.amritsar","id":null},{"code":"EGF_PAYMENT_APPROVER","name":"Finance Payment Approver","tenantId":"pb.amritsar","id":null},{"code":"DGRO","name":"Department Grievance Routing Officer","tenantId":"pb.amritsar","id":null},{"code":"FSM_VIEW_EMP","name":"FSM Employee Application Viewer","tenantId":"pb.amritsar","id":null},{"code":"CSC_COLL_OPERATOR","name":"CSC Collection Operator","tenantId":"pb.amritsar","id":null},{"code":"PTIS_MASTER","name":"PTIS Master","tenantId":"pb.amritsar","id":null},{"code":"FSM_DSO","name":"FSM Desluding Operator","tenantId":"pb.amritsar","id":null},{"code":"SW_FIELD_INSPECTOR","name":"SW Field Inspector","tenantId":"pb.amritsar","id":null},{"code":"CSR","name":"Customer Support Representative","tenantId":"pb.amritsar","id":null},{"code":"HRMS_ADMIN","name":"HRMS Admin","tenantId":"pb.amritsar","id":null},{"code":"EGF_VOUCHER_APPROVER","name":"Finance Voucher Approver","tenantId":"pb.amritsar","id":null},{"code":"WS_APPROVER","name":"WS Approver","tenantId":"pb.amritsar","id":null},{"code":"BPA_NOC_VERIFIER","name":"BPA NOC Verifier","tenantId":"pb.amritsar","id":null},{"code":"SYSTEM","name":"System user","tenantId":"pb.amritsar","id":null},{"code":"GA","name":"Grivance Administrator","tenantId":"pb.amritsar","id":null},{"code":"SYS_INTEGRATOR_FINANCE","name":"System Integrator Finance","tenantId":"pb.amritsar","id":null},{"code":"LOA_CREATOR","name":"LOA Creator","tenantId":"pb.amritsar","id":null},{"code":"GRO","name":"Grievance Routing Officer","tenantId":"pb.amritsar","id":null},{"code":"ULB Operator","name":null,"tenantId":"pb.amritsar","id":null},{"code":"BPA_BUILDER","name":"BPA Builder","tenantId":"pb.amritsar","id":null},{"code":"EMPLOYEE_FINANCE","name":"Employee Finance","tenantId":"pb.amritsar","id":null},{"code":"PGR_LME","name":"PGR Last Mile Employee","tenantId":"pb.amritsar","id":null},{"code":"COLL_REMIT_TO_BANK","name":"Collections Remitter","tenantId":"pb.amritsar","id":null},{"code":"PT_CEMP","name":"PT Counter Employee","tenantId":"pb.amritsar","id":null},{"code":"FIRE_NOC_APPROVER","name":"Fire Noc Department Approver","tenantId":"pb.amritsar","id":null},{"code":"WORKS_APPROVER","name":"Works Approver","tenantId":"pb.amritsar","id":null},{"code":"AE_CREATOR","name":"Abstract Estimate Creator","tenantId":"pb.amritsar","id":null},{"code":"CITY_ADMIN","name":"Admin of a ULB","tenantId":"pb.amritsar","id":null},{"code":"PT_FIELD_INSPECTOR","name":"PT Field Inspector","tenantId":"pb.amritsar","id":null},{"code":"FSM_DRIVER","name":"FSM Driver","tenantId":"pb.amritsar","id":null},{"code":"PTADMIN","name":"ULB Administrator","tenantId":"pb.amritsar","id":null},{"code":"WORKS_ADMINISTRATOR","name":"Works Administrator","tenantId":"pb.amritsar","id":null},{"code":"PT_DOC_VERIFIER","name":"PT Doc Verifier","tenantId":"pb.amritsar","id":null},{"code":"EMPLOYEE","name":"Employee","tenantId":"pb.amritsar","id":null},{"code":"COLL_RECEIPT_CREATOR","name":"Collections Receipt Creator","tenantId":"pb.amritsar","id":null},{"code":"TL_CEMP","name":"TL Counter Employee","tenantId":"pb.amritsar","id":null},{"code":"RO","name":"Redressal Officer","tenantId":"pb.amritsar","id":null},{"code":"COLL_REP_VIEW","name":"Collection Report Viewer","tenantId":"pb.amritsar","id":null},{"code":"UC_EMP","name":"Universal Collection Employee","tenantId":"pb.amritsar","id":null},{"code":"FSM_EMP_FSTPO","name":"FSM FSTP Opperator","tenantId":"pb.amritsar","id":null},{"code":"BPA_ENGINEER","name":"BPA Engineer","tenantId":"pb.amritsar","id":null},{"code":"BPA_VERIFIER","name":"BPA Services verifier","tenantId":"pb.amritsar","id":null},{"code":"PT_APPROVER","name":"PT Counter Approver","tenantId":"pb.amritsar","id":null},{"code":"STADMIN","name":"State Administrator","tenantId":"pb.amritsar","id":null},{"code":"WS_CLERK","name":"WS Clerk","tenantId":"pb.amritsar","id":null},{"code":"NOC_DOC_VERIFIER","name":"NoC Doc Verifier","tenantId":"pb.amritsar","id":null},{"code":"EGF_VOUCHER_CREATOR","name":"Finance Voucher Creator","tenantId":"pb.amritsar","id":null},{"code":"LEGACY_RECEIPT_CREATOR","name":"Legacy Receipt Creator","tenantId":"pb.amritsar","id":null},{"code":"WS_DOC_VERIFIER","name":"WS Document Verifier","tenantId":"pb.amritsar","id":null},{"code":"AssetCreator","name":"AssetCreator","tenantId":"pb.amritsar","id":null},{"code":"MB_CREATOR","name":"MB creator","tenantId":"pb.amritsar","id":null},{"code":"BPA_ARCHITECT","name":"BPA Architect","tenantId":"pb.amritsar","id":null},{"code":"testtwocode11234354","name":null,"tenantId":"pb.amritsar","id":null},{"code":"FEMP","name":"Field Employee","tenantId":"pb.amritsar","id":null},{"code":"PTIS_ADMIN","name":"PTIS Admin","tenantId":"pb.amritsar","id":null},{"code":"BPA_SUPERVISOR","name":"BPA Supervisor","tenantId":"pb.amritsar","id":null},{"code":"FSM_COLLECTOR","name":"FSM Payment Collector","tenantId":"pb.amritsar","id":null},{"code":"BPAREG_APPROVER","name":"BPAREG Approver","tenantId":"pb.amritsar","id":null},{"code":"EGF_ADMINISTRATOR","name":"Finance Adminsitrator","tenantId":"pb.amritsar","id":null},{"code":"FSM_EDITOR_EMP","name":"FSM Employee Application Editor","tenantId":"pb.amritsar","id":null},{"code":"COLL_OPERATOR","name":"Collection Operator","tenantId":"pb.amritsar","id":null},{"code":"TL_DOC_VERIFIER","name":"TL doc verifier","tenantId":"pb.amritsar","id":null},{"code":"TL_ADMIN","name":"TL Admin","tenantId":"pb.amritsar","id":null},{"code":"Property Verifier","name":null,"tenantId":"pb.amritsar","id":null},{"code":"NOC_APPROVER","name":"NoC counter Approver","tenantId":"pb.amritsar","id":null},{"code":"WORKS_BILL_CREATOR","name":"Works Bill Creator","tenantId":"pb.amritsar","id":null},{"code":"STORE INCHARGE","name":null,"tenantId":"pb.amritsar","id":null},{"code":"WORKS_MASTER_CREATOR","name":"Works Master creator","tenantId":"pb.amritsar","id":null},{"code":"SUPERUSER","name":"Super User","tenantId":"pb.amritsar","id":null},{"code":"directortestcode112234324","name":null,"tenantId":"pb.amritsar","id":null},{"code":"SYS_INTEGRATOR_WATER_SEW","name":"System Integrator W&amp;S","tenantId":"pb.amritsar","id":null},{"code":"FSM_DASHBOARD_VIEWER","name":"FSM Employee Dashboard Viewer","tenantId":"pb.amritsar","id":null},{"code":"SW_APPROVER","name":"SW Approver","tenantId":"pb.amritsar","id":null}],"name":"tvcrjhhwdc","tenantId":"pb.amritsar","emailId":"fcaae@auto.com","id":12138,"userName":"EMPAUTO","type":"EMPLOYEE","uuid":"959745fe-66bc-45b2-9a35-609ec994abd4"},"responseType":"arraybuffer","correlationId":"8a52f9e9-1ee2-42d0-8968-79ff6080c66a"},"message":"some unknown error while creating: could not find property of type array in request body with name $.Bill.*"}
pdfServiceCreate.feature:87 - status code was: 400, expected: 201, response time: 125, url: https://qa.digit.org/pdf-service/v1/_create?key=ws-bill&amp;tenantId=pb.amritsar, response: {"ResponseInfo":{"userInfo":{"mobileNumber":"7899179393","roles":[{"code":"NOC_CEMP","name":"NoC counter employee","tenantId":"pb.amritsar","id":null},{"code":"EGF_REPORT_VIEW","name":"Finance Report View","tenantId":"pb.amritsar","id":null},{"code":"QA_AUTOMATION","name":"QA Automation","tenantId":"pb.amritsar","id":null},{"code":"AssetReportViewer","name":"AssetReportViewer","tenantId":"pb.amritsar","id":null},{"code":"BPA_FIELD_INSPECTOR","name":"BPA Field Inspector","tenantId":"pb.amritsar","id":null},{"code":"TL_FIELD_INSPECTOR","name":"TL Field Inspector","tenantId":"pb.amritsar","id":null},{"code":"Asset Administrator","name":null,"tenantId":"pb.amritsar","id":null},{"code":"EGF_BILL_CREATOR","name":"EGF Bill Creator","tenantId":"pb.amritsar","id":null},{"code":"BPA_APPROVER","name":"BPA Services Approver","tenantId":"pb.amritsar","id":null},{"code":"WO_CREATOR","name":"WO Creator","tenantId":"pb.amritsar","id":null},{"code":"CEMP","name":"Counter Employee","tenantId":"pb.amritsar","id":null},{"code":"WS_CEMP","name":"WS Counter Employee","tenantId":"pb.amritsar","id":null},{"code":"BANK_COLL_OPERATOR","name":"Bank Collection Operator","tenantId":"pb.amritsar","id":null},{"code":"ANONYMUS","name":"Any User","tenantId":"pb.amritsar","id":null},{"code":"WS_FIELD_INSPECTOR","name":"WS Field Inspector","tenantId":"pb.amritsar","id":null},{"code":"FSM_ADMIN","name":"FSM Administrator","tenantId":"pb.amritsar","id":null},{"code":"BPAREG_EMPLOYEE","name":"BPAREG Employee","tenantId":"pb.amritsar","id":null},{"code":"COMMISSIONER","name":"Commissioner","tenantId":"pb.amritsar","id":null},{"code":"AIRPORT_AUTHORITY_APPROVER","name":"Airport authority Approver","tenantId":"pb.amritsar","id":null},{"code":"EGF_PAYMENT_CREATOR","name":"Finance Payment Creator","tenantId":"pb.amritsar","id":null},{"code":"TL_CREATOR","name":"TL Creator","tenantId":"pb.amritsar","id":null},{"code":"EGF_BILL_APPROVER","name":"EGF Bill Approver","tenantId":"pb.amritsar","id":null},{"code":"BPAREG_DOC_VERIFIER","name":"BPAREG doc verifier","tenantId":"pb.amritsar","id":null},{"code":"BPA_STRUCTURALENGINEER","name":"BPA Structural Engineer","tenantId":"pb.amritsar","id":null},{"code":"testonecode112234324","name":null,"tenantId":"pb.amritsar","id":null},{"code":"NOC_FIELD_INSPECTOR","name":"NoC Field Inpector","tenantId":"pb.amritsar","id":null},{"code":"GO","name":"Grievance Officer","tenantId":"pb.amritsar","id":null},{"code":"SW_CEMP","name":"SW Counter Employee","tenantId":"pb.amritsar","id":null},{"code":"FSM_CREATOR_EMP","name":"FSM Employee Application Creator","tenantId":"pb.amritsar","id":null},{"code":"SW_CLERK","name":"SW Clerk","tenantId":"pb.amritsar","id":null},{"code":"CFC","name":"Citizen Feedback Centre","tenantId":"pb.amritsar","id":null},{"code":"Property Approver","name":null,"tenantId":"pb.amritsar","id":null},{"code":"WORKS_FINANCIAL_APPROVER","name":"Financials Approver","tenantId":"pb.amritsar","id":null},{"code":"ANONYMOUS","name":"Anonymous User","tenantId":"pb.amritsar","id":null},{"code":"FSM_REPORT_VIEWER","name":"FSM Employee Report Viewer","tenantId":"pb.amritsar","id":null},{"code":"EMPLOYEE ADMIN","name":null,"tenantId":"pb.amritsar","id":null},{"code":"SW_DOC_VERIFIER","name":"SW Document Verifier","tenantId":"pb.amritsar","id":null},{"code":"DE_CREATOR","name":"Detailed Estimate Creator","tenantId":"pb.amritsar","id":null},{"code":"TL_APPROVER","name":"TL Approver","tenantId":"pb.amritsar","id":null},{"code":"PGR-ADMIN","name":"PGR Administrator","tenantId":"pb.amritsar","id":null},{"code":"CONTRACTOR_ADVANCE_CREATOR","name":"Contractor Advance creator","tenantId":"pb.amritsar","id":null},{"code":"BPA_TOWNPLANNER","name":"BPA Town Planner","tenantId":"pb.amritsar","id":null},{"code":"EGF_MASTER_ADMIN","name":"Finance Master Admin","tenantId":"pb.amritsar","id":null},{"code":"EGF_PAYMENT_APPROVER","name":"Finance Payment Approver","tenantId":"pb.amritsar","id":null},{"code":"DGRO","name":"Department Grievance Routing Officer","tenantId":"pb.amritsar","id":null},{"code":"FSM_VIEW_EMP","name":"FSM Employee Application Viewer","tenantId":"pb.amritsar","id":null},{"code":"CSC_COLL_OPERATOR","name":"CSC Collection Operator","tenantId":"pb.amritsar","id":null},{"code":"PTIS_MASTER","name":"PTIS Master","tenantId":"pb.amritsar","id":null},{"code":"FSM_DSO","name":"FSM Desluding Operator","tenantId":"pb.amritsar","id":null},{"code":"SW_FIELD_INSPECTOR","name":"SW Field Inspector","tenantId":"pb.amritsar","id":null},{"code":"CSR","name":"Customer Support Representative","tenantId":"pb.amritsar","id":null},{"code":"HRMS_ADMIN","name":"HRMS Admin","tenantId":"pb.amritsar","id":null},{"code":"EGF_VOUCHER_APPROVER","name":"Finance Voucher Approver","tenantId":"pb.amritsar","id":null},{"code":"WS_APPROVER","name":"WS Approver","tenantId":"pb.amritsar","id":null},{"code":"BPA_NOC_VERIFIER","name":"BPA NOC Verifier","tenantId":"pb.amritsar","id":null},{"code":"SYSTEM","name":"System user","tenantId":"pb.amritsar","id":null},{"code":"GA","name":"Grivance Administrator","tenantId":"pb.amritsar","id":null},{"code":"SYS_INTEGRATOR_FINANCE","name":"System Integrator Finance","tenantId":"pb.amritsar","id":null},{"code":"LOA_CREATOR","name":"LOA Creator","tenantId":"pb.amritsar","id":null},{"code":"GRO","name":"Grievance Routing Officer","tenantId":"pb.amritsar","id":null},{"code":"ULB Operator","name":null,"tenantId":"pb.amritsar","id":null},{"code":"BPA_BUILDER","name":"BPA Builder","tenantId":"pb.amritsar","id":null},{"code":"EMPLOYEE_FINANCE","name":"Employee Finance","tenantId":"pb.amritsar","id":null},{"code":"PGR_LME","name":"PGR Last Mile Employee","tenantId":"pb.amritsar","id":null},{"code":"COLL_REMIT_TO_BANK","name":"Collections Remitter","tenantId":"pb.amritsar","id":null},{"code":"PT_CEMP","name":"PT Counter Employee","tenantId":"pb.amritsar","id":null},{"code":"FIRE_NOC_APPROVER","name":"Fire Noc Department Approver","tenantId":"pb.amritsar","id":null},{"code":"WORKS_APPROVER","name":"Works Approver","tenantId":"pb.amritsar","id":null},{"code":"AE_CREATOR","name":"Abstract Estimate Creator","tenantId":"pb.amritsar","id":null},{"code":"CITY_ADMIN","name":"Admin of a ULB","tenantId":"pb.amritsar","id":null},{"code":"PT_FIELD_INSPECTOR","name":"PT Field Inspector","tenantId":"pb.amritsar","id":null},{"code":"FSM_DRIVER","name":"FSM Driver","tenantId":"pb.amritsar","id":null},{"code":"PTADMIN","name":"ULB Administrator","tenantId":"pb.amritsar","id":null},{"code":"WORKS_ADMINISTRATOR","name":"Works Administrator","tenantId":"pb.amritsar","id":null},{"code":"PT_DOC_VERIFIER","name":"PT Doc Verifier","tenantId":"pb.amritsar","id":null},{"code":"EMPLOYEE","name":"Employee","tenantId":"pb.amritsar","id":null},{"code":"COLL_RECEIPT_CREATOR","name":"Collections Receipt Creator","tenantId":"pb.amritsar","id":null},{"code":"TL_CEMP","name":"TL Counter Employee","tenantId":"pb.amritsar","id":null},{"code":"RO","name":"Redressal Officer","tenantId":"pb.amritsar","id":null},{"code":"COLL_REP_VIEW","name":"Collection Report Viewer","tenantId":"pb.amritsar","id":null},{"code":"UC_EMP","name":"Universal Collection Employee","tenantId":"pb.amritsar","id":null},{"code":"FSM_EMP_FSTPO","name":"FSM FSTP Opperator","tenantId":"pb.amritsar","id":null},{"code":"BPA_ENGINEER","name":"BPA Engineer","tenantId":"pb.amritsar","id":null},{"code":"BPA_VERIFIER","name":"BPA Services verifier","tenantId":"pb.amritsar","id":null},{"code":"PT_APPROVER","name":"PT Counter Approver","tenantId":"pb.amritsar","id":null},{"code":"STADMIN","name":"State Administrator","tenantId":"pb.amritsar","id":null},{"code":"WS_CLERK","name":"WS Clerk","tenantId":"pb.amritsar","id":null},{"code":"NOC_DOC_VERIFIER","name":"NoC Doc Verifier","tenantId":"pb.amritsar","id":null},{"code":"EGF_VOUCHER_CREATOR","name":"Finance Voucher Creator","tenantId":"pb.amritsar","id":null},{"code":"LEGACY_RECEIPT_CREATOR","name":"Legacy Receipt Creator","tenantId":"pb.amritsar","id":null},{"code":"WS_DOC_VERIFIER","name":"WS Document Verifier","tenantId":"pb.amritsar","id":null},{"code":"AssetCreator","name":"AssetCreator","tenantId":"pb.amritsar","id":null},{"code":"MB_CREATOR","name":"MB creator","tenantId":"pb.amritsar","id":null},{"code":"BPA_ARCHITECT","name":"BPA Architect","tenantId":"pb.amritsar","id":null},{"code":"testtwocode11234354","name":null,"tenantId":"pb.amritsar","id":null},{"code":"FEMP","name":"Field Employee","tenantId":"pb.amritsar","id":null},{"code":"PTIS_ADMIN","name":"PTIS Admin","tenantId":"pb.amritsar","id":null},{"code":"BPA_SUPERVISOR","name":"BPA Supervisor","tenantId":"pb.amritsar","id":null},{"code":"FSM_COLLECTOR","name":"FSM Payment Collector","tenantId":"pb.amritsar","id":null},{"code":"BPAREG_APPROVER","name":"BPAREG Approver","tenantId":"pb.amritsar","id":null},{"code":"EGF_ADMINISTRATOR","name":"Finance Adminsitrator","tenantId":"pb.amritsar","id":null},{"code":"FSM_EDITOR_EMP","name":"FSM Employee Application Editor","tenantId":"pb.amritsar","id":null},{"code":"COLL_OPERATOR","name":"Collection Operator","tenantId":"pb.amritsar","id":null},{"code":"TL_DOC_VERIFIER","name":"TL doc verifier","tenantId":"pb.amritsar","id":null},{"code":"TL_ADMIN","name":"TL Admin","tenantId":"pb.amritsar","id":null},{"code":"Property Verifier","name":null,"tenantId":"pb.amritsar","id":null},{"code":"NOC_APPROVER","name":"NoC counter Approver","tenantId":"pb.amritsar","id":null},{"code":"WORKS_BILL_CREATOR","name":"Works Bill Creator","tenantId":"pb.amritsar","id":null},{"code":"STORE INCHARGE","name":null,"tenantId":"pb.amritsar","id":null},{"code":"WORKS_MASTER_CREATOR","name":"Works Master creator","tenantId":"pb.amritsar","id":null},{"code":"SUPERUSER","name":"Super User","tenantId":"pb.amritsar","id":null},{"code":"directortestcode112234324","name":null,"tenantId":"pb.amritsar","id":null},{"code":"SYS_INTEGRATOR_WATER_SEW","name":"System Integrator W&amp;S","tenantId":"pb.amritsar","id":null},{"code":"FSM_DASHBOARD_VIEWER","name":"FSM Employee Dashboard Viewer","tenantId":"pb.amritsar","id":null},{"code":"SW_APPROVER","name":"SW Approver","tenantId":"pb.amritsar","id":null}],"name":"tvcrjhhwdc","tenantId":"pb.amritsar","emailId":"fcaae@auto.com","id":12138,"userName":"EMPAUTO","type":"EMPLOYEE","uuid":"959745fe-66bc-45b2-9a35-609ec994abd4"},"responseType":"arraybuffer","correlationId":"8a52f9e9-1ee2-42d0-8968-79ff6080c66a"},"message":"some unknown error while creating: could not find property of type array in request body with name $.Bill.*"}</div><div class="step-row"><div class="step-container" id="1358"><div class="step-ref skipped">1358</div><div class="step-indent"> </div><div class="step-cell skipped">And def pdfCreateResponseHeader = responseHeaders</div></div><div class="time-cell skipped">0</div></div><div class="step-row"><div class="step-container" id="1359"><div class="step-ref skipped">1359</div><div class="step-indent"> </div><div class="step-cell skipped">And def pdfCreateResponseBody = response</div></div><div class="time-cell skipped">0</div></div><div class="step-row"><div class="step-container" id="1360"><div class="step-ref skipped">1360</div><div class="step-cell skipped">* match pdfCreateResponseBody == '#present'</div></div><div class="time-cell skipped">0</div></div><div class="step-row"><div class="step-container" id="1361"><div class="step-ref skipped">1361</div><div class="step-cell skipped">* pdfCreateResponseBody.message == pdfCreateConstant.expectedMessages.message</div></div><div class="time-cell skipped">0</div></div><div class="step-row"><div class="step-container" id="1362"><div class="step-ref skipped">1362</div><div class="step-cell skipped">* match pdfCreateResponseBody.ResponseInfo.userInfo.roles.length == '##[_ &gt; 0]'</div></div><div class="time-cell skipped">0</div></div></div><div class="scenario"><div class="scenario-heading" id="[8:72]"><div class="heading-container"><div class="scenario-tags"><a class="badge badge-primary" href="karate-tags.html">pdf_create_WS_FS_07</a><a class="badge badge-primary" href="karate-tags.html">regression</a><a class="badge badge-primary" href="karate-tags.html">positive</a><a class="badge badge-primary" href="karate-tags.html">pdfservice</a><a class="badge badge-primary" href="karate-tags.html">coreServices</a></div><span class="scenario-keyword">Scenario: [8:72]</span><span class="scenario-name">Verify the FileStore ID is created in the Response for the WnS API call for PDF generation service </span></div><div class="scenario-time failed">ms: 2528</div></div><div class="step-row"><div class="step-container" id="[8:72]bg"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-cell passed">Background:</div></div><div class="time-cell passed"></div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-cell comment"># reading javascript utils for using generic methods</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1363"><div class="step-ref bg-step">1363</div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">25</div></div><div class="preformatted" data-parent="1363">15:37:39.360 karate.env:  
15:37:39.360 locale: en_IN 
15:37:39.361 tenantId: pb.amritsar</div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1364"><div class="step-ref bg-step">1364</div><div class="step-cell passed">* def pdfCreateConstant = read('../../core-services/constants/pdfService.yaml')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1365"><div class="step-ref bg-step">1365</div><div class="step-cell passed">* call read('../../business-services/tests/collectionServicesCreate.feature@Create_PaymentWithValidBillID_01')</div></div><div class="time-cell passed">2090</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1365.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/tests/collectionServicesCreate.feature</div></div><div class="time-cell passed">2052</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1366"><div class="step-ref bg-step">1366</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/tests/billingServicesDemand.feature@create_01')</div></div><div class="time-cell passed">459</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1366.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/tests/billingServicesDemand.feature</div></div><div class="time-cell passed">387</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1367"><div class="step-ref bg-step">1367</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1368"><div class="step-ref bg-step">1368</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceDemandConstants = read('../../business-services/constants/billing-service-demand.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1369"><div class="step-ref bg-step">1369</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1370"><div class="step-ref bg-step">1370</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell passed">6</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1371"><div class="step-ref bg-step">1371</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def consumerType = mdmsStateBillingService.BusinessService[0].businessService</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1372"><div class="step-ref bg-step">1372</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = mdmsStateBillingService.BusinessService[0].code</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1373"><div class="step-ref bg-step">1373</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxPeriodFrom = getCurrentEpochTime()</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1374"><div class="step-ref bg-step">1374</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def daysFromToday = 2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1375"><div class="step-ref bg-step">1375</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxPeriodTo = getEpochDate(daysFromToday)</div></div><div class="time-cell passed">94</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1376"><div class="step-ref bg-step">1376</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxHeadMasterCodes = karate.jsonPath(mdmsStateBillingService, "$.TaxHeadMaster[?(@.service=='" + businessService + "')].code")</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1377"><div class="step-ref bg-step">1377</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxHeadMasterCode = taxHeadMasterCodes[randomNumber(taxHeadMasterCodes.length)]</div></div><div class="time-cell passed">11</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1378"><div class="step-ref bg-step">1378</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxAmount = 200</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1379"><div class="step-ref bg-step">1379</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionAmount = 0</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1380"><div class="step-ref bg-step">1380</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def minimumAmountPayable = 1</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Steps to create a new Employee through HRMS</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1381"><div class="step-ref bg-step">1381</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServiceDemandPretest.feature@createBillDemand')</div></div><div class="time-cell passed">238</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1381.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServiceDemandPretest.feature</div></div><div class="time-cell passed">220</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1382"><div class="step-ref bg-step">1382</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1383"><div class="step-ref bg-step">1383</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceDemandConstants = read('../../business-services/constants/billing-service-demand.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1384"><div class="step-ref bg-step">1384</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1385"><div class="step-ref bg-step">1385</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createDemandRequest = read('../../business-services/requestPayload/billing-service-demand/create.json')</div></div><div class="time-cell passed">17</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1386"><div class="step-ref bg-step">1386</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchDemandRequest = read('../../business-services/requestPayload/billing-service-demand/search.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1387"><div class="step-ref bg-step">1387</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def updateDemandRequest = read('../../business-services/requestPayload/billing-service-demand/update.json')</div></div><div class="time-cell passed">19</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1388"><div class="step-ref bg-step">1388</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">7</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1389"><div class="step-ref bg-step">1389</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url createDemandUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print createDemandRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1390"><div class="step-ref bg-step">1390</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request createDemandRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1391"><div class="step-ref bg-step">1391</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">161</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1392"><div class="step-ref bg-step">1392</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1393"><div class="step-ref bg-step">1393</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billingServiceDemandResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1394"><div class="step-ref bg-step">1394</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billingServiceDemandResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1395"><div class="step-ref bg-step">1395</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* print billingServiceDemandResponseBody</div></div><div class="time-cell passed">0</div></div><div class="preformatted" data-parent="1395">15:37:39.908 [print] {
  "ResponseInfo": {
    "ver": null,
    "resMsgId": null,
    "msgId": null,
    "apiId": null,
    "ts": null,
    "status": "201 CREATED"
  },
  "Demands": [
    {
      "taxPeriodFrom": 1628590059561,
      "businessService": "PT",
      "minimumAmountPayable": 1,
      "taxPeriodTo": 1628762859656,
      "fixedBillExpiryDate": null,
      "additionalDetails": null,
      "payer": null,
      "demandDetails": [
        {
          "demandId": "fa170b61-9d40-4fc8-83da-d1500cb1ecef",
          "taxHeadMasterCode": "PT_ADVANCE_CARRYFORWARD",
          "collectionAmount": 0,
          "auditDetails": {
            "lastModifiedTime": 1628590060089,
            "createdBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
            "lastModifiedBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
            "createdTime": 1628590060089
          },
          "tenantId": "pb.amritsar",
          "id": "da581e98-9ba1-459b-afbf-f49c672e704a",
          "taxAmount": 200,
          "additionalDetails": null
        }
      ],
      "consumerType": "PropertyTax",
      "auditDetails": {
        "lastModifiedTime": 1628590060089,
        "createdBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
        "lastModifiedBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
        "createdTime": 1628590060089
      },
      "tenantId": "pb.amritsar",
      "consumerCode": "Consumer-Code-Test-803205",
      "id": "fa170b61-9d40-4fc8-83da-d1500cb1ecef",
      "billExpiryTime": null,
      "isPaymentCompleted": false,
      "status": "ACTIVE"
    }
  ],
  "CollectedReceipt": null
}</div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1396"><div class="step-ref bg-step">1396</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def Demands = billingServiceDemandResponseBody.Demands</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1397"><div class="step-ref bg-step">1397</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def demandId = Demands[0].id</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1398"><div class="step-ref bg-step">1398</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def consumerCode = Demands[0].consumerCode</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the status Created</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1399"><div class="step-ref bg-step">1399</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* assert billingServiceDemandResponseBody.ResponseInfo.status == commonConstants.expectedStatus.created</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand id is present</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1400"><div class="step-ref bg-step">1400</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].id == "#present"</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the tenantId of demand response is equal with current tenantId</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1401"><div class="step-ref bg-step">1401</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].tenantId == tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the consumer code of demand response is equal with defined consumerCode</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1402"><div class="step-ref bg-step">1402</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].consumerCode == consumerCode</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the consumerType of demand response is equal with defined consumerType</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1403"><div class="step-ref bg-step">1403</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].consumerType == consumerType</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the businessService of demand response is equal with defined businessService</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1404"><div class="step-ref bg-step">1404</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].businessService == businessService</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxPeriodFrom of demand response is equal with defined taxPeriodFrom</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1405"><div class="step-ref bg-step">1405</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].taxPeriodFrom == taxPeriodFrom</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxPeriodTo of demand response is equal with defined taxPeriodTo</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1406"><div class="step-ref bg-step">1406</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].taxPeriodTo == taxPeriodTo</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand details id is present in demand response body</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1407"><div class="step-ref bg-step">1407</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].id == "#present"</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demandId is present in demand response body</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1408"><div class="step-ref bg-step">1408</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].demandId == "#present"</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxHeadMasterCode of demand response is equal with defined taxHeadMasterCode</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1409"><div class="step-ref bg-step">1409</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].taxHeadMasterCode == taxHeadMasterCode</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxAmount of demand response is equal with defined taxAmount</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1410"><div class="step-ref bg-step">1410</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].taxAmount == taxAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the collectionAmount of demand response is equal with defined collectionAmount</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1411"><div class="step-ref bg-step">1411</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].collectionAmount == collectionAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the minimumAmountPayable of demand response is equal with defined minimumAmountPayable</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1412"><div class="step-ref bg-step">1412</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].minimumAmountPayable == minimumAmountPayable</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand status is equal with expected demand status `ACTIVE`</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1413"><div class="step-ref bg-step">1413</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].status == billingServiceDemandConstants.parameters.status</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1414"><div class="step-ref bg-step">1414</div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1415"><div class="step-ref bg-step">1415</div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1416"><div class="step-ref bg-step">1416</div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1417"><div class="step-ref bg-step">1417</div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1418"><div class="step-ref bg-step">1418</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServicePretest.feature@fetchBill')</div></div><div class="time-cell passed">208</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1418.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServicePretest.feature</div></div><div class="time-cell passed">198</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1419"><div class="step-ref bg-step">1419</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceConstants = read('../../business-services/constants/billing-service.yaml')</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1420"><div class="step-ref bg-step">1420</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionServiceConstants = read('../../business-services/constants/apportionService.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1421"><div class="step-ref bg-step">1421</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = billingServiceConstants.parameters.businessService</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1422"><div class="step-ref bg-step">1422</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionbusinessService = apportionServiceConstants.parameters.businessService</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1423"><div class="step-ref bg-step">1423</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason1 = apportionServiceConstants.parameters.reason1</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1424"><div class="step-ref bg-step">1424</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason2 = apportionServiceConstants.parameters.reason2</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1425"><div class="step-ref bg-step">1425</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason3 = apportionServiceConstants.parameters.reason3</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1426"><div class="step-ref bg-step">1426</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason4 = apportionServiceConstants.parameters.reason4</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment">#* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1427"><div class="step-ref bg-step">1427</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillRequest = read('../../business-services/requestPayload/collection-services/fetchBill.json')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1428"><div class="step-ref bg-step">1428</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillRequest = read('../../business-services/requestPayload/collection-services/cancelBill.json')</div></div><div class="time-cell passed">14</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1429"><div class="step-ref bg-step">1429</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1430"><div class="step-ref bg-step">1430</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillParams =</div></div><div class="time-cell passed">1</div></div><div class="preformatted" data-parent="1430">{
   consumerCode: '#(consumerCode)',
   businessService: '#(businessService)',
   tenantId: '#(tenantId)'
}</div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1431"><div class="step-ref bg-step">1431</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url fetchBill</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1432"><div class="step-ref bg-step">1432</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And params fetchBillParams</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillParams</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1433"><div class="step-ref bg-step">1433</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request fetchBillRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1434"><div class="step-ref bg-step">1434</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">153</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillResponse</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1435"><div class="step-ref bg-step">1435</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1436"><div class="step-ref bg-step">1436</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def fetchBillResponse = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1437"><div class="step-ref bg-step">1437</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmount = response.Bill[0].totalAmount</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1438"><div class="step-ref bg-step">1438</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billId = response.Bill[0].id</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1439"><div class="step-ref bg-step">1439</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def txnAmount = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1440"><div class="step-ref bg-step">1440</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmountPaid = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1441"><div class="step-ref bg-step">1441</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalDue = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1442"><div class="step-ref bg-step">1442</div><div class="step-indent"> </div><div class="step-cell passed">* def paidBillIdError = collectionServicesConstants.errorMessages.paidBillId</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1443"><div class="step-ref bg-step">1443</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillIdError = collectionServicesConstants.errorMessages.invalidBillId</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1444"><div class="step-ref bg-step">1444</div><div class="step-indent"> </div><div class="step-cell passed">* def totalAmountPaidError = collectionServicesConstants.errorMessages.totalAmountPaidNull</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1445"><div class="step-ref bg-step">1445</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentModeError = collectionServicesConstants.errorMessages.invalidPaymentMode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1446"><div class="step-ref bg-step">1446</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantIdError = commonConstants.errorMessages.invalidTenantIdError</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1447"><div class="step-ref bg-step">1447</div><div class="step-indent"> </div><div class="step-cell passed">* def nullTenantIdError = commonConstants.errorMessages.nullParameterError</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1448"><div class="step-ref bg-step">1448</div><div class="step-indent"> </div><div class="step-cell passed">* def reason = collectionServicesConstants.parameters.reason</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1449"><div class="step-ref bg-step">1449</div><div class="step-indent"> </div><div class="step-cell passed">* def action = collectionServicesConstants.parameters.action</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1450"><div class="step-ref bg-step">1450</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDateError = collectionServicesConstants.errorMessages.instrumentDateAsNull</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1451"><div class="step-ref bg-step">1451</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentPastDateError = collectionServicesConstants.errorMessages.instrumentDatePastNinetyDays</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1452"><div class="step-ref bg-step">1452</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentFutureDateError = collectionServicesConstants.errorMessages.futureInstrumentDate</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1453"><div class="step-ref bg-step">1453</div><div class="step-indent"> </div><div class="step-cell passed">* def moreThanDueAmountError = collectionServicesConstants.errorMessages.moreThanDueAmount</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1454"><div class="step-ref bg-step">1454</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberError = collectionServicesConstants.errorMessages.instrumentNumberAsEmptyString</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1455"><div class="step-ref bg-step">1455</div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberError = collectionServicesConstants.errorMessages.transactionNumberAsEmptyString</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1456"><div class="step-ref bg-step">1456</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/collectionServicesPretest.feature@createPayment')</div></div><div class="time-cell passed">466</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1456.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/collectionServicesPretest.feature</div></div><div class="time-cell passed">440</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1457"><div class="step-ref bg-step">1457</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1458"><div class="step-ref bg-step">1458</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1459"><div class="step-ref bg-step">1459</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1460"><div class="step-ref bg-step">1460</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def tenantId = tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1461"><div class="step-ref bg-step">1461</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentMode = collectionServicesConstants.parameters.paymentMode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1462"><div class="step-ref bg-step">1462</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBy = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1463"><div class="step-ref bg-step">1463</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1464"><div class="step-ref bg-step">1464</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def payerName = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1465"><div class="step-ref bg-step">1465</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalDue = 0</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1466"><div class="step-ref bg-step">1466</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumber = collectionServicesConstants.parameters.transactionNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1467"><div class="step-ref bg-step">1467</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumber = collectionServicesConstants.parameters.instrumentNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1468"><div class="step-ref bg-step">1468</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCard = collectionServicesConstants.parameters.paymentMode2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1469"><div class="step-ref bg-step">1469</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCheque = collectionServicesConstants.parameters.paymentModeForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1470"><div class="step-ref bg-step">1470</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberForCheque = collectionServicesConstants.parameters.transactionNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1471"><div class="step-ref bg-step">1471</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberForCheque = collectionServicesConstants.parameters.instrumentNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1472"><div class="step-ref bg-step">1472</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1473"><div class="step-ref bg-step">1473</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def ifscCode = collectionServicesConstants.parameters.ifscCode</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1474"><div class="step-ref bg-step">1474</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1475"><div class="step-ref bg-step">1475</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1476"><div class="step-ref bg-step">1476</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequest = read('../../business-services/requestPayload/collection-services/create.json')</div></div><div class="time-cell passed">14</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1477"><div class="step-ref bg-step">1477</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def workflowRequest = read('../../business-services/requestPayload/collection-services/workflow.json')</div></div><div class="time-cell passed">6</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1478"><div class="step-ref bg-step">1478</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPaymentRequest = read('../../business-services/requestPayload/collection-services/search.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1479"><div class="step-ref bg-step">1479</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTreceiptcount = read('../../business-services/requestPayload/collection-services/receiptcount.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1480"><div class="step-ref bg-step">1480</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequestForCheque = read('../../business-services/requestPayload/collection-services/createPaymentWithCheque.json')</div></div><div class="time-cell passed">11</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1481"><div class="step-ref bg-step">1481</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def eChallanPaymentcount = read('../../business-services/requestPayload/collection-services/echallancount.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1482"><div class="step-ref bg-step">1482</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1483"><div class="step-ref bg-step">1483</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = 'invalid_'+randomNumber(4)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1484"><div class="step-ref bg-step">1484</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBusinessId = 'PT'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1485"><div class="step-ref bg-step">1485</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentMode = randomString(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1486"><div class="step-ref bg-step">1486</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantId = randomString(5)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1487"><div class="step-ref bg-step">1487</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def negativeTotalAmount = '-'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1488"><div class="step-ref bg-step">1488</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url payment</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1489"><div class="step-ref bg-step">1489</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request createPaymentRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print createPaymentRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1490"><div class="step-ref bg-step">1490</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">357</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1491"><div class="step-ref bg-step">1491</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1492"><div class="step-ref bg-step">1492</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1493"><div class="step-ref bg-step">1493</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1494"><div class="step-ref bg-step">1494</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def Payments = collectionServicesResponseBody.Payments</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1495"><div class="step-ref bg-step">1495</div><div class="step-indent"> </div><div class="step-cell passed">* match response.ResponseInfo.status == '200 OK'</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1496"><div class="step-ref bg-step">1496</div><div class="step-indent"> </div><div class="step-cell passed">* def paymentId = collectionServicesResponseBody.Payments[0].id</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1497"><div class="step-ref bg-step">1497</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/collectionServicesPretest.feature@processworkflow')</div></div><div class="time-cell passed">893</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1497.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/collectionServicesPretest.feature</div></div><div class="time-cell passed">869</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1498"><div class="step-ref bg-step">1498</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">7</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1499"><div class="step-ref bg-step">1499</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1500"><div class="step-ref bg-step">1500</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1501"><div class="step-ref bg-step">1501</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def tenantId = tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1502"><div class="step-ref bg-step">1502</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentMode = collectionServicesConstants.parameters.paymentMode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1503"><div class="step-ref bg-step">1503</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBy = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1504"><div class="step-ref bg-step">1504</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">6</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1505"><div class="step-ref bg-step">1505</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def payerName = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1506"><div class="step-ref bg-step">1506</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalDue = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1507"><div class="step-ref bg-step">1507</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumber = collectionServicesConstants.parameters.transactionNumber</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1508"><div class="step-ref bg-step">1508</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumber = collectionServicesConstants.parameters.instrumentNumber</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1509"><div class="step-ref bg-step">1509</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCard = collectionServicesConstants.parameters.paymentMode2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1510"><div class="step-ref bg-step">1510</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCheque = collectionServicesConstants.parameters.paymentModeForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1511"><div class="step-ref bg-step">1511</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberForCheque = collectionServicesConstants.parameters.transactionNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1512"><div class="step-ref bg-step">1512</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberForCheque = collectionServicesConstants.parameters.instrumentNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1513"><div class="step-ref bg-step">1513</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1514"><div class="step-ref bg-step">1514</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def ifscCode = collectionServicesConstants.parameters.ifscCode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1515"><div class="step-ref bg-step">1515</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1516"><div class="step-ref bg-step">1516</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1517"><div class="step-ref bg-step">1517</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequest = read('../../business-services/requestPayload/collection-services/create.json')</div></div><div class="time-cell passed">8</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1518"><div class="step-ref bg-step">1518</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def workflowRequest = read('../../business-services/requestPayload/collection-services/workflow.json')</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1519"><div class="step-ref bg-step">1519</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPaymentRequest = read('../../business-services/requestPayload/collection-services/search.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1520"><div class="step-ref bg-step">1520</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTreceiptcount = read('../../business-services/requestPayload/collection-services/receiptcount.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1521"><div class="step-ref bg-step">1521</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequestForCheque = read('../../business-services/requestPayload/collection-services/createPaymentWithCheque.json')</div></div><div class="time-cell passed">14</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1522"><div class="step-ref bg-step">1522</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def eChallanPaymentcount = read('../../business-services/requestPayload/collection-services/echallancount.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1523"><div class="step-ref bg-step">1523</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1524"><div class="step-ref bg-step">1524</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = 'invalid_'+randomNumber(4)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1525"><div class="step-ref bg-step">1525</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBusinessId = 'PT'+randomNumber(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1526"><div class="step-ref bg-step">1526</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentMode = randomString(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1527"><div class="step-ref bg-step">1527</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantId = randomString(5)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1528"><div class="step-ref bg-step">1528</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def negativeTotalAmount = '-'+randomNumber(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1529"><div class="step-ref bg-step">1529</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url collectionServiceWorkflowUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1530"><div class="step-ref bg-step">1530</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request workflowRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print workflowRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1531"><div class="step-ref bg-step">1531</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">783</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1532"><div class="step-ref bg-step">1532</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1533"><div class="step-ref bg-step">1533</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[8:72]bg"><div class="step-container" id="1534"><div class="step-ref bg-step">1534</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1535"><div class="step-ref passed">1535</div><div class="step-cell passed">* def key = pdfCreateConstant.parameters.valid.keyForWs</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container"><div class="step-ref failed"></div><div class="step-cell comment"># calling create pdf pretest</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="1536"><div class="step-ref failed">1536</div><div class="step-cell failed">* call read('../../core-services/pretests/pdfServiceCreate.feature@createPdfForWSSuccessfully')</div></div><div class="time-cell failed">407</div></div><div class="preformatted" data-parent="1536">15:37:41.927 feature call failed: classpath:com/egov/core-services/tests/../../core-services/pretests/pdfServiceCreate.feature
arg: null
pdfServiceCreate.feature:87 - status code was: 400, expected: 201, response time: 137, url: https://qa.digit.org/pdf-service/v1/_create?key=ws-bill&amp;tenantId=pb.amritsar, response: {"ResponseInfo":{"userInfo":{"mobileNumber":"7899179393","roles":[{"code":"NOC_CEMP","name":"NoC counter employee","tenantId":"pb.amritsar","id":null},{"code":"EGF_REPORT_VIEW","name":"Finance Report View","tenantId":"pb.amritsar","id":null},{"code":"QA_AUTOMATION","name":"QA Automation","tenantId":"pb.amritsar","id":null},{"code":"AssetReportViewer","name":"AssetReportViewer","tenantId":"pb.amritsar","id":null},{"code":"BPA_FIELD_INSPECTOR","name":"BPA Field Inspector","tenantId":"pb.amritsar","id":null},{"code":"TL_FIELD_INSPECTOR","name":"TL Field Inspector","tenantId":"pb.amritsar","id":null},{"code":"Asset Administrator","name":null,"tenantId":"pb.amritsar","id":null},{"code":"EGF_BILL_CREATOR","name":"EGF Bill Creator","tenantId":"pb.amritsar","id":null},{"code":"BPA_APPROVER","name":"BPA Services Approver","tenantId":"pb.amritsar","id":null},{"code":"WO_CREATOR","name":"WO Creator","tenantId":"pb.amritsar","id":null},{"code":"CEMP","name":"Counter Employee","tenantId":"pb.amritsar","id":null},{"code":"WS_CEMP","name":"WS Counter Employee","tenantId":"pb.amritsar","id":null},{"code":"BANK_COLL_OPERATOR","name":"Bank Collection Operator","tenantId":"pb.amritsar","id":null},{"code":"ANONYMUS","name":"Any User","tenantId":"pb.amritsar","id":null},{"code":"WS_FIELD_INSPECTOR","name":"WS Field Inspector","tenantId":"pb.amritsar","id":null},{"code":"FSM_ADMIN","name":"FSM Administrator","tenantId":"pb.amritsar","id":null},{"code":"BPAREG_EMPLOYEE","name":"BPAREG Employee","tenantId":"pb.amritsar","id":null},{"code":"COMMISSIONER","name":"Commissioner","tenantId":"pb.amritsar","id":null},{"code":"AIRPORT_AUTHORITY_APPROVER","name":"Airport authority Approver","tenantId":"pb.amritsar","id":null},{"code":"EGF_PAYMENT_CREATOR","name":"Finance Payment Creator","tenantId":"pb.amritsar","id":null},{"code":"TL_CREATOR","name":"TL Creator","tenantId":"pb.amritsar","id":null},{"code":"EGF_BILL_APPROVER","name":"EGF Bill Approver","tenantId":"pb.amritsar","id":null},{"code":"BPAREG_DOC_VERIFIER","name":"BPAREG doc verifier","tenantId":"pb.amritsar","id":null},{"code":"BPA_STRUCTURALENGINEER","name":"BPA Structural Engineer","tenantId":"pb.amritsar","id":null},{"code":"testonecode112234324","name":null,"tenantId":"pb.amritsar","id":null},{"code":"NOC_FIELD_INSPECTOR","name":"NoC Field Inpector","tenantId":"pb.amritsar","id":null},{"code":"GO","name":"Grievance Officer","tenantId":"pb.amritsar","id":null},{"code":"SW_CEMP","name":"SW Counter Employee","tenantId":"pb.amritsar","id":null},{"code":"FSM_CREATOR_EMP","name":"FSM Employee Application Creator","tenantId":"pb.amritsar","id":null},{"code":"SW_CLERK","name":"SW Clerk","tenantId":"pb.amritsar","id":null},{"code":"CFC","name":"Citizen Feedback Centre","tenantId":"pb.amritsar","id":null},{"code":"Property Approver","name":null,"tenantId":"pb.amritsar","id":null},{"code":"WORKS_FINANCIAL_APPROVER","name":"Financials Approver","tenantId":"pb.amritsar","id":null},{"code":"ANONYMOUS","name":"Anonymous User","tenantId":"pb.amritsar","id":null},{"code":"FSM_REPORT_VIEWER","name":"FSM Employee Report Viewer","tenantId":"pb.amritsar","id":null},{"code":"EMPLOYEE ADMIN","name":null,"tenantId":"pb.amritsar","id":null},{"code":"SW_DOC_VERIFIER","name":"SW Document Verifier","tenantId":"pb.amritsar","id":null},{"code":"DE_CREATOR","name":"Detailed Estimate Creator","tenantId":"pb.amritsar","id":null},{"code":"TL_APPROVER","name":"TL Approver","tenantId":"pb.amritsar","id":null},{"code":"PGR-ADMIN","name":"PGR Administrator","tenantId":"pb.amritsar","id":null},{"code":"CONTRACTOR_ADVANCE_CREATOR","name":"Contractor Advance creator","tenantId":"pb.amritsar","id":null},{"code":"BPA_TOWNPLANNER","name":"BPA Town Planner","tenantId":"pb.amritsar","id":null},{"code":"EGF_MASTER_ADMIN","name":"Finance Master Admin","tenantId":"pb.amritsar","id":null},{"code":"EGF_PAYMENT_APPROVER","name":"Finance Payment Approver","tenantId":"pb.amritsar","id":null},{"code":"DGRO","name":"Department Grievance Routing Officer","tenantId":"pb.amritsar","id":null},{"code":"FSM_VIEW_EMP","name":"FSM Employee Application Viewer","tenantId":"pb.amritsar","id":null},{"code":"CSC_COLL_OPERATOR","name":"CSC Collection Operator","tenantId":"pb.amritsar","id":null},{"code":"PTIS_MASTER","name":"PTIS Master","tenantId":"pb.amritsar","id":null},{"code":"FSM_DSO","name":"FSM Desluding Operator","tenantId":"pb.amritsar","id":null},{"code":"SW_FIELD_INSPECTOR","name":"SW Field Inspector","tenantId":"pb.amritsar","id":null},{"code":"CSR","name":"Customer Support Representative","tenantId":"pb.amritsar","id":null},{"code":"HRMS_ADMIN","name":"HRMS Admin","tenantId":"pb.amritsar","id":null},{"code":"EGF_VOUCHER_APPROVER","name":"Finance Voucher Approver","tenantId":"pb.amritsar","id":null},{"code":"WS_APPROVER","name":"WS Approver","tenantId":"pb.amritsar","id":null},{"code":"BPA_NOC_VERIFIER","name":"BPA NOC Verifier","tenantId":"pb.amritsar","id":null},{"code":"SYSTEM","name":"System user","tenantId":"pb.amritsar","id":null},{"code":"GA","name":"Grivance Administrator","tenantId":"pb.amritsar","id":null},{"code":"SYS_INTEGRATOR_FINANCE","name":"System Integrator Finance","tenantId":"pb.amritsar","id":null},{"code":"LOA_CREATOR","name":"LOA Creator","tenantId":"pb.amritsar","id":null},{"code":"GRO","name":"Grievance Routing Officer","tenantId":"pb.amritsar","id":null},{"code":"ULB Operator","name":null,"tenantId":"pb.amritsar","id":null},{"code":"BPA_BUILDER","name":"BPA Builder","tenantId":"pb.amritsar","id":null},{"code":"EMPLOYEE_FINANCE","name":"Employee Finance","tenantId":"pb.amritsar","id":null},{"code":"PGR_LME","name":"PGR Last Mile Employee","tenantId":"pb.amritsar","id":null},{"code":"COLL_REMIT_TO_BANK","name":"Collections Remitter","tenantId":"pb.amritsar","id":null},{"code":"PT_CEMP","name":"PT Counter Employee","tenantId":"pb.amritsar","id":null},{"code":"FIRE_NOC_APPROVER","name":"Fire Noc Department Approver","tenantId":"pb.amritsar","id":null},{"code":"WORKS_APPROVER","name":"Works Approver","tenantId":"pb.amritsar","id":null},{"code":"AE_CREATOR","name":"Abstract Estimate Creator","tenantId":"pb.amritsar","id":null},{"code":"CITY_ADMIN","name":"Admin of a ULB","tenantId":"pb.amritsar","id":null},{"code":"PT_FIELD_INSPECTOR","name":"PT Field Inspector","tenantId":"pb.amritsar","id":null},{"code":"FSM_DRIVER","name":"FSM Driver","tenantId":"pb.amritsar","id":null},{"code":"PTADMIN","name":"ULB Administrator","tenantId":"pb.amritsar","id":null},{"code":"WORKS_ADMINISTRATOR","name":"Works Administrator","tenantId":"pb.amritsar","id":null},{"code":"PT_DOC_VERIFIER","name":"PT Doc Verifier","tenantId":"pb.amritsar","id":null},{"code":"EMPLOYEE","name":"Employee","tenantId":"pb.amritsar","id":null},{"code":"COLL_RECEIPT_CREATOR","name":"Collections Receipt Creator","tenantId":"pb.amritsar","id":null},{"code":"TL_CEMP","name":"TL Counter Employee","tenantId":"pb.amritsar","id":null},{"code":"RO","name":"Redressal Officer","tenantId":"pb.amritsar","id":null},{"code":"COLL_REP_VIEW","name":"Collection Report Viewer","tenantId":"pb.amritsar","id":null},{"code":"UC_EMP","name":"Universal Collection Employee","tenantId":"pb.amritsar","id":null},{"code":"FSM_EMP_FSTPO","name":"FSM FSTP Opperator","tenantId":"pb.amritsar","id":null},{"code":"BPA_ENGINEER","name":"BPA Engineer","tenantId":"pb.amritsar","id":null},{"code":"BPA_VERIFIER","name":"BPA Services verifier","tenantId":"pb.amritsar","id":null},{"code":"PT_APPROVER","name":"PT Counter Approver","tenantId":"pb.amritsar","id":null},{"code":"STADMIN","name":"State Administrator","tenantId":"pb.amritsar","id":null},{"code":"WS_CLERK","name":"WS Clerk","tenantId":"pb.amritsar","id":null},{"code":"NOC_DOC_VERIFIER","name":"NoC Doc Verifier","tenantId":"pb.amritsar","id":null},{"code":"EGF_VOUCHER_CREATOR","name":"Finance Voucher Creator","tenantId":"pb.amritsar","id":null},{"code":"LEGACY_RECEIPT_CREATOR","name":"Legacy Receipt Creator","tenantId":"pb.amritsar","id":null},{"code":"WS_DOC_VERIFIER","name":"WS Document Verifier","tenantId":"pb.amritsar","id":null},{"code":"AssetCreator","name":"AssetCreator","tenantId":"pb.amritsar","id":null},{"code":"MB_CREATOR","name":"MB creator","tenantId":"pb.amritsar","id":null},{"code":"BPA_ARCHITECT","name":"BPA Architect","tenantId":"pb.amritsar","id":null},{"code":"testtwocode11234354","name":null,"tenantId":"pb.amritsar","id":null},{"code":"FEMP","name":"Field Employee","tenantId":"pb.amritsar","id":null},{"code":"PTIS_ADMIN","name":"PTIS Admin","tenantId":"pb.amritsar","id":null},{"code":"BPA_SUPERVISOR","name":"BPA Supervisor","tenantId":"pb.amritsar","id":null},{"code":"FSM_COLLECTOR","name":"FSM Payment Collector","tenantId":"pb.amritsar","id":null},{"code":"BPAREG_APPROVER","name":"BPAREG Approver","tenantId":"pb.amritsar","id":null},{"code":"EGF_ADMINISTRATOR","name":"Finance Adminsitrator","tenantId":"pb.amritsar","id":null},{"code":"FSM_EDITOR_EMP","name":"FSM Employee Application Editor","tenantId":"pb.amritsar","id":null},{"code":"COLL_OPERATOR","name":"Collection Operator","tenantId":"pb.amritsar","id":null},{"code":"TL_DOC_VERIFIER","name":"TL doc verifier","tenantId":"pb.amritsar","id":null},{"code":"TL_ADMIN","name":"TL Admin","tenantId":"pb.amritsar","id":null},{"code":"Property Verifier","name":null,"tenantId":"pb.amritsar","id":null},{"code":"NOC_APPROVER","name":"NoC counter Approver","tenantId":"pb.amritsar","id":null},{"code":"WORKS_BILL_CREATOR","name":"Works Bill Creator","tenantId":"pb.amritsar","id":null},{"code":"STORE INCHARGE","name":null,"tenantId":"pb.amritsar","id":null},{"code":"WORKS_MASTER_CREATOR","name":"Works Master creator","tenantId":"pb.amritsar","id":null},{"code":"SUPERUSER","name":"Super User","tenantId":"pb.amritsar","id":null},{"code":"directortestcode112234324","name":null,"tenantId":"pb.amritsar","id":null},{"code":"SYS_INTEGRATOR_WATER_SEW","name":"System Integrator W&amp;S","tenantId":"pb.amritsar","id":null},{"code":"FSM_DASHBOARD_VIEWER","name":"FSM Employee Dashboard Viewer","tenantId":"pb.amritsar","id":null},{"code":"SW_APPROVER","name":"SW Approver","tenantId":"pb.amritsar","id":null}],"name":"tvcrjhhwdc","tenantId":"pb.amritsar","emailId":"fcaae@auto.com","id":12138,"userName":"EMPAUTO","type":"EMPLOYEE","uuid":"959745fe-66bc-45b2-9a35-609ec994abd4"},"responseType":"arraybuffer","correlationId":"f03f9b72-e81a-4523-b6ab-757e27c8df4b"},"message":"some unknown error while creating: could not find property of type array in request body with name $.Bill.*"}
pdfService.feature:75 - 
pdfServiceCreate.feature:87 - status code was: 400, expected: 201, response time: 137, url: https://qa.digit.org/pdf-service/v1/_create?key=ws-bill&amp;tenantId=pb.amritsar, response: {"ResponseInfo":{"userInfo":{"mobileNumber":"7899179393","roles":[{"code":"NOC_CEMP","name":"NoC counter employee","tenantId":"pb.amritsar","id":null},{"code":"EGF_REPORT_VIEW","name":"Finance Report View","tenantId":"pb.amritsar","id":null},{"code":"QA_AUTOMATION","name":"QA Automation","tenantId":"pb.amritsar","id":null},{"code":"AssetReportViewer","name":"AssetReportViewer","tenantId":"pb.amritsar","id":null},{"code":"BPA_FIELD_INSPECTOR","name":"BPA Field Inspector","tenantId":"pb.amritsar","id":null},{"code":"TL_FIELD_INSPECTOR","name":"TL Field Inspector","tenantId":"pb.amritsar","id":null},{"code":"Asset Administrator","name":null,"tenantId":"pb.amritsar","id":null},{"code":"EGF_BILL_CREATOR","name":"EGF Bill Creator","tenantId":"pb.amritsar","id":null},{"code":"BPA_APPROVER","name":"BPA Services Approver","tenantId":"pb.amritsar","id":null},{"code":"WO_CREATOR","name":"WO Creator","tenantId":"pb.amritsar","id":null},{"code":"CEMP","name":"Counter Employee","tenantId":"pb.amritsar","id":null},{"code":"WS_CEMP","name":"WS Counter Employee","tenantId":"pb.amritsar","id":null},{"code":"BANK_COLL_OPERATOR","name":"Bank Collection Operator","tenantId":"pb.amritsar","id":null},{"code":"ANONYMUS","name":"Any User","tenantId":"pb.amritsar","id":null},{"code":"WS_FIELD_INSPECTOR","name":"WS Field Inspector","tenantId":"pb.amritsar","id":null},{"code":"FSM_ADMIN","name":"FSM Administrator","tenantId":"pb.amritsar","id":null},{"code":"BPAREG_EMPLOYEE","name":"BPAREG Employee","tenantId":"pb.amritsar","id":null},{"code":"COMMISSIONER","name":"Commissioner","tenantId":"pb.amritsar","id":null},{"code":"AIRPORT_AUTHORITY_APPROVER","name":"Airport authority Approver","tenantId":"pb.amritsar","id":null},{"code":"EGF_PAYMENT_CREATOR","name":"Finance Payment Creator","tenantId":"pb.amritsar","id":null},{"code":"TL_CREATOR","name":"TL Creator","tenantId":"pb.amritsar","id":null},{"code":"EGF_BILL_APPROVER","name":"EGF Bill Approver","tenantId":"pb.amritsar","id":null},{"code":"BPAREG_DOC_VERIFIER","name":"BPAREG doc verifier","tenantId":"pb.amritsar","id":null},{"code":"BPA_STRUCTURALENGINEER","name":"BPA Structural Engineer","tenantId":"pb.amritsar","id":null},{"code":"testonecode112234324","name":null,"tenantId":"pb.amritsar","id":null},{"code":"NOC_FIELD_INSPECTOR","name":"NoC Field Inpector","tenantId":"pb.amritsar","id":null},{"code":"GO","name":"Grievance Officer","tenantId":"pb.amritsar","id":null},{"code":"SW_CEMP","name":"SW Counter Employee","tenantId":"pb.amritsar","id":null},{"code":"FSM_CREATOR_EMP","name":"FSM Employee Application Creator","tenantId":"pb.amritsar","id":null},{"code":"SW_CLERK","name":"SW Clerk","tenantId":"pb.amritsar","id":null},{"code":"CFC","name":"Citizen Feedback Centre","tenantId":"pb.amritsar","id":null},{"code":"Property Approver","name":null,"tenantId":"pb.amritsar","id":null},{"code":"WORKS_FINANCIAL_APPROVER","name":"Financials Approver","tenantId":"pb.amritsar","id":null},{"code":"ANONYMOUS","name":"Anonymous User","tenantId":"pb.amritsar","id":null},{"code":"FSM_REPORT_VIEWER","name":"FSM Employee Report Viewer","tenantId":"pb.amritsar","id":null},{"code":"EMPLOYEE ADMIN","name":null,"tenantId":"pb.amritsar","id":null},{"code":"SW_DOC_VERIFIER","name":"SW Document Verifier","tenantId":"pb.amritsar","id":null},{"code":"DE_CREATOR","name":"Detailed Estimate Creator","tenantId":"pb.amritsar","id":null},{"code":"TL_APPROVER","name":"TL Approver","tenantId":"pb.amritsar","id":null},{"code":"PGR-ADMIN","name":"PGR Administrator","tenantId":"pb.amritsar","id":null},{"code":"CONTRACTOR_ADVANCE_CREATOR","name":"Contractor Advance creator","tenantId":"pb.amritsar","id":null},{"code":"BPA_TOWNPLANNER","name":"BPA Town Planner","tenantId":"pb.amritsar","id":null},{"code":"EGF_MASTER_ADMIN","name":"Finance Master Admin","tenantId":"pb.amritsar","id":null},{"code":"EGF_PAYMENT_APPROVER","name":"Finance Payment Approver","tenantId":"pb.amritsar","id":null},{"code":"DGRO","name":"Department Grievance Routing Officer","tenantId":"pb.amritsar","id":null},{"code":"FSM_VIEW_EMP","name":"FSM Employee Application Viewer","tenantId":"pb.amritsar","id":null},{"code":"CSC_COLL_OPERATOR","name":"CSC Collection Operator","tenantId":"pb.amritsar","id":null},{"code":"PTIS_MASTER","name":"PTIS Master","tenantId":"pb.amritsar","id":null},{"code":"FSM_DSO","name":"FSM Desluding Operator","tenantId":"pb.amritsar","id":null},{"code":"SW_FIELD_INSPECTOR","name":"SW Field Inspector","tenantId":"pb.amritsar","id":null},{"code":"CSR","name":"Customer Support Representative","tenantId":"pb.amritsar","id":null},{"code":"HRMS_ADMIN","name":"HRMS Admin","tenantId":"pb.amritsar","id":null},{"code":"EGF_VOUCHER_APPROVER","name":"Finance Voucher Approver","tenantId":"pb.amritsar","id":null},{"code":"WS_APPROVER","name":"WS Approver","tenantId":"pb.amritsar","id":null},{"code":"BPA_NOC_VERIFIER","name":"BPA NOC Verifier","tenantId":"pb.amritsar","id":null},{"code":"SYSTEM","name":"System user","tenantId":"pb.amritsar","id":null},{"code":"GA","name":"Grivance Administrator","tenantId":"pb.amritsar","id":null},{"code":"SYS_INTEGRATOR_FINANCE","name":"System Integrator Finance","tenantId":"pb.amritsar","id":null},{"code":"LOA_CREATOR","name":"LOA Creator","tenantId":"pb.amritsar","id":null},{"code":"GRO","name":"Grievance Routing Officer","tenantId":"pb.amritsar","id":null},{"code":"ULB Operator","name":null,"tenantId":"pb.amritsar","id":null},{"code":"BPA_BUILDER","name":"BPA Builder","tenantId":"pb.amritsar","id":null},{"code":"EMPLOYEE_FINANCE","name":"Employee Finance","tenantId":"pb.amritsar","id":null},{"code":"PGR_LME","name":"PGR Last Mile Employee","tenantId":"pb.amritsar","id":null},{"code":"COLL_REMIT_TO_BANK","name":"Collections Remitter","tenantId":"pb.amritsar","id":null},{"code":"PT_CEMP","name":"PT Counter Employee","tenantId":"pb.amritsar","id":null},{"code":"FIRE_NOC_APPROVER","name":"Fire Noc Department Approver","tenantId":"pb.amritsar","id":null},{"code":"WORKS_APPROVER","name":"Works Approver","tenantId":"pb.amritsar","id":null},{"code":"AE_CREATOR","name":"Abstract Estimate Creator","tenantId":"pb.amritsar","id":null},{"code":"CITY_ADMIN","name":"Admin of a ULB","tenantId":"pb.amritsar","id":null},{"code":"PT_FIELD_INSPECTOR","name":"PT Field Inspector","tenantId":"pb.amritsar","id":null},{"code":"FSM_DRIVER","name":"FSM Driver","tenantId":"pb.amritsar","id":null},{"code":"PTADMIN","name":"ULB Administrator","tenantId":"pb.amritsar","id":null},{"code":"WORKS_ADMINISTRATOR","name":"Works Administrator","tenantId":"pb.amritsar","id":null},{"code":"PT_DOC_VERIFIER","name":"PT Doc Verifier","tenantId":"pb.amritsar","id":null},{"code":"EMPLOYEE","name":"Employee","tenantId":"pb.amritsar","id":null},{"code":"COLL_RECEIPT_CREATOR","name":"Collections Receipt Creator","tenantId":"pb.amritsar","id":null},{"code":"TL_CEMP","name":"TL Counter Employee","tenantId":"pb.amritsar","id":null},{"code":"RO","name":"Redressal Officer","tenantId":"pb.amritsar","id":null},{"code":"COLL_REP_VIEW","name":"Collection Report Viewer","tenantId":"pb.amritsar","id":null},{"code":"UC_EMP","name":"Universal Collection Employee","tenantId":"pb.amritsar","id":null},{"code":"FSM_EMP_FSTPO","name":"FSM FSTP Opperator","tenantId":"pb.amritsar","id":null},{"code":"BPA_ENGINEER","name":"BPA Engineer","tenantId":"pb.amritsar","id":null},{"code":"BPA_VERIFIER","name":"BPA Services verifier","tenantId":"pb.amritsar","id":null},{"code":"PT_APPROVER","name":"PT Counter Approver","tenantId":"pb.amritsar","id":null},{"code":"STADMIN","name":"State Administrator","tenantId":"pb.amritsar","id":null},{"code":"WS_CLERK","name":"WS Clerk","tenantId":"pb.amritsar","id":null},{"code":"NOC_DOC_VERIFIER","name":"NoC Doc Verifier","tenantId":"pb.amritsar","id":null},{"code":"EGF_VOUCHER_CREATOR","name":"Finance Voucher Creator","tenantId":"pb.amritsar","id":null},{"code":"LEGACY_RECEIPT_CREATOR","name":"Legacy Receipt Creator","tenantId":"pb.amritsar","id":null},{"code":"WS_DOC_VERIFIER","name":"WS Document Verifier","tenantId":"pb.amritsar","id":null},{"code":"AssetCreator","name":"AssetCreator","tenantId":"pb.amritsar","id":null},{"code":"MB_CREATOR","name":"MB creator","tenantId":"pb.amritsar","id":null},{"code":"BPA_ARCHITECT","name":"BPA Architect","tenantId":"pb.amritsar","id":null},{"code":"testtwocode11234354","name":null,"tenantId":"pb.amritsar","id":null},{"code":"FEMP","name":"Field Employee","tenantId":"pb.amritsar","id":null},{"code":"PTIS_ADMIN","name":"PTIS Admin","tenantId":"pb.amritsar","id":null},{"code":"BPA_SUPERVISOR","name":"BPA Supervisor","tenantId":"pb.amritsar","id":null},{"code":"FSM_COLLECTOR","name":"FSM Payment Collector","tenantId":"pb.amritsar","id":null},{"code":"BPAREG_APPROVER","name":"BPAREG Approver","tenantId":"pb.amritsar","id":null},{"code":"EGF_ADMINISTRATOR","name":"Finance Adminsitrator","tenantId":"pb.amritsar","id":null},{"code":"FSM_EDITOR_EMP","name":"FSM Employee Application Editor","tenantId":"pb.amritsar","id":null},{"code":"COLL_OPERATOR","name":"Collection Operator","tenantId":"pb.amritsar","id":null},{"code":"TL_DOC_VERIFIER","name":"TL doc verifier","tenantId":"pb.amritsar","id":null},{"code":"TL_ADMIN","name":"TL Admin","tenantId":"pb.amritsar","id":null},{"code":"Property Verifier","name":null,"tenantId":"pb.amritsar","id":null},{"code":"NOC_APPROVER","name":"NoC counter Approver","tenantId":"pb.amritsar","id":null},{"code":"WORKS_BILL_CREATOR","name":"Works Bill Creator","tenantId":"pb.amritsar","id":null},{"code":"STORE INCHARGE","name":null,"tenantId":"pb.amritsar","id":null},{"code":"WORKS_MASTER_CREATOR","name":"Works Master creator","tenantId":"pb.amritsar","id":null},{"code":"SUPERUSER","name":"Super User","tenantId":"pb.amritsar","id":null},{"code":"directortestcode112234324","name":null,"tenantId":"pb.amritsar","id":null},{"code":"SYS_INTEGRATOR_WATER_SEW","name":"System Integrator W&amp;S","tenantId":"pb.amritsar","id":null},{"code":"FSM_DASHBOARD_VIEWER","name":"FSM Employee Dashboard Viewer","tenantId":"pb.amritsar","id":null},{"code":"SW_APPROVER","name":"SW Approver","tenantId":"pb.amritsar","id":null}],"name":"tvcrjhhwdc","tenantId":"pb.amritsar","emailId":"fcaae@auto.com","id":12138,"userName":"EMPAUTO","type":"EMPLOYEE","uuid":"959745fe-66bc-45b2-9a35-609ec994abd4"},"responseType":"arraybuffer","correlationId":"f03f9b72-e81a-4523-b6ab-757e27c8df4b"},"message":"some unknown error while creating: could not find property of type array in request body with name $.Bill.*"}</div><div class="step-row"><div class="step-container" id="1536.1"><div class="step-ref failed">&gt;&gt;</div><div class="step-cell failed">com/egov/core-services/tests/../../core-services/pretests/pdfServiceCreate.feature</div></div><div class="time-cell failed">396</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-cell comment"># * call read('../../business-services/tests/collectionServicesCreate.feature@Create_PaymentWithValidBillID_01')</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-cell comment">#* def Payments = Payments</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="1537"><div class="step-ref passed">1537</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayload = read('../../core-services/requestPayload/pdf-service/pdfCreate.json')</div></div><div class="time-cell passed">6</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-cell comment"># initializing pdf create payload objects</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="1538"><div class="step-ref passed">1538</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayloadFirst = pdfCreatePayload.TL</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="1539"><div class="step-ref passed">1539</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayloadSecond = pdfCreatePayload.PT</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="1540"><div class="step-ref passed">1540</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayloadThird = pdfCreatePayload.FireNoc</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="1541"><div class="step-ref passed">1541</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayloadFourth = pdfCreatePayload.WS</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="1542"><div class="step-ref passed">1542</div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1543"><div class="step-ref passed">1543</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServicePretest.feature@fetchBill')</div></div><div class="time-cell passed">206</div></div><div class="step-row"><div class="step-container" id="1543.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServicePretest.feature</div></div><div class="time-cell passed">199</div></div><div class="step-row"><div class="step-container" id="1544"><div class="step-ref passed">1544</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceConstants = read('../../business-services/constants/billing-service.yaml')</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container" id="1545"><div class="step-ref passed">1545</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionServiceConstants = read('../../business-services/constants/apportionService.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="1546"><div class="step-ref passed">1546</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = billingServiceConstants.parameters.businessService</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="1547"><div class="step-ref passed">1547</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionbusinessService = apportionServiceConstants.parameters.businessService</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="1548"><div class="step-ref passed">1548</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason1 = apportionServiceConstants.parameters.reason1</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="1549"><div class="step-ref passed">1549</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason2 = apportionServiceConstants.parameters.reason2</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="1550"><div class="step-ref passed">1550</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason3 = apportionServiceConstants.parameters.reason3</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="1551"><div class="step-ref passed">1551</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason4 = apportionServiceConstants.parameters.reason4</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment">#* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="1552"><div class="step-ref passed">1552</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillRequest = read('../../business-services/requestPayload/collection-services/fetchBill.json')</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="1553"><div class="step-ref passed">1553</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillRequest = read('../../business-services/requestPayload/collection-services/cancelBill.json')</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container" id="1554"><div class="step-ref passed">1554</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="1555"><div class="step-ref passed">1555</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillParams =</div></div><div class="time-cell passed">1</div></div><div class="preformatted" data-parent="1555">{
   consumerCode: '#(consumerCode)',
   businessService: '#(businessService)',
   tenantId: '#(tenantId)'
}</div><div class="step-row"><div class="step-container" id="1556"><div class="step-ref passed">1556</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url fetchBill</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1557"><div class="step-ref passed">1557</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And params fetchBillParams</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillParams</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="1558"><div class="step-ref passed">1558</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request fetchBillRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1559"><div class="step-ref passed">1559</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">166</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillResponse</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="1560"><div class="step-ref passed">1560</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1561"><div class="step-ref passed">1561</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def fetchBillResponse = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1562"><div class="step-ref passed">1562</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmount = response.Bill[0].totalAmount</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="1563"><div class="step-ref passed">1563</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billId = response.Bill[0].id</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="1564"><div class="step-ref passed">1564</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def txnAmount = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1565"><div class="step-ref passed">1565</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmountPaid = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1566"><div class="step-ref passed">1566</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalDue = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1567"><div class="step-ref passed">1567</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreateParam =</div></div><div class="time-cell passed">1</div></div><div class="preformatted" data-parent="1567">{
 key: '#(key)',
 tenantId: '#(tenantId)'
}</div><div class="step-row"><div class="step-container" id="1568"><div class="step-ref passed">1568</div><div class="step-indent"> </div><div class="step-cell passed">Given url createPdf</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1569"><div class="step-ref passed">1569</div><div class="step-indent"> </div><div class="step-cell passed">And params pdfCreateParam</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1570"><div class="step-ref passed">1570</div><div class="step-indent"> </div><div class="step-cell passed">And request pdfCreatePayloadFourth</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1571"><div class="step-ref passed">1571</div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">176</div></div><div class="step-row"><div class="step-container" id="1572"><div class="step-ref failed">1572</div><div class="step-indent"> </div><div class="step-cell failed">Then status 201</div></div><div class="time-cell failed">1</div></div><div class="preformatted" data-parent="1572">15:37:41.926 status code was: 400, expected: 201, response time: 137, url: https://qa.digit.org/pdf-service/v1/_create?key=ws-bill&amp;tenantId=pb.amritsar, response: {"ResponseInfo":{"userInfo":{"mobileNumber":"7899179393","roles":[{"code":"NOC_CEMP","name":"NoC counter employee","tenantId":"pb.amritsar","id":null},{"code":"EGF_REPORT_VIEW","name":"Finance Report View","tenantId":"pb.amritsar","id":null},{"code":"QA_AUTOMATION","name":"QA Automation","tenantId":"pb.amritsar","id":null},{"code":"AssetReportViewer","name":"AssetReportViewer","tenantId":"pb.amritsar","id":null},{"code":"BPA_FIELD_INSPECTOR","name":"BPA Field Inspector","tenantId":"pb.amritsar","id":null},{"code":"TL_FIELD_INSPECTOR","name":"TL Field Inspector","tenantId":"pb.amritsar","id":null},{"code":"Asset Administrator","name":null,"tenantId":"pb.amritsar","id":null},{"code":"EGF_BILL_CREATOR","name":"EGF Bill Creator","tenantId":"pb.amritsar","id":null},{"code":"BPA_APPROVER","name":"BPA Services Approver","tenantId":"pb.amritsar","id":null},{"code":"WO_CREATOR","name":"WO Creator","tenantId":"pb.amritsar","id":null},{"code":"CEMP","name":"Counter Employee","tenantId":"pb.amritsar","id":null},{"code":"WS_CEMP","name":"WS Counter Employee","tenantId":"pb.amritsar","id":null},{"code":"BANK_COLL_OPERATOR","name":"Bank Collection Operator","tenantId":"pb.amritsar","id":null},{"code":"ANONYMUS","name":"Any User","tenantId":"pb.amritsar","id":null},{"code":"WS_FIELD_INSPECTOR","name":"WS Field Inspector","tenantId":"pb.amritsar","id":null},{"code":"FSM_ADMIN","name":"FSM Administrator","tenantId":"pb.amritsar","id":null},{"code":"BPAREG_EMPLOYEE","name":"BPAREG Employee","tenantId":"pb.amritsar","id":null},{"code":"COMMISSIONER","name":"Commissioner","tenantId":"pb.amritsar","id":null},{"code":"AIRPORT_AUTHORITY_APPROVER","name":"Airport authority Approver","tenantId":"pb.amritsar","id":null},{"code":"EGF_PAYMENT_CREATOR","name":"Finance Payment Creator","tenantId":"pb.amritsar","id":null},{"code":"TL_CREATOR","name":"TL Creator","tenantId":"pb.amritsar","id":null},{"code":"EGF_BILL_APPROVER","name":"EGF Bill Approver","tenantId":"pb.amritsar","id":null},{"code":"BPAREG_DOC_VERIFIER","name":"BPAREG doc verifier","tenantId":"pb.amritsar","id":null},{"code":"BPA_STRUCTURALENGINEER","name":"BPA Structural Engineer","tenantId":"pb.amritsar","id":null},{"code":"testonecode112234324","name":null,"tenantId":"pb.amritsar","id":null},{"code":"NOC_FIELD_INSPECTOR","name":"NoC Field Inpector","tenantId":"pb.amritsar","id":null},{"code":"GO","name":"Grievance Officer","tenantId":"pb.amritsar","id":null},{"code":"SW_CEMP","name":"SW Counter Employee","tenantId":"pb.amritsar","id":null},{"code":"FSM_CREATOR_EMP","name":"FSM Employee Application Creator","tenantId":"pb.amritsar","id":null},{"code":"SW_CLERK","name":"SW Clerk","tenantId":"pb.amritsar","id":null},{"code":"CFC","name":"Citizen Feedback Centre","tenantId":"pb.amritsar","id":null},{"code":"Property Approver","name":null,"tenantId":"pb.amritsar","id":null},{"code":"WORKS_FINANCIAL_APPROVER","name":"Financials Approver","tenantId":"pb.amritsar","id":null},{"code":"ANONYMOUS","name":"Anonymous User","tenantId":"pb.amritsar","id":null},{"code":"FSM_REPORT_VIEWER","name":"FSM Employee Report Viewer","tenantId":"pb.amritsar","id":null},{"code":"EMPLOYEE ADMIN","name":null,"tenantId":"pb.amritsar","id":null},{"code":"SW_DOC_VERIFIER","name":"SW Document Verifier","tenantId":"pb.amritsar","id":null},{"code":"DE_CREATOR","name":"Detailed Estimate Creator","tenantId":"pb.amritsar","id":null},{"code":"TL_APPROVER","name":"TL Approver","tenantId":"pb.amritsar","id":null},{"code":"PGR-ADMIN","name":"PGR Administrator","tenantId":"pb.amritsar","id":null},{"code":"CONTRACTOR_ADVANCE_CREATOR","name":"Contractor Advance creator","tenantId":"pb.amritsar","id":null},{"code":"BPA_TOWNPLANNER","name":"BPA Town Planner","tenantId":"pb.amritsar","id":null},{"code":"EGF_MASTER_ADMIN","name":"Finance Master Admin","tenantId":"pb.amritsar","id":null},{"code":"EGF_PAYMENT_APPROVER","name":"Finance Payment Approver","tenantId":"pb.amritsar","id":null},{"code":"DGRO","name":"Department Grievance Routing Officer","tenantId":"pb.amritsar","id":null},{"code":"FSM_VIEW_EMP","name":"FSM Employee Application Viewer","tenantId":"pb.amritsar","id":null},{"code":"CSC_COLL_OPERATOR","name":"CSC Collection Operator","tenantId":"pb.amritsar","id":null},{"code":"PTIS_MASTER","name":"PTIS Master","tenantId":"pb.amritsar","id":null},{"code":"FSM_DSO","name":"FSM Desluding Operator","tenantId":"pb.amritsar","id":null},{"code":"SW_FIELD_INSPECTOR","name":"SW Field Inspector","tenantId":"pb.amritsar","id":null},{"code":"CSR","name":"Customer Support Representative","tenantId":"pb.amritsar","id":null},{"code":"HRMS_ADMIN","name":"HRMS Admin","tenantId":"pb.amritsar","id":null},{"code":"EGF_VOUCHER_APPROVER","name":"Finance Voucher Approver","tenantId":"pb.amritsar","id":null},{"code":"WS_APPROVER","name":"WS Approver","tenantId":"pb.amritsar","id":null},{"code":"BPA_NOC_VERIFIER","name":"BPA NOC Verifier","tenantId":"pb.amritsar","id":null},{"code":"SYSTEM","name":"System user","tenantId":"pb.amritsar","id":null},{"code":"GA","name":"Grivance Administrator","tenantId":"pb.amritsar","id":null},{"code":"SYS_INTEGRATOR_FINANCE","name":"System Integrator Finance","tenantId":"pb.amritsar","id":null},{"code":"LOA_CREATOR","name":"LOA Creator","tenantId":"pb.amritsar","id":null},{"code":"GRO","name":"Grievance Routing Officer","tenantId":"pb.amritsar","id":null},{"code":"ULB Operator","name":null,"tenantId":"pb.amritsar","id":null},{"code":"BPA_BUILDER","name":"BPA Builder","tenantId":"pb.amritsar","id":null},{"code":"EMPLOYEE_FINANCE","name":"Employee Finance","tenantId":"pb.amritsar","id":null},{"code":"PGR_LME","name":"PGR Last Mile Employee","tenantId":"pb.amritsar","id":null},{"code":"COLL_REMIT_TO_BANK","name":"Collections Remitter","tenantId":"pb.amritsar","id":null},{"code":"PT_CEMP","name":"PT Counter Employee","tenantId":"pb.amritsar","id":null},{"code":"FIRE_NOC_APPROVER","name":"Fire Noc Department Approver","tenantId":"pb.amritsar","id":null},{"code":"WORKS_APPROVER","name":"Works Approver","tenantId":"pb.amritsar","id":null},{"code":"AE_CREATOR","name":"Abstract Estimate Creator","tenantId":"pb.amritsar","id":null},{"code":"CITY_ADMIN","name":"Admin of a ULB","tenantId":"pb.amritsar","id":null},{"code":"PT_FIELD_INSPECTOR","name":"PT Field Inspector","tenantId":"pb.amritsar","id":null},{"code":"FSM_DRIVER","name":"FSM Driver","tenantId":"pb.amritsar","id":null},{"code":"PTADMIN","name":"ULB Administrator","tenantId":"pb.amritsar","id":null},{"code":"WORKS_ADMINISTRATOR","name":"Works Administrator","tenantId":"pb.amritsar","id":null},{"code":"PT_DOC_VERIFIER","name":"PT Doc Verifier","tenantId":"pb.amritsar","id":null},{"code":"EMPLOYEE","name":"Employee","tenantId":"pb.amritsar","id":null},{"code":"COLL_RECEIPT_CREATOR","name":"Collections Receipt Creator","tenantId":"pb.amritsar","id":null},{"code":"TL_CEMP","name":"TL Counter Employee","tenantId":"pb.amritsar","id":null},{"code":"RO","name":"Redressal Officer","tenantId":"pb.amritsar","id":null},{"code":"COLL_REP_VIEW","name":"Collection Report Viewer","tenantId":"pb.amritsar","id":null},{"code":"UC_EMP","name":"Universal Collection Employee","tenantId":"pb.amritsar","id":null},{"code":"FSM_EMP_FSTPO","name":"FSM FSTP Opperator","tenantId":"pb.amritsar","id":null},{"code":"BPA_ENGINEER","name":"BPA Engineer","tenantId":"pb.amritsar","id":null},{"code":"BPA_VERIFIER","name":"BPA Services verifier","tenantId":"pb.amritsar","id":null},{"code":"PT_APPROVER","name":"PT Counter Approver","tenantId":"pb.amritsar","id":null},{"code":"STADMIN","name":"State Administrator","tenantId":"pb.amritsar","id":null},{"code":"WS_CLERK","name":"WS Clerk","tenantId":"pb.amritsar","id":null},{"code":"NOC_DOC_VERIFIER","name":"NoC Doc Verifier","tenantId":"pb.amritsar","id":null},{"code":"EGF_VOUCHER_CREATOR","name":"Finance Voucher Creator","tenantId":"pb.amritsar","id":null},{"code":"LEGACY_RECEIPT_CREATOR","name":"Legacy Receipt Creator","tenantId":"pb.amritsar","id":null},{"code":"WS_DOC_VERIFIER","name":"WS Document Verifier","tenantId":"pb.amritsar","id":null},{"code":"AssetCreator","name":"AssetCreator","tenantId":"pb.amritsar","id":null},{"code":"MB_CREATOR","name":"MB creator","tenantId":"pb.amritsar","id":null},{"code":"BPA_ARCHITECT","name":"BPA Architect","tenantId":"pb.amritsar","id":null},{"code":"testtwocode11234354","name":null,"tenantId":"pb.amritsar","id":null},{"code":"FEMP","name":"Field Employee","tenantId":"pb.amritsar","id":null},{"code":"PTIS_ADMIN","name":"PTIS Admin","tenantId":"pb.amritsar","id":null},{"code":"BPA_SUPERVISOR","name":"BPA Supervisor","tenantId":"pb.amritsar","id":null},{"code":"FSM_COLLECTOR","name":"FSM Payment Collector","tenantId":"pb.amritsar","id":null},{"code":"BPAREG_APPROVER","name":"BPAREG Approver","tenantId":"pb.amritsar","id":null},{"code":"EGF_ADMINISTRATOR","name":"Finance Adminsitrator","tenantId":"pb.amritsar","id":null},{"code":"FSM_EDITOR_EMP","name":"FSM Employee Application Editor","tenantId":"pb.amritsar","id":null},{"code":"COLL_OPERATOR","name":"Collection Operator","tenantId":"pb.amritsar","id":null},{"code":"TL_DOC_VERIFIER","name":"TL doc verifier","tenantId":"pb.amritsar","id":null},{"code":"TL_ADMIN","name":"TL Admin","tenantId":"pb.amritsar","id":null},{"code":"Property Verifier","name":null,"tenantId":"pb.amritsar","id":null},{"code":"NOC_APPROVER","name":"NoC counter Approver","tenantId":"pb.amritsar","id":null},{"code":"WORKS_BILL_CREATOR","name":"Works Bill Creator","tenantId":"pb.amritsar","id":null},{"code":"STORE INCHARGE","name":null,"tenantId":"pb.amritsar","id":null},{"code":"WORKS_MASTER_CREATOR","name":"Works Master creator","tenantId":"pb.amritsar","id":null},{"code":"SUPERUSER","name":"Super User","tenantId":"pb.amritsar","id":null},{"code":"directortestcode112234324","name":null,"tenantId":"pb.amritsar","id":null},{"code":"SYS_INTEGRATOR_WATER_SEW","name":"System Integrator W&amp;S","tenantId":"pb.amritsar","id":null},{"code":"FSM_DASHBOARD_VIEWER","name":"FSM Employee Dashboard Viewer","tenantId":"pb.amritsar","id":null},{"code":"SW_APPROVER","name":"SW Approver","tenantId":"pb.amritsar","id":null}],"name":"tvcrjhhwdc","tenantId":"pb.amritsar","emailId":"fcaae@auto.com","id":12138,"userName":"EMPAUTO","type":"EMPLOYEE","uuid":"959745fe-66bc-45b2-9a35-609ec994abd4"},"responseType":"arraybuffer","correlationId":"f03f9b72-e81a-4523-b6ab-757e27c8df4b"},"message":"some unknown error while creating: could not find property of type array in request body with name $.Bill.*"}
pdfServiceCreate.feature:87 - status code was: 400, expected: 201, response time: 137, url: https://qa.digit.org/pdf-service/v1/_create?key=ws-bill&amp;tenantId=pb.amritsar, response: {"ResponseInfo":{"userInfo":{"mobileNumber":"7899179393","roles":[{"code":"NOC_CEMP","name":"NoC counter employee","tenantId":"pb.amritsar","id":null},{"code":"EGF_REPORT_VIEW","name":"Finance Report View","tenantId":"pb.amritsar","id":null},{"code":"QA_AUTOMATION","name":"QA Automation","tenantId":"pb.amritsar","id":null},{"code":"AssetReportViewer","name":"AssetReportViewer","tenantId":"pb.amritsar","id":null},{"code":"BPA_FIELD_INSPECTOR","name":"BPA Field Inspector","tenantId":"pb.amritsar","id":null},{"code":"TL_FIELD_INSPECTOR","name":"TL Field Inspector","tenantId":"pb.amritsar","id":null},{"code":"Asset Administrator","name":null,"tenantId":"pb.amritsar","id":null},{"code":"EGF_BILL_CREATOR","name":"EGF Bill Creator","tenantId":"pb.amritsar","id":null},{"code":"BPA_APPROVER","name":"BPA Services Approver","tenantId":"pb.amritsar","id":null},{"code":"WO_CREATOR","name":"WO Creator","tenantId":"pb.amritsar","id":null},{"code":"CEMP","name":"Counter Employee","tenantId":"pb.amritsar","id":null},{"code":"WS_CEMP","name":"WS Counter Employee","tenantId":"pb.amritsar","id":null},{"code":"BANK_COLL_OPERATOR","name":"Bank Collection Operator","tenantId":"pb.amritsar","id":null},{"code":"ANONYMUS","name":"Any User","tenantId":"pb.amritsar","id":null},{"code":"WS_FIELD_INSPECTOR","name":"WS Field Inspector","tenantId":"pb.amritsar","id":null},{"code":"FSM_ADMIN","name":"FSM Administrator","tenantId":"pb.amritsar","id":null},{"code":"BPAREG_EMPLOYEE","name":"BPAREG Employee","tenantId":"pb.amritsar","id":null},{"code":"COMMISSIONER","name":"Commissioner","tenantId":"pb.amritsar","id":null},{"code":"AIRPORT_AUTHORITY_APPROVER","name":"Airport authority Approver","tenantId":"pb.amritsar","id":null},{"code":"EGF_PAYMENT_CREATOR","name":"Finance Payment Creator","tenantId":"pb.amritsar","id":null},{"code":"TL_CREATOR","name":"TL Creator","tenantId":"pb.amritsar","id":null},{"code":"EGF_BILL_APPROVER","name":"EGF Bill Approver","tenantId":"pb.amritsar","id":null},{"code":"BPAREG_DOC_VERIFIER","name":"BPAREG doc verifier","tenantId":"pb.amritsar","id":null},{"code":"BPA_STRUCTURALENGINEER","name":"BPA Structural Engineer","tenantId":"pb.amritsar","id":null},{"code":"testonecode112234324","name":null,"tenantId":"pb.amritsar","id":null},{"code":"NOC_FIELD_INSPECTOR","name":"NoC Field Inpector","tenantId":"pb.amritsar","id":null},{"code":"GO","name":"Grievance Officer","tenantId":"pb.amritsar","id":null},{"code":"SW_CEMP","name":"SW Counter Employee","tenantId":"pb.amritsar","id":null},{"code":"FSM_CREATOR_EMP","name":"FSM Employee Application Creator","tenantId":"pb.amritsar","id":null},{"code":"SW_CLERK","name":"SW Clerk","tenantId":"pb.amritsar","id":null},{"code":"CFC","name":"Citizen Feedback Centre","tenantId":"pb.amritsar","id":null},{"code":"Property Approver","name":null,"tenantId":"pb.amritsar","id":null},{"code":"WORKS_FINANCIAL_APPROVER","name":"Financials Approver","tenantId":"pb.amritsar","id":null},{"code":"ANONYMOUS","name":"Anonymous User","tenantId":"pb.amritsar","id":null},{"code":"FSM_REPORT_VIEWER","name":"FSM Employee Report Viewer","tenantId":"pb.amritsar","id":null},{"code":"EMPLOYEE ADMIN","name":null,"tenantId":"pb.amritsar","id":null},{"code":"SW_DOC_VERIFIER","name":"SW Document Verifier","tenantId":"pb.amritsar","id":null},{"code":"DE_CREATOR","name":"Detailed Estimate Creator","tenantId":"pb.amritsar","id":null},{"code":"TL_APPROVER","name":"TL Approver","tenantId":"pb.amritsar","id":null},{"code":"PGR-ADMIN","name":"PGR Administrator","tenantId":"pb.amritsar","id":null},{"code":"CONTRACTOR_ADVANCE_CREATOR","name":"Contractor Advance creator","tenantId":"pb.amritsar","id":null},{"code":"BPA_TOWNPLANNER","name":"BPA Town Planner","tenantId":"pb.amritsar","id":null},{"code":"EGF_MASTER_ADMIN","name":"Finance Master Admin","tenantId":"pb.amritsar","id":null},{"code":"EGF_PAYMENT_APPROVER","name":"Finance Payment Approver","tenantId":"pb.amritsar","id":null},{"code":"DGRO","name":"Department Grievance Routing Officer","tenantId":"pb.amritsar","id":null},{"code":"FSM_VIEW_EMP","name":"FSM Employee Application Viewer","tenantId":"pb.amritsar","id":null},{"code":"CSC_COLL_OPERATOR","name":"CSC Collection Operator","tenantId":"pb.amritsar","id":null},{"code":"PTIS_MASTER","name":"PTIS Master","tenantId":"pb.amritsar","id":null},{"code":"FSM_DSO","name":"FSM Desluding Operator","tenantId":"pb.amritsar","id":null},{"code":"SW_FIELD_INSPECTOR","name":"SW Field Inspector","tenantId":"pb.amritsar","id":null},{"code":"CSR","name":"Customer Support Representative","tenantId":"pb.amritsar","id":null},{"code":"HRMS_ADMIN","name":"HRMS Admin","tenantId":"pb.amritsar","id":null},{"code":"EGF_VOUCHER_APPROVER","name":"Finance Voucher Approver","tenantId":"pb.amritsar","id":null},{"code":"WS_APPROVER","name":"WS Approver","tenantId":"pb.amritsar","id":null},{"code":"BPA_NOC_VERIFIER","name":"BPA NOC Verifier","tenantId":"pb.amritsar","id":null},{"code":"SYSTEM","name":"System user","tenantId":"pb.amritsar","id":null},{"code":"GA","name":"Grivance Administrator","tenantId":"pb.amritsar","id":null},{"code":"SYS_INTEGRATOR_FINANCE","name":"System Integrator Finance","tenantId":"pb.amritsar","id":null},{"code":"LOA_CREATOR","name":"LOA Creator","tenantId":"pb.amritsar","id":null},{"code":"GRO","name":"Grievance Routing Officer","tenantId":"pb.amritsar","id":null},{"code":"ULB Operator","name":null,"tenantId":"pb.amritsar","id":null},{"code":"BPA_BUILDER","name":"BPA Builder","tenantId":"pb.amritsar","id":null},{"code":"EMPLOYEE_FINANCE","name":"Employee Finance","tenantId":"pb.amritsar","id":null},{"code":"PGR_LME","name":"PGR Last Mile Employee","tenantId":"pb.amritsar","id":null},{"code":"COLL_REMIT_TO_BANK","name":"Collections Remitter","tenantId":"pb.amritsar","id":null},{"code":"PT_CEMP","name":"PT Counter Employee","tenantId":"pb.amritsar","id":null},{"code":"FIRE_NOC_APPROVER","name":"Fire Noc Department Approver","tenantId":"pb.amritsar","id":null},{"code":"WORKS_APPROVER","name":"Works Approver","tenantId":"pb.amritsar","id":null},{"code":"AE_CREATOR","name":"Abstract Estimate Creator","tenantId":"pb.amritsar","id":null},{"code":"CITY_ADMIN","name":"Admin of a ULB","tenantId":"pb.amritsar","id":null},{"code":"PT_FIELD_INSPECTOR","name":"PT Field Inspector","tenantId":"pb.amritsar","id":null},{"code":"FSM_DRIVER","name":"FSM Driver","tenantId":"pb.amritsar","id":null},{"code":"PTADMIN","name":"ULB Administrator","tenantId":"pb.amritsar","id":null},{"code":"WORKS_ADMINISTRATOR","name":"Works Administrator","tenantId":"pb.amritsar","id":null},{"code":"PT_DOC_VERIFIER","name":"PT Doc Verifier","tenantId":"pb.amritsar","id":null},{"code":"EMPLOYEE","name":"Employee","tenantId":"pb.amritsar","id":null},{"code":"COLL_RECEIPT_CREATOR","name":"Collections Receipt Creator","tenantId":"pb.amritsar","id":null},{"code":"TL_CEMP","name":"TL Counter Employee","tenantId":"pb.amritsar","id":null},{"code":"RO","name":"Redressal Officer","tenantId":"pb.amritsar","id":null},{"code":"COLL_REP_VIEW","name":"Collection Report Viewer","tenantId":"pb.amritsar","id":null},{"code":"UC_EMP","name":"Universal Collection Employee","tenantId":"pb.amritsar","id":null},{"code":"FSM_EMP_FSTPO","name":"FSM FSTP Opperator","tenantId":"pb.amritsar","id":null},{"code":"BPA_ENGINEER","name":"BPA Engineer","tenantId":"pb.amritsar","id":null},{"code":"BPA_VERIFIER","name":"BPA Services verifier","tenantId":"pb.amritsar","id":null},{"code":"PT_APPROVER","name":"PT Counter Approver","tenantId":"pb.amritsar","id":null},{"code":"STADMIN","name":"State Administrator","tenantId":"pb.amritsar","id":null},{"code":"WS_CLERK","name":"WS Clerk","tenantId":"pb.amritsar","id":null},{"code":"NOC_DOC_VERIFIER","name":"NoC Doc Verifier","tenantId":"pb.amritsar","id":null},{"code":"EGF_VOUCHER_CREATOR","name":"Finance Voucher Creator","tenantId":"pb.amritsar","id":null},{"code":"LEGACY_RECEIPT_CREATOR","name":"Legacy Receipt Creator","tenantId":"pb.amritsar","id":null},{"code":"WS_DOC_VERIFIER","name":"WS Document Verifier","tenantId":"pb.amritsar","id":null},{"code":"AssetCreator","name":"AssetCreator","tenantId":"pb.amritsar","id":null},{"code":"MB_CREATOR","name":"MB creator","tenantId":"pb.amritsar","id":null},{"code":"BPA_ARCHITECT","name":"BPA Architect","tenantId":"pb.amritsar","id":null},{"code":"testtwocode11234354","name":null,"tenantId":"pb.amritsar","id":null},{"code":"FEMP","name":"Field Employee","tenantId":"pb.amritsar","id":null},{"code":"PTIS_ADMIN","name":"PTIS Admin","tenantId":"pb.amritsar","id":null},{"code":"BPA_SUPERVISOR","name":"BPA Supervisor","tenantId":"pb.amritsar","id":null},{"code":"FSM_COLLECTOR","name":"FSM Payment Collector","tenantId":"pb.amritsar","id":null},{"code":"BPAREG_APPROVER","name":"BPAREG Approver","tenantId":"pb.amritsar","id":null},{"code":"EGF_ADMINISTRATOR","name":"Finance Adminsitrator","tenantId":"pb.amritsar","id":null},{"code":"FSM_EDITOR_EMP","name":"FSM Employee Application Editor","tenantId":"pb.amritsar","id":null},{"code":"COLL_OPERATOR","name":"Collection Operator","tenantId":"pb.amritsar","id":null},{"code":"TL_DOC_VERIFIER","name":"TL doc verifier","tenantId":"pb.amritsar","id":null},{"code":"TL_ADMIN","name":"TL Admin","tenantId":"pb.amritsar","id":null},{"code":"Property Verifier","name":null,"tenantId":"pb.amritsar","id":null},{"code":"NOC_APPROVER","name":"NoC counter Approver","tenantId":"pb.amritsar","id":null},{"code":"WORKS_BILL_CREATOR","name":"Works Bill Creator","tenantId":"pb.amritsar","id":null},{"code":"STORE INCHARGE","name":null,"tenantId":"pb.amritsar","id":null},{"code":"WORKS_MASTER_CREATOR","name":"Works Master creator","tenantId":"pb.amritsar","id":null},{"code":"SUPERUSER","name":"Super User","tenantId":"pb.amritsar","id":null},{"code":"directortestcode112234324","name":null,"tenantId":"pb.amritsar","id":null},{"code":"SYS_INTEGRATOR_WATER_SEW","name":"System Integrator W&amp;S","tenantId":"pb.amritsar","id":null},{"code":"FSM_DASHBOARD_VIEWER","name":"FSM Employee Dashboard Viewer","tenantId":"pb.amritsar","id":null},{"code":"SW_APPROVER","name":"SW Approver","tenantId":"pb.amritsar","id":null}],"name":"tvcrjhhwdc","tenantId":"pb.amritsar","emailId":"fcaae@auto.com","id":12138,"userName":"EMPAUTO","type":"EMPLOYEE","uuid":"959745fe-66bc-45b2-9a35-609ec994abd4"},"responseType":"arraybuffer","correlationId":"f03f9b72-e81a-4523-b6ab-757e27c8df4b"},"message":"some unknown error while creating: could not find property of type array in request body with name $.Bill.*"}</div><div class="step-row"><div class="step-container" id="1573"><div class="step-ref skipped">1573</div><div class="step-indent"> </div><div class="step-cell skipped">And def pdfCreateResponseHeader = responseHeaders</div></div><div class="time-cell skipped">0</div></div><div class="step-row"><div class="step-container" id="1574"><div class="step-ref skipped">1574</div><div class="step-indent"> </div><div class="step-cell skipped">And def pdfCreateResponseBody = response</div></div><div class="time-cell skipped">0</div></div><div class="step-row"><div class="step-container" id="1575"><div class="step-ref skipped">1575</div><div class="step-cell skipped">* match pdfCreateResponseBody.filestoreIds[0] == '#present'</div></div><div class="time-cell skipped">0</div></div><div class="step-row"><div class="step-container" id="1576"><div class="step-ref skipped">1576</div><div class="step-cell skipped">* pdfCreateResponseBody.message == pdfCreateConstant.expectedMessages.message</div></div><div class="time-cell skipped">0</div></div></div><div class="scenario"><div class="scenario-heading" id="[9:80]"><div class="heading-container"><div class="scenario-tags"><a class="badge badge-primary" href="karate-tags.html">negative</a><a class="badge badge-primary" href="karate-tags.html">pdf_create_inavlid_tenantid_08</a><a class="badge badge-primary" href="karate-tags.html">regression</a><a class="badge badge-primary" href="karate-tags.html">pdfservice</a><a class="badge badge-primary" href="karate-tags.html">coreServices</a></div><span class="scenario-keyword">Scenario: [9:80]</span><span class="scenario-name">"Verify generating PDF without tenant id and check for errors(all the modules)" </span></div><div class="scenario-time passed">ms: 2327</div></div><div class="step-row"><div class="step-container" id="[9:80]bg"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-cell passed">Background:</div></div><div class="time-cell passed"></div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-cell comment"># reading javascript utils for using generic methods</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1577"><div class="step-ref bg-step">1577</div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">33</div></div><div class="preformatted" data-parent="1577">15:37:42.088 karate.env:  
15:37:42.088 locale: en_IN 
15:37:42.090 tenantId: pb.amritsar</div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1578"><div class="step-ref bg-step">1578</div><div class="step-cell passed">* def pdfCreateConstant = read('../../core-services/constants/pdfService.yaml')</div></div><div class="time-cell passed">8</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1579"><div class="step-ref bg-step">1579</div><div class="step-cell passed">* call read('../../business-services/tests/collectionServicesCreate.feature@Create_PaymentWithValidBillID_01')</div></div><div class="time-cell passed">2066</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1579.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/tests/collectionServicesCreate.feature</div></div><div class="time-cell passed">2041</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1580"><div class="step-ref bg-step">1580</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/tests/billingServicesDemand.feature@create_01')</div></div><div class="time-cell passed">365</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1580.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/tests/billingServicesDemand.feature</div></div><div class="time-cell passed">318</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1581"><div class="step-ref bg-step">1581</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1582"><div class="step-ref bg-step">1582</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceDemandConstants = read('../../business-services/constants/billing-service-demand.yaml')</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1583"><div class="step-ref bg-step">1583</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">9</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1584"><div class="step-ref bg-step">1584</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1585"><div class="step-ref bg-step">1585</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def consumerType = mdmsStateBillingService.BusinessService[0].businessService</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1586"><div class="step-ref bg-step">1586</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = mdmsStateBillingService.BusinessService[0].code</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1587"><div class="step-ref bg-step">1587</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxPeriodFrom = getCurrentEpochTime()</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1588"><div class="step-ref bg-step">1588</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def daysFromToday = 2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1589"><div class="step-ref bg-step">1589</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxPeriodTo = getEpochDate(daysFromToday)</div></div><div class="time-cell passed">6</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1590"><div class="step-ref bg-step">1590</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxHeadMasterCodes = karate.jsonPath(mdmsStateBillingService, "$.TaxHeadMaster[?(@.service=='" + businessService + "')].code")</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1591"><div class="step-ref bg-step">1591</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxHeadMasterCode = taxHeadMasterCodes[randomNumber(taxHeadMasterCodes.length)]</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1592"><div class="step-ref bg-step">1592</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxAmount = 200</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1593"><div class="step-ref bg-step">1593</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionAmount = 0</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1594"><div class="step-ref bg-step">1594</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def minimumAmountPayable = 1</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Steps to create a new Employee through HRMS</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1595"><div class="step-ref bg-step">1595</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServiceDemandPretest.feature@createBillDemand')</div></div><div class="time-cell passed">262</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1595.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServiceDemandPretest.feature</div></div><div class="time-cell passed">243</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1596"><div class="step-ref bg-step">1596</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1597"><div class="step-ref bg-step">1597</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceDemandConstants = read('../../business-services/constants/billing-service-demand.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1598"><div class="step-ref bg-step">1598</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1599"><div class="step-ref bg-step">1599</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createDemandRequest = read('../../business-services/requestPayload/billing-service-demand/create.json')</div></div><div class="time-cell passed">19</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1600"><div class="step-ref bg-step">1600</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchDemandRequest = read('../../business-services/requestPayload/billing-service-demand/search.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1601"><div class="step-ref bg-step">1601</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def updateDemandRequest = read('../../business-services/requestPayload/billing-service-demand/update.json')</div></div><div class="time-cell passed">42</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1602"><div class="step-ref bg-step">1602</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">6</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1603"><div class="step-ref bg-step">1603</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url createDemandUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print createDemandRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1604"><div class="step-ref bg-step">1604</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request createDemandRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1605"><div class="step-ref bg-step">1605</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">153</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1606"><div class="step-ref bg-step">1606</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1607"><div class="step-ref bg-step">1607</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billingServiceDemandResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1608"><div class="step-ref bg-step">1608</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billingServiceDemandResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1609"><div class="step-ref bg-step">1609</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* print billingServiceDemandResponseBody</div></div><div class="time-cell passed">6</div></div><div class="preformatted" data-parent="1609">15:37:42.505 [print] {
  "ResponseInfo": {
    "ver": null,
    "resMsgId": null,
    "msgId": null,
    "apiId": null,
    "ts": null,
    "status": "201 CREATED"
  },
  "Demands": [
    {
      "taxPeriodFrom": 1628590062234,
      "businessService": "PT",
      "minimumAmountPayable": 1,
      "taxPeriodTo": 1628762862239,
      "fixedBillExpiryDate": null,
      "additionalDetails": null,
      "payer": null,
      "demandDetails": [
        {
          "demandId": "f15af6ba-ecd7-49b7-99e9-d3bfb82934bf",
          "taxHeadMasterCode": "PT_DECIMAL_CEILING_DEBIT",
          "collectionAmount": 0,
          "auditDetails": {
            "lastModifiedTime": 1628590062690,
            "createdBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
            "lastModifiedBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
            "createdTime": 1628590062690
          },
          "tenantId": "pb.amritsar",
          "id": "c0ddcbce-0f92-47c1-954d-3c6c8548ad7c",
          "taxAmount": 200,
          "additionalDetails": null
        }
      ],
      "consumerType": "PropertyTax",
      "auditDetails": {
        "lastModifiedTime": 1628590062690,
        "createdBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
        "lastModifiedBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
        "createdTime": 1628590062690
      },
      "tenantId": "pb.amritsar",
      "consumerCode": "Consumer-Code-Test-914369",
      "id": "f15af6ba-ecd7-49b7-99e9-d3bfb82934bf",
      "billExpiryTime": null,
      "isPaymentCompleted": false,
      "status": "ACTIVE"
    }
  ],
  "CollectedReceipt": null
}</div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1610"><div class="step-ref bg-step">1610</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def Demands = billingServiceDemandResponseBody.Demands</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1611"><div class="step-ref bg-step">1611</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def demandId = Demands[0].id</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1612"><div class="step-ref bg-step">1612</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def consumerCode = Demands[0].consumerCode</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the status Created</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1613"><div class="step-ref bg-step">1613</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* assert billingServiceDemandResponseBody.ResponseInfo.status == commonConstants.expectedStatus.created</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand id is present</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1614"><div class="step-ref bg-step">1614</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].id == "#present"</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the tenantId of demand response is equal with current tenantId</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1615"><div class="step-ref bg-step">1615</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].tenantId == tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the consumer code of demand response is equal with defined consumerCode</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1616"><div class="step-ref bg-step">1616</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].consumerCode == consumerCode</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the consumerType of demand response is equal with defined consumerType</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1617"><div class="step-ref bg-step">1617</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].consumerType == consumerType</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the businessService of demand response is equal with defined businessService</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1618"><div class="step-ref bg-step">1618</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].businessService == businessService</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxPeriodFrom of demand response is equal with defined taxPeriodFrom</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1619"><div class="step-ref bg-step">1619</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].taxPeriodFrom == taxPeriodFrom</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxPeriodTo of demand response is equal with defined taxPeriodTo</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1620"><div class="step-ref bg-step">1620</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].taxPeriodTo == taxPeriodTo</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand details id is present in demand response body</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1621"><div class="step-ref bg-step">1621</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].id == "#present"</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demandId is present in demand response body</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1622"><div class="step-ref bg-step">1622</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].demandId == "#present"</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxHeadMasterCode of demand response is equal with defined taxHeadMasterCode</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1623"><div class="step-ref bg-step">1623</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].taxHeadMasterCode == taxHeadMasterCode</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxAmount of demand response is equal with defined taxAmount</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1624"><div class="step-ref bg-step">1624</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].taxAmount == taxAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the collectionAmount of demand response is equal with defined collectionAmount</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1625"><div class="step-ref bg-step">1625</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].collectionAmount == collectionAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the minimumAmountPayable of demand response is equal with defined minimumAmountPayable</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1626"><div class="step-ref bg-step">1626</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].minimumAmountPayable == minimumAmountPayable</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand status is equal with expected demand status `ACTIVE`</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1627"><div class="step-ref bg-step">1627</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].status == billingServiceDemandConstants.parameters.status</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1628"><div class="step-ref bg-step">1628</div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1629"><div class="step-ref bg-step">1629</div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1630"><div class="step-ref bg-step">1630</div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1631"><div class="step-ref bg-step">1631</div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1632"><div class="step-ref bg-step">1632</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServicePretest.feature@fetchBill')</div></div><div class="time-cell passed">212</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1632.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServicePretest.feature</div></div><div class="time-cell passed">197</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1633"><div class="step-ref bg-step">1633</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceConstants = read('../../business-services/constants/billing-service.yaml')</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1634"><div class="step-ref bg-step">1634</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionServiceConstants = read('../../business-services/constants/apportionService.yaml')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1635"><div class="step-ref bg-step">1635</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = billingServiceConstants.parameters.businessService</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1636"><div class="step-ref bg-step">1636</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionbusinessService = apportionServiceConstants.parameters.businessService</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1637"><div class="step-ref bg-step">1637</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason1 = apportionServiceConstants.parameters.reason1</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1638"><div class="step-ref bg-step">1638</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason2 = apportionServiceConstants.parameters.reason2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1639"><div class="step-ref bg-step">1639</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason3 = apportionServiceConstants.parameters.reason3</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1640"><div class="step-ref bg-step">1640</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason4 = apportionServiceConstants.parameters.reason4</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment">#* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1641"><div class="step-ref bg-step">1641</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillRequest = read('../../business-services/requestPayload/collection-services/fetchBill.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1642"><div class="step-ref bg-step">1642</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillRequest = read('../../business-services/requestPayload/collection-services/cancelBill.json')</div></div><div class="time-cell passed">7</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1643"><div class="step-ref bg-step">1643</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1644"><div class="step-ref bg-step">1644</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillParams =</div></div><div class="time-cell passed">0</div></div><div class="preformatted" data-parent="1644">{
   consumerCode: '#(consumerCode)',
   businessService: '#(businessService)',
   tenantId: '#(tenantId)'
}</div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1645"><div class="step-ref bg-step">1645</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url fetchBill</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1646"><div class="step-ref bg-step">1646</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And params fetchBillParams</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillParams</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1647"><div class="step-ref bg-step">1647</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request fetchBillRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1648"><div class="step-ref bg-step">1648</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">158</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillResponse</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1649"><div class="step-ref bg-step">1649</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1650"><div class="step-ref bg-step">1650</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def fetchBillResponse = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1651"><div class="step-ref bg-step">1651</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmount = response.Bill[0].totalAmount</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1652"><div class="step-ref bg-step">1652</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billId = response.Bill[0].id</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1653"><div class="step-ref bg-step">1653</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def txnAmount = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1654"><div class="step-ref bg-step">1654</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmountPaid = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1655"><div class="step-ref bg-step">1655</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalDue = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1656"><div class="step-ref bg-step">1656</div><div class="step-indent"> </div><div class="step-cell passed">* def paidBillIdError = collectionServicesConstants.errorMessages.paidBillId</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1657"><div class="step-ref bg-step">1657</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillIdError = collectionServicesConstants.errorMessages.invalidBillId</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1658"><div class="step-ref bg-step">1658</div><div class="step-indent"> </div><div class="step-cell passed">* def totalAmountPaidError = collectionServicesConstants.errorMessages.totalAmountPaidNull</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1659"><div class="step-ref bg-step">1659</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentModeError = collectionServicesConstants.errorMessages.invalidPaymentMode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1660"><div class="step-ref bg-step">1660</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantIdError = commonConstants.errorMessages.invalidTenantIdError</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1661"><div class="step-ref bg-step">1661</div><div class="step-indent"> </div><div class="step-cell passed">* def nullTenantIdError = commonConstants.errorMessages.nullParameterError</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1662"><div class="step-ref bg-step">1662</div><div class="step-indent"> </div><div class="step-cell passed">* def reason = collectionServicesConstants.parameters.reason</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1663"><div class="step-ref bg-step">1663</div><div class="step-indent"> </div><div class="step-cell passed">* def action = collectionServicesConstants.parameters.action</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1664"><div class="step-ref bg-step">1664</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDateError = collectionServicesConstants.errorMessages.instrumentDateAsNull</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1665"><div class="step-ref bg-step">1665</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentPastDateError = collectionServicesConstants.errorMessages.instrumentDatePastNinetyDays</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1666"><div class="step-ref bg-step">1666</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentFutureDateError = collectionServicesConstants.errorMessages.futureInstrumentDate</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1667"><div class="step-ref bg-step">1667</div><div class="step-indent"> </div><div class="step-cell passed">* def moreThanDueAmountError = collectionServicesConstants.errorMessages.moreThanDueAmount</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1668"><div class="step-ref bg-step">1668</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberError = collectionServicesConstants.errorMessages.instrumentNumberAsEmptyString</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1669"><div class="step-ref bg-step">1669</div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberError = collectionServicesConstants.errorMessages.transactionNumberAsEmptyString</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1670"><div class="step-ref bg-step">1670</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/collectionServicesPretest.feature@createPayment')</div></div><div class="time-cell passed">462</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1670.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/collectionServicesPretest.feature</div></div><div class="time-cell passed">439</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1671"><div class="step-ref bg-step">1671</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1672"><div class="step-ref bg-step">1672</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1673"><div class="step-ref bg-step">1673</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1674"><div class="step-ref bg-step">1674</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def tenantId = tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1675"><div class="step-ref bg-step">1675</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentMode = collectionServicesConstants.parameters.paymentMode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1676"><div class="step-ref bg-step">1676</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBy = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1677"><div class="step-ref bg-step">1677</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1678"><div class="step-ref bg-step">1678</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def payerName = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1679"><div class="step-ref bg-step">1679</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalDue = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1680"><div class="step-ref bg-step">1680</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumber = collectionServicesConstants.parameters.transactionNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1681"><div class="step-ref bg-step">1681</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumber = collectionServicesConstants.parameters.instrumentNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1682"><div class="step-ref bg-step">1682</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCard = collectionServicesConstants.parameters.paymentMode2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1683"><div class="step-ref bg-step">1683</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCheque = collectionServicesConstants.parameters.paymentModeForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1684"><div class="step-ref bg-step">1684</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberForCheque = collectionServicesConstants.parameters.transactionNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1685"><div class="step-ref bg-step">1685</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberForCheque = collectionServicesConstants.parameters.instrumentNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1686"><div class="step-ref bg-step">1686</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1687"><div class="step-ref bg-step">1687</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def ifscCode = collectionServicesConstants.parameters.ifscCode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1688"><div class="step-ref bg-step">1688</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1689"><div class="step-ref bg-step">1689</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1690"><div class="step-ref bg-step">1690</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequest = read('../../business-services/requestPayload/collection-services/create.json')</div></div><div class="time-cell passed">16</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1691"><div class="step-ref bg-step">1691</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def workflowRequest = read('../../business-services/requestPayload/collection-services/workflow.json')</div></div><div class="time-cell passed">6</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1692"><div class="step-ref bg-step">1692</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPaymentRequest = read('../../business-services/requestPayload/collection-services/search.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1693"><div class="step-ref bg-step">1693</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTreceiptcount = read('../../business-services/requestPayload/collection-services/receiptcount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1694"><div class="step-ref bg-step">1694</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequestForCheque = read('../../business-services/requestPayload/collection-services/createPaymentWithCheque.json')</div></div><div class="time-cell passed">9</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1695"><div class="step-ref bg-step">1695</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def eChallanPaymentcount = read('../../business-services/requestPayload/collection-services/echallancount.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1696"><div class="step-ref bg-step">1696</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1697"><div class="step-ref bg-step">1697</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = 'invalid_'+randomNumber(4)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1698"><div class="step-ref bg-step">1698</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBusinessId = 'PT'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1699"><div class="step-ref bg-step">1699</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentMode = randomString(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1700"><div class="step-ref bg-step">1700</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantId = randomString(5)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1701"><div class="step-ref bg-step">1701</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def negativeTotalAmount = '-'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1702"><div class="step-ref bg-step">1702</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url payment</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1703"><div class="step-ref bg-step">1703</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request createPaymentRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print createPaymentRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1704"><div class="step-ref bg-step">1704</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">357</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1705"><div class="step-ref bg-step">1705</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1706"><div class="step-ref bg-step">1706</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1707"><div class="step-ref bg-step">1707</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1708"><div class="step-ref bg-step">1708</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def Payments = collectionServicesResponseBody.Payments</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1709"><div class="step-ref bg-step">1709</div><div class="step-indent"> </div><div class="step-cell passed">* match response.ResponseInfo.status == '200 OK'</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1710"><div class="step-ref bg-step">1710</div><div class="step-indent"> </div><div class="step-cell passed">* def paymentId = collectionServicesResponseBody.Payments[0].id</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1711"><div class="step-ref bg-step">1711</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/collectionServicesPretest.feature@processworkflow')</div></div><div class="time-cell passed">978</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1711.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/collectionServicesPretest.feature</div></div><div class="time-cell passed">956</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1712"><div class="step-ref bg-step">1712</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">12</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1713"><div class="step-ref bg-step">1713</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1714"><div class="step-ref bg-step">1714</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1715"><div class="step-ref bg-step">1715</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def tenantId = tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1716"><div class="step-ref bg-step">1716</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentMode = collectionServicesConstants.parameters.paymentMode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1717"><div class="step-ref bg-step">1717</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBy = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1718"><div class="step-ref bg-step">1718</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1719"><div class="step-ref bg-step">1719</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def payerName = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1720"><div class="step-ref bg-step">1720</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalDue = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1721"><div class="step-ref bg-step">1721</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumber = collectionServicesConstants.parameters.transactionNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1722"><div class="step-ref bg-step">1722</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumber = collectionServicesConstants.parameters.instrumentNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1723"><div class="step-ref bg-step">1723</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCard = collectionServicesConstants.parameters.paymentMode2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1724"><div class="step-ref bg-step">1724</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCheque = collectionServicesConstants.parameters.paymentModeForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1725"><div class="step-ref bg-step">1725</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberForCheque = collectionServicesConstants.parameters.transactionNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1726"><div class="step-ref bg-step">1726</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberForCheque = collectionServicesConstants.parameters.instrumentNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1727"><div class="step-ref bg-step">1727</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1728"><div class="step-ref bg-step">1728</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def ifscCode = collectionServicesConstants.parameters.ifscCode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1729"><div class="step-ref bg-step">1729</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1730"><div class="step-ref bg-step">1730</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1731"><div class="step-ref bg-step">1731</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequest = read('../../business-services/requestPayload/collection-services/create.json')</div></div><div class="time-cell passed">7</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1732"><div class="step-ref bg-step">1732</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def workflowRequest = read('../../business-services/requestPayload/collection-services/workflow.json')</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1733"><div class="step-ref bg-step">1733</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPaymentRequest = read('../../business-services/requestPayload/collection-services/search.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1734"><div class="step-ref bg-step">1734</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTreceiptcount = read('../../business-services/requestPayload/collection-services/receiptcount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1735"><div class="step-ref bg-step">1735</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequestForCheque = read('../../business-services/requestPayload/collection-services/createPaymentWithCheque.json')</div></div><div class="time-cell passed">12</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1736"><div class="step-ref bg-step">1736</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def eChallanPaymentcount = read('../../business-services/requestPayload/collection-services/echallancount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1737"><div class="step-ref bg-step">1737</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1738"><div class="step-ref bg-step">1738</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = 'invalid_'+randomNumber(4)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1739"><div class="step-ref bg-step">1739</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBusinessId = 'PT'+randomNumber(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1740"><div class="step-ref bg-step">1740</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentMode = randomString(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1741"><div class="step-ref bg-step">1741</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantId = randomString(5)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1742"><div class="step-ref bg-step">1742</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def negativeTotalAmount = '-'+randomNumber(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1743"><div class="step-ref bg-step">1743</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url collectionServiceWorkflowUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1744"><div class="step-ref bg-step">1744</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request workflowRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print workflowRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1745"><div class="step-ref bg-step">1745</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">876</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1746"><div class="step-ref bg-step">1746</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1747"><div class="step-ref bg-step">1747</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[9:80]bg"><div class="step-container" id="1748"><div class="step-ref bg-step">1748</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1749"><div class="step-ref passed">1749</div><div class="step-cell passed">* def key = pdfCreateConstant.parameters.valid.keyForTl</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-cell comment"># calling create pdf pretest</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="1750"><div class="step-ref passed">1750</div><div class="step-cell passed">* call read('../../core-services/pretests/pdfServiceCreate.feature@createPdfWithoutTenantIdError')</div></div><div class="time-cell passed">213</div></div><div class="step-row"><div class="step-container" id="1750.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-cell passed">com/egov/core-services/tests/../../core-services/pretests/pdfServiceCreate.feature</div></div><div class="time-cell passed">200</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-cell comment"># * call read('../../business-services/tests/collectionServicesCreate.feature@Create_PaymentWithValidBillID_01')</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-cell comment">#* def Payments = Payments</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="1751"><div class="step-ref passed">1751</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayload = read('../../core-services/requestPayload/pdf-service/pdfCreate.json')</div></div><div class="time-cell passed">7</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-cell comment"># initializing pdf create payload objects</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="1752"><div class="step-ref passed">1752</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayloadFirst = pdfCreatePayload.TL</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="1753"><div class="step-ref passed">1753</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayloadSecond = pdfCreatePayload.PT</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="1754"><div class="step-ref passed">1754</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayloadThird = pdfCreatePayload.FireNoc</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="1755"><div class="step-ref passed">1755</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayloadFourth = pdfCreatePayload.WS</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="1756"><div class="step-ref passed">1756</div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="1757"><div class="step-ref passed">1757</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreateParam =</div></div><div class="time-cell passed">1</div></div><div class="preformatted" data-parent="1757">{
 key: '#(key)'
}</div><div class="step-row"><div class="step-container" id="1758"><div class="step-ref passed">1758</div><div class="step-indent"> </div><div class="step-cell passed">Given url createPdf</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1759"><div class="step-ref passed">1759</div><div class="step-indent"> </div><div class="step-cell passed">And params pdfCreateParam</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1760"><div class="step-ref passed">1760</div><div class="step-indent"> </div><div class="step-cell passed">And request pdfCreatePayloadFirst</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1761"><div class="step-ref passed">1761</div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">185</div></div><div class="step-row"><div class="step-container" id="1762"><div class="step-ref passed">1762</div><div class="step-indent"> </div><div class="step-cell passed">Then status 400</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1763"><div class="step-ref passed">1763</div><div class="step-indent"> </div><div class="step-cell passed">And def pdfCreateResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1764"><div class="step-ref passed">1764</div><div class="step-indent"> </div><div class="step-cell passed">And def pdfCreateResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1765"><div class="step-ref passed">1765</div><div class="step-cell passed">* def pdfCreate = pdfCreateResponseBody.message</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="1766"><div class="step-ref passed">1766</div><div class="step-cell passed">* assert pdfCreate == pdfCreateConstant.errorMessages.invalidTenantId</div></div><div class="time-cell passed">2</div></div></div><div class="scenario"><div class="scenario-heading" id="[10:89]"><div class="heading-container"><div class="scenario-tags"><a class="badge badge-primary" href="karate-tags.html">negative</a><a class="badge badge-primary" href="karate-tags.html">regression</a><a class="badge badge-primary" href="karate-tags.html">pdfservice</a><a class="badge badge-primary" href="karate-tags.html">coreServices</a><a class="badge badge-primary" href="karate-tags.html">pdf_create_invalid_key_09</a></div><span class="scenario-keyword">Scenario: [10:89]</span><span class="scenario-name">"Verify generating PDF invalid/nonexistant or by not passing key and check for errors(all the modules)" </span></div><div class="scenario-time passed">ms: 3099</div></div><div class="step-row"><div class="step-container" id="[10:89]bg"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-cell passed">Background:</div></div><div class="time-cell passed"></div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-cell comment"># reading javascript utils for using generic methods</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1767"><div class="step-ref bg-step">1767</div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">16</div></div><div class="preformatted" data-parent="1767">15:37:44.486 karate.env:  
15:37:44.486 locale: en_IN 
15:37:44.487 tenantId: pb.amritsar</div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1768"><div class="step-ref bg-step">1768</div><div class="step-cell passed">* def pdfCreateConstant = read('../../core-services/constants/pdfService.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1769"><div class="step-ref bg-step">1769</div><div class="step-cell passed">* call read('../../business-services/tests/collectionServicesCreate.feature@Create_PaymentWithValidBillID_01')</div></div><div class="time-cell passed">2858</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1769.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/tests/collectionServicesCreate.feature</div></div><div class="time-cell passed">2837</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1770"><div class="step-ref bg-step">1770</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/tests/billingServicesDemand.feature@create_01')</div></div><div class="time-cell passed">319</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1770.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/tests/billingServicesDemand.feature</div></div><div class="time-cell passed">277</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1771"><div class="step-ref bg-step">1771</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1772"><div class="step-ref bg-step">1772</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceDemandConstants = read('../../business-services/constants/billing-service-demand.yaml')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1773"><div class="step-ref bg-step">1773</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1774"><div class="step-ref bg-step">1774</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1775"><div class="step-ref bg-step">1775</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def consumerType = mdmsStateBillingService.BusinessService[0].businessService</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1776"><div class="step-ref bg-step">1776</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = mdmsStateBillingService.BusinessService[0].code</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1777"><div class="step-ref bg-step">1777</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxPeriodFrom = getCurrentEpochTime()</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1778"><div class="step-ref bg-step">1778</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def daysFromToday = 2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1779"><div class="step-ref bg-step">1779</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxPeriodTo = getEpochDate(daysFromToday)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1780"><div class="step-ref bg-step">1780</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxHeadMasterCodes = karate.jsonPath(mdmsStateBillingService, "$.TaxHeadMaster[?(@.service=='" + businessService + "')].code")</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1781"><div class="step-ref bg-step">1781</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxHeadMasterCode = taxHeadMasterCodes[randomNumber(taxHeadMasterCodes.length)]</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1782"><div class="step-ref bg-step">1782</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxAmount = 200</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1783"><div class="step-ref bg-step">1783</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionAmount = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1784"><div class="step-ref bg-step">1784</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def minimumAmountPayable = 1</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Steps to create a new Employee through HRMS</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1785"><div class="step-ref bg-step">1785</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServiceDemandPretest.feature@createBillDemand')</div></div><div class="time-cell passed">238</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1785.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServiceDemandPretest.feature</div></div><div class="time-cell passed">228</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1786"><div class="step-ref bg-step">1786</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1787"><div class="step-ref bg-step">1787</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceDemandConstants = read('../../business-services/constants/billing-service-demand.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1788"><div class="step-ref bg-step">1788</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1789"><div class="step-ref bg-step">1789</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createDemandRequest = read('../../business-services/requestPayload/billing-service-demand/create.json')</div></div><div class="time-cell passed">14</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1790"><div class="step-ref bg-step">1790</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchDemandRequest = read('../../business-services/requestPayload/billing-service-demand/search.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1791"><div class="step-ref bg-step">1791</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def updateDemandRequest = read('../../business-services/requestPayload/billing-service-demand/update.json')</div></div><div class="time-cell passed">12</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1792"><div class="step-ref bg-step">1792</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1793"><div class="step-ref bg-step">1793</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url createDemandUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print createDemandRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1794"><div class="step-ref bg-step">1794</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request createDemandRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1795"><div class="step-ref bg-step">1795</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">183</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1796"><div class="step-ref bg-step">1796</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1797"><div class="step-ref bg-step">1797</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billingServiceDemandResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1798"><div class="step-ref bg-step">1798</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billingServiceDemandResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1799"><div class="step-ref bg-step">1799</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* print billingServiceDemandResponseBody</div></div><div class="time-cell passed">0</div></div><div class="preformatted" data-parent="1799">15:37:44.831 [print] {
  "ResponseInfo": {
    "ver": null,
    "resMsgId": null,
    "msgId": null,
    "apiId": null,
    "ts": null,
    "status": "201 CREATED"
  },
  "Demands": [
    {
      "taxPeriodFrom": 1628590064585,
      "businessService": "PT",
      "minimumAmountPayable": 1,
      "taxPeriodTo": 1628762864588,
      "fixedBillExpiryDate": null,
      "additionalDetails": null,
      "payer": null,
      "demandDetails": [
        {
          "demandId": "0bab115c-7d00-47ca-917c-5cdf2514c942",
          "taxHeadMasterCode": "PT_ADVANCE_CARRYFORWARD",
          "collectionAmount": 0,
          "auditDetails": {
            "lastModifiedTime": 1628590064992,
            "createdBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
            "lastModifiedBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
            "createdTime": 1628590064992
          },
          "tenantId": "pb.amritsar",
          "id": "6241e3a1-0924-46b1-85b4-b78796fe1406",
          "taxAmount": 200,
          "additionalDetails": null
        }
      ],
      "consumerType": "PropertyTax",
      "auditDetails": {
        "lastModifiedTime": 1628590064992,
        "createdBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
        "lastModifiedBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
        "createdTime": 1628590064992
      },
      "tenantId": "pb.amritsar",
      "consumerCode": "Consumer-Code-Test-623752",
      "id": "0bab115c-7d00-47ca-917c-5cdf2514c942",
      "billExpiryTime": null,
      "isPaymentCompleted": false,
      "status": "ACTIVE"
    }
  ],
  "CollectedReceipt": null
}</div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1800"><div class="step-ref bg-step">1800</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def Demands = billingServiceDemandResponseBody.Demands</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1801"><div class="step-ref bg-step">1801</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def demandId = Demands[0].id</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1802"><div class="step-ref bg-step">1802</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def consumerCode = Demands[0].consumerCode</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the status Created</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1803"><div class="step-ref bg-step">1803</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* assert billingServiceDemandResponseBody.ResponseInfo.status == commonConstants.expectedStatus.created</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand id is present</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1804"><div class="step-ref bg-step">1804</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].id == "#present"</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the tenantId of demand response is equal with current tenantId</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1805"><div class="step-ref bg-step">1805</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].tenantId == tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the consumer code of demand response is equal with defined consumerCode</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1806"><div class="step-ref bg-step">1806</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].consumerCode == consumerCode</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the consumerType of demand response is equal with defined consumerType</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1807"><div class="step-ref bg-step">1807</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].consumerType == consumerType</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the businessService of demand response is equal with defined businessService</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1808"><div class="step-ref bg-step">1808</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].businessService == businessService</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxPeriodFrom of demand response is equal with defined taxPeriodFrom</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1809"><div class="step-ref bg-step">1809</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].taxPeriodFrom == taxPeriodFrom</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxPeriodTo of demand response is equal with defined taxPeriodTo</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1810"><div class="step-ref bg-step">1810</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].taxPeriodTo == taxPeriodTo</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand details id is present in demand response body</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1811"><div class="step-ref bg-step">1811</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].id == "#present"</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demandId is present in demand response body</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1812"><div class="step-ref bg-step">1812</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].demandId == "#present"</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxHeadMasterCode of demand response is equal with defined taxHeadMasterCode</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1813"><div class="step-ref bg-step">1813</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].taxHeadMasterCode == taxHeadMasterCode</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxAmount of demand response is equal with defined taxAmount</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1814"><div class="step-ref bg-step">1814</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].taxAmount == taxAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the collectionAmount of demand response is equal with defined collectionAmount</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1815"><div class="step-ref bg-step">1815</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].collectionAmount == collectionAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the minimumAmountPayable of demand response is equal with defined minimumAmountPayable</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1816"><div class="step-ref bg-step">1816</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].minimumAmountPayable == minimumAmountPayable</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand status is equal with expected demand status `ACTIVE`</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1817"><div class="step-ref bg-step">1817</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].status == billingServiceDemandConstants.parameters.status</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1818"><div class="step-ref bg-step">1818</div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1819"><div class="step-ref bg-step">1819</div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1820"><div class="step-ref bg-step">1820</div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1821"><div class="step-ref bg-step">1821</div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1822"><div class="step-ref bg-step">1822</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServicePretest.feature@fetchBill')</div></div><div class="time-cell passed">208</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1822.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServicePretest.feature</div></div><div class="time-cell passed">194</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1823"><div class="step-ref bg-step">1823</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceConstants = read('../../business-services/constants/billing-service.yaml')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1824"><div class="step-ref bg-step">1824</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionServiceConstants = read('../../business-services/constants/apportionService.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1825"><div class="step-ref bg-step">1825</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = billingServiceConstants.parameters.businessService</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1826"><div class="step-ref bg-step">1826</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionbusinessService = apportionServiceConstants.parameters.businessService</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1827"><div class="step-ref bg-step">1827</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason1 = apportionServiceConstants.parameters.reason1</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1828"><div class="step-ref bg-step">1828</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason2 = apportionServiceConstants.parameters.reason2</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1829"><div class="step-ref bg-step">1829</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason3 = apportionServiceConstants.parameters.reason3</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1830"><div class="step-ref bg-step">1830</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason4 = apportionServiceConstants.parameters.reason4</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment">#* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1831"><div class="step-ref bg-step">1831</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillRequest = read('../../business-services/requestPayload/collection-services/fetchBill.json')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1832"><div class="step-ref bg-step">1832</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillRequest = read('../../business-services/requestPayload/collection-services/cancelBill.json')</div></div><div class="time-cell passed">6</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1833"><div class="step-ref bg-step">1833</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1834"><div class="step-ref bg-step">1834</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillParams =</div></div><div class="time-cell passed">0</div></div><div class="preformatted" data-parent="1834">{
   consumerCode: '#(consumerCode)',
   businessService: '#(businessService)',
   tenantId: '#(tenantId)'
}</div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1835"><div class="step-ref bg-step">1835</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url fetchBill</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1836"><div class="step-ref bg-step">1836</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And params fetchBillParams</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillParams</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1837"><div class="step-ref bg-step">1837</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request fetchBillRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1838"><div class="step-ref bg-step">1838</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">164</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillResponse</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1839"><div class="step-ref bg-step">1839</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1840"><div class="step-ref bg-step">1840</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def fetchBillResponse = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1841"><div class="step-ref bg-step">1841</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmount = response.Bill[0].totalAmount</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1842"><div class="step-ref bg-step">1842</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billId = response.Bill[0].id</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1843"><div class="step-ref bg-step">1843</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def txnAmount = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1844"><div class="step-ref bg-step">1844</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmountPaid = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1845"><div class="step-ref bg-step">1845</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalDue = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1846"><div class="step-ref bg-step">1846</div><div class="step-indent"> </div><div class="step-cell passed">* def paidBillIdError = collectionServicesConstants.errorMessages.paidBillId</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1847"><div class="step-ref bg-step">1847</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillIdError = collectionServicesConstants.errorMessages.invalidBillId</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1848"><div class="step-ref bg-step">1848</div><div class="step-indent"> </div><div class="step-cell passed">* def totalAmountPaidError = collectionServicesConstants.errorMessages.totalAmountPaidNull</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1849"><div class="step-ref bg-step">1849</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentModeError = collectionServicesConstants.errorMessages.invalidPaymentMode</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1850"><div class="step-ref bg-step">1850</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantIdError = commonConstants.errorMessages.invalidTenantIdError</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1851"><div class="step-ref bg-step">1851</div><div class="step-indent"> </div><div class="step-cell passed">* def nullTenantIdError = commonConstants.errorMessages.nullParameterError</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1852"><div class="step-ref bg-step">1852</div><div class="step-indent"> </div><div class="step-cell passed">* def reason = collectionServicesConstants.parameters.reason</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1853"><div class="step-ref bg-step">1853</div><div class="step-indent"> </div><div class="step-cell passed">* def action = collectionServicesConstants.parameters.action</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1854"><div class="step-ref bg-step">1854</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDateError = collectionServicesConstants.errorMessages.instrumentDateAsNull</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1855"><div class="step-ref bg-step">1855</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentPastDateError = collectionServicesConstants.errorMessages.instrumentDatePastNinetyDays</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1856"><div class="step-ref bg-step">1856</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentFutureDateError = collectionServicesConstants.errorMessages.futureInstrumentDate</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1857"><div class="step-ref bg-step">1857</div><div class="step-indent"> </div><div class="step-cell passed">* def moreThanDueAmountError = collectionServicesConstants.errorMessages.moreThanDueAmount</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1858"><div class="step-ref bg-step">1858</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberError = collectionServicesConstants.errorMessages.instrumentNumberAsEmptyString</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1859"><div class="step-ref bg-step">1859</div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberError = collectionServicesConstants.errorMessages.transactionNumberAsEmptyString</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1860"><div class="step-ref bg-step">1860</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/collectionServicesPretest.feature@createPayment')</div></div><div class="time-cell passed">1379</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1860.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/collectionServicesPretest.feature</div></div><div class="time-cell passed">1361</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1861"><div class="step-ref bg-step">1861</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1862"><div class="step-ref bg-step">1862</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1863"><div class="step-ref bg-step">1863</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1864"><div class="step-ref bg-step">1864</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def tenantId = tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1865"><div class="step-ref bg-step">1865</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentMode = collectionServicesConstants.parameters.paymentMode</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1866"><div class="step-ref bg-step">1866</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBy = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1867"><div class="step-ref bg-step">1867</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">6</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1868"><div class="step-ref bg-step">1868</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def payerName = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1869"><div class="step-ref bg-step">1869</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalDue = 0</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1870"><div class="step-ref bg-step">1870</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumber = collectionServicesConstants.parameters.transactionNumber</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1871"><div class="step-ref bg-step">1871</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumber = collectionServicesConstants.parameters.instrumentNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1872"><div class="step-ref bg-step">1872</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCard = collectionServicesConstants.parameters.paymentMode2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1873"><div class="step-ref bg-step">1873</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCheque = collectionServicesConstants.parameters.paymentModeForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1874"><div class="step-ref bg-step">1874</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberForCheque = collectionServicesConstants.parameters.transactionNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1875"><div class="step-ref bg-step">1875</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberForCheque = collectionServicesConstants.parameters.instrumentNumberForCheque</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1876"><div class="step-ref bg-step">1876</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1877"><div class="step-ref bg-step">1877</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def ifscCode = collectionServicesConstants.parameters.ifscCode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1878"><div class="step-ref bg-step">1878</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1879"><div class="step-ref bg-step">1879</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1880"><div class="step-ref bg-step">1880</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequest = read('../../business-services/requestPayload/collection-services/create.json')</div></div><div class="time-cell passed">12</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1881"><div class="step-ref bg-step">1881</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def workflowRequest = read('../../business-services/requestPayload/collection-services/workflow.json')</div></div><div class="time-cell passed">6</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1882"><div class="step-ref bg-step">1882</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPaymentRequest = read('../../business-services/requestPayload/collection-services/search.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1883"><div class="step-ref bg-step">1883</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTreceiptcount = read('../../business-services/requestPayload/collection-services/receiptcount.json')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1884"><div class="step-ref bg-step">1884</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequestForCheque = read('../../business-services/requestPayload/collection-services/createPaymentWithCheque.json')</div></div><div class="time-cell passed">13</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1885"><div class="step-ref bg-step">1885</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def eChallanPaymentcount = read('../../business-services/requestPayload/collection-services/echallancount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1886"><div class="step-ref bg-step">1886</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">937</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1887"><div class="step-ref bg-step">1887</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = 'invalid_'+randomNumber(4)</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1888"><div class="step-ref bg-step">1888</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBusinessId = 'PT'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1889"><div class="step-ref bg-step">1889</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentMode = randomString(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1890"><div class="step-ref bg-step">1890</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantId = randomString(5)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1891"><div class="step-ref bg-step">1891</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def negativeTotalAmount = '-'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1892"><div class="step-ref bg-step">1892</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url payment</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1893"><div class="step-ref bg-step">1893</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request createPaymentRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print createPaymentRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1894"><div class="step-ref bg-step">1894</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">336</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1895"><div class="step-ref bg-step">1895</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1896"><div class="step-ref bg-step">1896</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1897"><div class="step-ref bg-step">1897</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1898"><div class="step-ref bg-step">1898</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def Payments = collectionServicesResponseBody.Payments</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1899"><div class="step-ref bg-step">1899</div><div class="step-indent"> </div><div class="step-cell passed">* match response.ResponseInfo.status == '200 OK'</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1900"><div class="step-ref bg-step">1900</div><div class="step-indent"> </div><div class="step-cell passed">* def paymentId = collectionServicesResponseBody.Payments[0].id</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1901"><div class="step-ref bg-step">1901</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/collectionServicesPretest.feature@processworkflow')</div></div><div class="time-cell passed">903</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1901.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/collectionServicesPretest.feature</div></div><div class="time-cell passed">876</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1902"><div class="step-ref bg-step">1902</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">13</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1903"><div class="step-ref bg-step">1903</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1904"><div class="step-ref bg-step">1904</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1905"><div class="step-ref bg-step">1905</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def tenantId = tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1906"><div class="step-ref bg-step">1906</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentMode = collectionServicesConstants.parameters.paymentMode</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1907"><div class="step-ref bg-step">1907</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBy = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1908"><div class="step-ref bg-step">1908</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1909"><div class="step-ref bg-step">1909</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def payerName = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1910"><div class="step-ref bg-step">1910</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalDue = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1911"><div class="step-ref bg-step">1911</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumber = collectionServicesConstants.parameters.transactionNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1912"><div class="step-ref bg-step">1912</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumber = collectionServicesConstants.parameters.instrumentNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1913"><div class="step-ref bg-step">1913</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCard = collectionServicesConstants.parameters.paymentMode2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1914"><div class="step-ref bg-step">1914</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCheque = collectionServicesConstants.parameters.paymentModeForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1915"><div class="step-ref bg-step">1915</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberForCheque = collectionServicesConstants.parameters.transactionNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1916"><div class="step-ref bg-step">1916</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberForCheque = collectionServicesConstants.parameters.instrumentNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1917"><div class="step-ref bg-step">1917</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1918"><div class="step-ref bg-step">1918</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def ifscCode = collectionServicesConstants.parameters.ifscCode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1919"><div class="step-ref bg-step">1919</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1920"><div class="step-ref bg-step">1920</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1921"><div class="step-ref bg-step">1921</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequest = read('../../business-services/requestPayload/collection-services/create.json')</div></div><div class="time-cell passed">8</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1922"><div class="step-ref bg-step">1922</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def workflowRequest = read('../../business-services/requestPayload/collection-services/workflow.json')</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1923"><div class="step-ref bg-step">1923</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPaymentRequest = read('../../business-services/requestPayload/collection-services/search.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1924"><div class="step-ref bg-step">1924</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTreceiptcount = read('../../business-services/requestPayload/collection-services/receiptcount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1925"><div class="step-ref bg-step">1925</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequestForCheque = read('../../business-services/requestPayload/collection-services/createPaymentWithCheque.json')</div></div><div class="time-cell passed">8</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1926"><div class="step-ref bg-step">1926</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def eChallanPaymentcount = read('../../business-services/requestPayload/collection-services/echallancount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1927"><div class="step-ref bg-step">1927</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1928"><div class="step-ref bg-step">1928</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = 'invalid_'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1929"><div class="step-ref bg-step">1929</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBusinessId = 'PT'+randomNumber(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1930"><div class="step-ref bg-step">1930</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentMode = randomString(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1931"><div class="step-ref bg-step">1931</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantId = randomString(5)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1932"><div class="step-ref bg-step">1932</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def negativeTotalAmount = '-'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1933"><div class="step-ref bg-step">1933</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url collectionServiceWorkflowUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1934"><div class="step-ref bg-step">1934</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request workflowRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print workflowRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1935"><div class="step-ref bg-step">1935</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">794</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1936"><div class="step-ref bg-step">1936</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1937"><div class="step-ref bg-step">1937</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[10:89]bg"><div class="step-container" id="1938"><div class="step-ref bg-step">1938</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1939"><div class="step-ref passed">1939</div><div class="step-cell passed">* def key = ranString(5)</div></div><div class="time-cell passed">21</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-cell comment"># calling create pdf pretest</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="1940"><div class="step-ref passed">1940</div><div class="step-cell passed">* call read('../../core-services/pretests/pdfServiceCreate.feature@createPdfError')</div></div><div class="time-cell passed">198</div></div><div class="step-row"><div class="step-container" id="1940.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-cell passed">com/egov/core-services/tests/../../core-services/pretests/pdfServiceCreate.feature</div></div><div class="time-cell passed">186</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-cell comment"># * call read('../../business-services/tests/collectionServicesCreate.feature@Create_PaymentWithValidBillID_01')</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-cell comment">#* def Payments = Payments</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="1941"><div class="step-ref passed">1941</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayload = read('../../core-services/requestPayload/pdf-service/pdfCreate.json')</div></div><div class="time-cell passed">7</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-cell comment"># initializing pdf create payload objects</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="1942"><div class="step-ref passed">1942</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayloadFirst = pdfCreatePayload.TL</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="1943"><div class="step-ref passed">1943</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayloadSecond = pdfCreatePayload.PT</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="1944"><div class="step-ref passed">1944</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayloadThird = pdfCreatePayload.FireNoc</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="1945"><div class="step-ref passed">1945</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreatePayloadFourth = pdfCreatePayload.WS</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="1946"><div class="step-ref passed">1946</div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1947"><div class="step-ref passed">1947</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreateParam =</div></div><div class="time-cell passed">1</div></div><div class="preformatted" data-parent="1947">{
 key: '#(key)',
 tenantId: '#(tenantId)'
}</div><div class="step-row"><div class="step-container" id="1948"><div class="step-ref passed">1948</div><div class="step-indent"> </div><div class="step-cell passed">Given url createPdf</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1949"><div class="step-ref passed">1949</div><div class="step-indent"> </div><div class="step-cell passed">And params pdfCreateParam</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1950"><div class="step-ref passed">1950</div><div class="step-indent"> </div><div class="step-cell passed">And request pdfCreatePayloadFirst</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1951"><div class="step-ref passed">1951</div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">171</div></div><div class="step-row"><div class="step-container" id="1952"><div class="step-ref passed">1952</div><div class="step-indent"> </div><div class="step-cell passed">Then status 400</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1953"><div class="step-ref passed">1953</div><div class="step-indent"> </div><div class="step-cell passed">And def pdfCreateResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1954"><div class="step-ref passed">1954</div><div class="step-indent"> </div><div class="step-cell passed">And def pdfCreateResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="1955"><div class="step-ref passed">1955</div><div class="step-cell passed">* def pdfCreateSecond = pdfCreateResponseBody.message</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="1956"><div class="step-ref passed">1956</div><div class="step-cell passed">* assert pdfCreateSecond == pdfCreateConstant.errorMessages.invalidKey + key</div></div><div class="time-cell passed">2</div></div></div><div class="scenario"><div class="scenario-heading" id="[11:97]"><div class="heading-container"><div class="scenario-tags"><a class="badge badge-primary" href="karate-tags.html">regression</a><a class="badge badge-primary" href="karate-tags.html">pdf_createnosave_PT_01</a><a class="badge badge-primary" href="karate-tags.html">positive</a><a class="badge badge-primary" href="karate-tags.html">pdfservice</a><a class="badge badge-primary" href="karate-tags.html">coreServices</a></div><span class="scenario-keyword">Scenario: [11:97]</span><span class="scenario-name">Generate PDF config for PT module for a given key and tenantid </span></div><div class="scenario-time passed">ms: 4559</div></div><div class="step-row"><div class="step-container" id="[11:97]bg"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-cell passed">Background:</div></div><div class="time-cell passed"></div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-cell comment"># reading javascript utils for using generic methods</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1957"><div class="step-ref bg-step">1957</div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">10</div></div><div class="preformatted" data-parent="1957">15:37:47.643 karate.env:  
15:37:47.644 locale: en_IN 
15:37:47.644 tenantId: pb.amritsar</div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1958"><div class="step-ref bg-step">1958</div><div class="step-cell passed">* def pdfCreateConstant = read('../../core-services/constants/pdfService.yaml')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1959"><div class="step-ref bg-step">1959</div><div class="step-cell passed">* call read('../../business-services/tests/collectionServicesCreate.feature@Create_PaymentWithValidBillID_01')</div></div><div class="time-cell passed">1899</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1959.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/tests/collectionServicesCreate.feature</div></div><div class="time-cell passed">1879</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1960"><div class="step-ref bg-step">1960</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/tests/billingServicesDemand.feature@create_01')</div></div><div class="time-cell passed">292</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1960.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/tests/billingServicesDemand.feature</div></div><div class="time-cell passed">261</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1961"><div class="step-ref bg-step">1961</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1962"><div class="step-ref bg-step">1962</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceDemandConstants = read('../../business-services/constants/billing-service-demand.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1963"><div class="step-ref bg-step">1963</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1964"><div class="step-ref bg-step">1964</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell passed">10</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1965"><div class="step-ref bg-step">1965</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def consumerType = mdmsStateBillingService.BusinessService[0].businessService</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1966"><div class="step-ref bg-step">1966</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = mdmsStateBillingService.BusinessService[0].code</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1967"><div class="step-ref bg-step">1967</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxPeriodFrom = getCurrentEpochTime()</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1968"><div class="step-ref bg-step">1968</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def daysFromToday = 2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1969"><div class="step-ref bg-step">1969</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxPeriodTo = getEpochDate(daysFromToday)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1970"><div class="step-ref bg-step">1970</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxHeadMasterCodes = karate.jsonPath(mdmsStateBillingService, "$.TaxHeadMaster[?(@.service=='" + businessService + "')].code")</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1971"><div class="step-ref bg-step">1971</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxHeadMasterCode = taxHeadMasterCodes[randomNumber(taxHeadMasterCodes.length)]</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1972"><div class="step-ref bg-step">1972</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxAmount = 200</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1973"><div class="step-ref bg-step">1973</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionAmount = 0</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1974"><div class="step-ref bg-step">1974</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def minimumAmountPayable = 1</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Steps to create a new Employee through HRMS</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1975"><div class="step-ref bg-step">1975</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServiceDemandPretest.feature@createBillDemand')</div></div><div class="time-cell passed">216</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1975.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServiceDemandPretest.feature</div></div><div class="time-cell passed">207</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1976"><div class="step-ref bg-step">1976</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1977"><div class="step-ref bg-step">1977</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceDemandConstants = read('../../business-services/constants/billing-service-demand.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1978"><div class="step-ref bg-step">1978</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1979"><div class="step-ref bg-step">1979</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createDemandRequest = read('../../business-services/requestPayload/billing-service-demand/create.json')</div></div><div class="time-cell passed">14</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1980"><div class="step-ref bg-step">1980</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchDemandRequest = read('../../business-services/requestPayload/billing-service-demand/search.json')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1981"><div class="step-ref bg-step">1981</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def updateDemandRequest = read('../../business-services/requestPayload/billing-service-demand/update.json')</div></div><div class="time-cell passed">12</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1982"><div class="step-ref bg-step">1982</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1983"><div class="step-ref bg-step">1983</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url createDemandUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print createDemandRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1984"><div class="step-ref bg-step">1984</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request createDemandRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1985"><div class="step-ref bg-step">1985</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">164</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1986"><div class="step-ref bg-step">1986</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1987"><div class="step-ref bg-step">1987</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billingServiceDemandResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1988"><div class="step-ref bg-step">1988</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billingServiceDemandResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1989"><div class="step-ref bg-step">1989</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* print billingServiceDemandResponseBody</div></div><div class="time-cell passed">0</div></div><div class="preformatted" data-parent="1989">15:37:47.959 [print] {
  "ResponseInfo": {
    "ver": null,
    "resMsgId": null,
    "msgId": null,
    "apiId": null,
    "ts": null,
    "status": "201 CREATED"
  },
  "Demands": [
    {
      "taxPeriodFrom": 1628590067735,
      "businessService": "PT",
      "minimumAmountPayable": 1,
      "taxPeriodTo": 1628762867739,
      "fixedBillExpiryDate": null,
      "additionalDetails": null,
      "payer": null,
      "demandDetails": [
        {
          "demandId": "eec44e6a-c48d-4122-b533-8d35eb69681a",
          "taxHeadMasterCode": "PT_UNIT_USAGE_EXEMPTION",
          "collectionAmount": 0,
          "auditDetails": {
            "lastModifiedTime": 1628590068142,
            "createdBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
            "lastModifiedBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
            "createdTime": 1628590068142
          },
          "tenantId": "pb.amritsar",
          "id": "e67dcd11-29d8-436f-8f67-972756e16843",
          "taxAmount": 200,
          "additionalDetails": null
        }
      ],
      "consumerType": "PropertyTax",
      "auditDetails": {
        "lastModifiedTime": 1628590068142,
        "createdBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
        "lastModifiedBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
        "createdTime": 1628590068142
      },
      "tenantId": "pb.amritsar",
      "consumerCode": "Consumer-Code-Test-39371",
      "id": "eec44e6a-c48d-4122-b533-8d35eb69681a",
      "billExpiryTime": null,
      "isPaymentCompleted": false,
      "status": "ACTIVE"
    }
  ],
  "CollectedReceipt": null
}</div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1990"><div class="step-ref bg-step">1990</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def Demands = billingServiceDemandResponseBody.Demands</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1991"><div class="step-ref bg-step">1991</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def demandId = Demands[0].id</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1992"><div class="step-ref bg-step">1992</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def consumerCode = Demands[0].consumerCode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the status Created</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1993"><div class="step-ref bg-step">1993</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* assert billingServiceDemandResponseBody.ResponseInfo.status == commonConstants.expectedStatus.created</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand id is present</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1994"><div class="step-ref bg-step">1994</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].id == "#present"</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the tenantId of demand response is equal with current tenantId</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1995"><div class="step-ref bg-step">1995</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].tenantId == tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the consumer code of demand response is equal with defined consumerCode</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1996"><div class="step-ref bg-step">1996</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].consumerCode == consumerCode</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the consumerType of demand response is equal with defined consumerType</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1997"><div class="step-ref bg-step">1997</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].consumerType == consumerType</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the businessService of demand response is equal with defined businessService</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1998"><div class="step-ref bg-step">1998</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].businessService == businessService</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxPeriodFrom of demand response is equal with defined taxPeriodFrom</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="1999"><div class="step-ref bg-step">1999</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].taxPeriodFrom == taxPeriodFrom</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxPeriodTo of demand response is equal with defined taxPeriodTo</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2000"><div class="step-ref bg-step">2000</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].taxPeriodTo == taxPeriodTo</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand details id is present in demand response body</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2001"><div class="step-ref bg-step">2001</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].id == "#present"</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demandId is present in demand response body</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2002"><div class="step-ref bg-step">2002</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].demandId == "#present"</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxHeadMasterCode of demand response is equal with defined taxHeadMasterCode</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2003"><div class="step-ref bg-step">2003</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].taxHeadMasterCode == taxHeadMasterCode</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxAmount of demand response is equal with defined taxAmount</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2004"><div class="step-ref bg-step">2004</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].taxAmount == taxAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the collectionAmount of demand response is equal with defined collectionAmount</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2005"><div class="step-ref bg-step">2005</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].collectionAmount == collectionAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the minimumAmountPayable of demand response is equal with defined minimumAmountPayable</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2006"><div class="step-ref bg-step">2006</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].minimumAmountPayable == minimumAmountPayable</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand status is equal with expected demand status `ACTIVE`</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2007"><div class="step-ref bg-step">2007</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].status == billingServiceDemandConstants.parameters.status</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2008"><div class="step-ref bg-step">2008</div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2009"><div class="step-ref bg-step">2009</div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2010"><div class="step-ref bg-step">2010</div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2011"><div class="step-ref bg-step">2011</div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2012"><div class="step-ref bg-step">2012</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServicePretest.feature@fetchBill')</div></div><div class="time-cell passed">196</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2012.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServicePretest.feature</div></div><div class="time-cell passed">188</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2013"><div class="step-ref bg-step">2013</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceConstants = read('../../business-services/constants/billing-service.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2014"><div class="step-ref bg-step">2014</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionServiceConstants = read('../../business-services/constants/apportionService.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2015"><div class="step-ref bg-step">2015</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = billingServiceConstants.parameters.businessService</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2016"><div class="step-ref bg-step">2016</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionbusinessService = apportionServiceConstants.parameters.businessService</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2017"><div class="step-ref bg-step">2017</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason1 = apportionServiceConstants.parameters.reason1</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2018"><div class="step-ref bg-step">2018</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason2 = apportionServiceConstants.parameters.reason2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2019"><div class="step-ref bg-step">2019</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason3 = apportionServiceConstants.parameters.reason3</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2020"><div class="step-ref bg-step">2020</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason4 = apportionServiceConstants.parameters.reason4</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment">#* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2021"><div class="step-ref bg-step">2021</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillRequest = read('../../business-services/requestPayload/collection-services/fetchBill.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2022"><div class="step-ref bg-step">2022</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillRequest = read('../../business-services/requestPayload/collection-services/cancelBill.json')</div></div><div class="time-cell passed">8</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2023"><div class="step-ref bg-step">2023</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2024"><div class="step-ref bg-step">2024</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillParams =</div></div><div class="time-cell passed">0</div></div><div class="preformatted" data-parent="2024">{
   consumerCode: '#(consumerCode)',
   businessService: '#(businessService)',
   tenantId: '#(tenantId)'
}</div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2025"><div class="step-ref bg-step">2025</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url fetchBill</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2026"><div class="step-ref bg-step">2026</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And params fetchBillParams</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillParams</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2027"><div class="step-ref bg-step">2027</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request fetchBillRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2028"><div class="step-ref bg-step">2028</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">159</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillResponse</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2029"><div class="step-ref bg-step">2029</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2030"><div class="step-ref bg-step">2030</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def fetchBillResponse = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2031"><div class="step-ref bg-step">2031</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmount = response.Bill[0].totalAmount</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2032"><div class="step-ref bg-step">2032</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billId = response.Bill[0].id</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2033"><div class="step-ref bg-step">2033</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def txnAmount = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2034"><div class="step-ref bg-step">2034</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmountPaid = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2035"><div class="step-ref bg-step">2035</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalDue = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2036"><div class="step-ref bg-step">2036</div><div class="step-indent"> </div><div class="step-cell passed">* def paidBillIdError = collectionServicesConstants.errorMessages.paidBillId</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2037"><div class="step-ref bg-step">2037</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillIdError = collectionServicesConstants.errorMessages.invalidBillId</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2038"><div class="step-ref bg-step">2038</div><div class="step-indent"> </div><div class="step-cell passed">* def totalAmountPaidError = collectionServicesConstants.errorMessages.totalAmountPaidNull</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2039"><div class="step-ref bg-step">2039</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentModeError = collectionServicesConstants.errorMessages.invalidPaymentMode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2040"><div class="step-ref bg-step">2040</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantIdError = commonConstants.errorMessages.invalidTenantIdError</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2041"><div class="step-ref bg-step">2041</div><div class="step-indent"> </div><div class="step-cell passed">* def nullTenantIdError = commonConstants.errorMessages.nullParameterError</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2042"><div class="step-ref bg-step">2042</div><div class="step-indent"> </div><div class="step-cell passed">* def reason = collectionServicesConstants.parameters.reason</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2043"><div class="step-ref bg-step">2043</div><div class="step-indent"> </div><div class="step-cell passed">* def action = collectionServicesConstants.parameters.action</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2044"><div class="step-ref bg-step">2044</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDateError = collectionServicesConstants.errorMessages.instrumentDateAsNull</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2045"><div class="step-ref bg-step">2045</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentPastDateError = collectionServicesConstants.errorMessages.instrumentDatePastNinetyDays</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2046"><div class="step-ref bg-step">2046</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentFutureDateError = collectionServicesConstants.errorMessages.futureInstrumentDate</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2047"><div class="step-ref bg-step">2047</div><div class="step-indent"> </div><div class="step-cell passed">* def moreThanDueAmountError = collectionServicesConstants.errorMessages.moreThanDueAmount</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2048"><div class="step-ref bg-step">2048</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberError = collectionServicesConstants.errorMessages.instrumentNumberAsEmptyString</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2049"><div class="step-ref bg-step">2049</div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberError = collectionServicesConstants.errorMessages.transactionNumberAsEmptyString</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2050"><div class="step-ref bg-step">2050</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/collectionServicesPretest.feature@createPayment')</div></div><div class="time-cell passed">445</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2050.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/collectionServicesPretest.feature</div></div><div class="time-cell passed">427</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2051"><div class="step-ref bg-step">2051</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2052"><div class="step-ref bg-step">2052</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2053"><div class="step-ref bg-step">2053</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2054"><div class="step-ref bg-step">2054</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def tenantId = tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2055"><div class="step-ref bg-step">2055</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentMode = collectionServicesConstants.parameters.paymentMode</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2056"><div class="step-ref bg-step">2056</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBy = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2057"><div class="step-ref bg-step">2057</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2058"><div class="step-ref bg-step">2058</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def payerName = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2059"><div class="step-ref bg-step">2059</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalDue = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2060"><div class="step-ref bg-step">2060</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumber = collectionServicesConstants.parameters.transactionNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2061"><div class="step-ref bg-step">2061</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumber = collectionServicesConstants.parameters.instrumentNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2062"><div class="step-ref bg-step">2062</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCard = collectionServicesConstants.parameters.paymentMode2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2063"><div class="step-ref bg-step">2063</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCheque = collectionServicesConstants.parameters.paymentModeForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2064"><div class="step-ref bg-step">2064</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberForCheque = collectionServicesConstants.parameters.transactionNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2065"><div class="step-ref bg-step">2065</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberForCheque = collectionServicesConstants.parameters.instrumentNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2066"><div class="step-ref bg-step">2066</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2067"><div class="step-ref bg-step">2067</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def ifscCode = collectionServicesConstants.parameters.ifscCode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2068"><div class="step-ref bg-step">2068</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2069"><div class="step-ref bg-step">2069</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2070"><div class="step-ref bg-step">2070</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequest = read('../../business-services/requestPayload/collection-services/create.json')</div></div><div class="time-cell passed">12</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2071"><div class="step-ref bg-step">2071</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def workflowRequest = read('../../business-services/requestPayload/collection-services/workflow.json')</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2072"><div class="step-ref bg-step">2072</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPaymentRequest = read('../../business-services/requestPayload/collection-services/search.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2073"><div class="step-ref bg-step">2073</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTreceiptcount = read('../../business-services/requestPayload/collection-services/receiptcount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2074"><div class="step-ref bg-step">2074</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequestForCheque = read('../../business-services/requestPayload/collection-services/createPaymentWithCheque.json')</div></div><div class="time-cell passed">11</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2075"><div class="step-ref bg-step">2075</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def eChallanPaymentcount = read('../../business-services/requestPayload/collection-services/echallancount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2076"><div class="step-ref bg-step">2076</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2077"><div class="step-ref bg-step">2077</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = 'invalid_'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2078"><div class="step-ref bg-step">2078</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBusinessId = 'PT'+randomNumber(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2079"><div class="step-ref bg-step">2079</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentMode = randomString(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2080"><div class="step-ref bg-step">2080</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantId = randomString(5)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2081"><div class="step-ref bg-step">2081</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def negativeTotalAmount = '-'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2082"><div class="step-ref bg-step">2082</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url payment</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2083"><div class="step-ref bg-step">2083</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request createPaymentRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print createPaymentRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2084"><div class="step-ref bg-step">2084</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">350</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2085"><div class="step-ref bg-step">2085</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2086"><div class="step-ref bg-step">2086</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2087"><div class="step-ref bg-step">2087</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2088"><div class="step-ref bg-step">2088</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def Payments = collectionServicesResponseBody.Payments</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2089"><div class="step-ref bg-step">2089</div><div class="step-indent"> </div><div class="step-cell passed">* match response.ResponseInfo.status == '200 OK'</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2090"><div class="step-ref bg-step">2090</div><div class="step-indent"> </div><div class="step-cell passed">* def paymentId = collectionServicesResponseBody.Payments[0].id</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2091"><div class="step-ref bg-step">2091</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/collectionServicesPretest.feature@processworkflow')</div></div><div class="time-cell passed">925</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2091.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/collectionServicesPretest.feature</div></div><div class="time-cell passed">903</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2092"><div class="step-ref bg-step">2092</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">10</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2093"><div class="step-ref bg-step">2093</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2094"><div class="step-ref bg-step">2094</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2095"><div class="step-ref bg-step">2095</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def tenantId = tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2096"><div class="step-ref bg-step">2096</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentMode = collectionServicesConstants.parameters.paymentMode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2097"><div class="step-ref bg-step">2097</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBy = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2098"><div class="step-ref bg-step">2098</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2099"><div class="step-ref bg-step">2099</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def payerName = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2100"><div class="step-ref bg-step">2100</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalDue = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2101"><div class="step-ref bg-step">2101</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumber = collectionServicesConstants.parameters.transactionNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2102"><div class="step-ref bg-step">2102</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumber = collectionServicesConstants.parameters.instrumentNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2103"><div class="step-ref bg-step">2103</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCard = collectionServicesConstants.parameters.paymentMode2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2104"><div class="step-ref bg-step">2104</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCheque = collectionServicesConstants.parameters.paymentModeForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2105"><div class="step-ref bg-step">2105</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberForCheque = collectionServicesConstants.parameters.transactionNumberForCheque</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2106"><div class="step-ref bg-step">2106</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberForCheque = collectionServicesConstants.parameters.instrumentNumberForCheque</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2107"><div class="step-ref bg-step">2107</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2108"><div class="step-ref bg-step">2108</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def ifscCode = collectionServicesConstants.parameters.ifscCode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2109"><div class="step-ref bg-step">2109</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2110"><div class="step-ref bg-step">2110</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2111"><div class="step-ref bg-step">2111</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequest = read('../../business-services/requestPayload/collection-services/create.json')</div></div><div class="time-cell passed">10</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2112"><div class="step-ref bg-step">2112</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def workflowRequest = read('../../business-services/requestPayload/collection-services/workflow.json')</div></div><div class="time-cell passed">7</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2113"><div class="step-ref bg-step">2113</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPaymentRequest = read('../../business-services/requestPayload/collection-services/search.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2114"><div class="step-ref bg-step">2114</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTreceiptcount = read('../../business-services/requestPayload/collection-services/receiptcount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2115"><div class="step-ref bg-step">2115</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequestForCheque = read('../../business-services/requestPayload/collection-services/createPaymentWithCheque.json')</div></div><div class="time-cell passed">12</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2116"><div class="step-ref bg-step">2116</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def eChallanPaymentcount = read('../../business-services/requestPayload/collection-services/echallancount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2117"><div class="step-ref bg-step">2117</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2118"><div class="step-ref bg-step">2118</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = 'invalid_'+randomNumber(4)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2119"><div class="step-ref bg-step">2119</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBusinessId = 'PT'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2120"><div class="step-ref bg-step">2120</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentMode = randomString(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2121"><div class="step-ref bg-step">2121</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantId = randomString(5)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2122"><div class="step-ref bg-step">2122</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def negativeTotalAmount = '-'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2123"><div class="step-ref bg-step">2123</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url collectionServiceWorkflowUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2124"><div class="step-ref bg-step">2124</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request workflowRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print workflowRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2125"><div class="step-ref bg-step">2125</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">809</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2126"><div class="step-ref bg-step">2126</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2127"><div class="step-ref bg-step">2127</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[11:97]bg"><div class="step-container" id="2128"><div class="step-ref bg-step">2128</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2129"><div class="step-ref passed">2129</div><div class="step-cell passed">* def key = pdfCreateConstant.parameters.valid.keyForPt</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-cell comment"># calling create pdf nosave pretest</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2130"><div class="step-ref passed">2130</div><div class="step-cell passed">* call read('../../core-services/pretests/pdfServiceCreateNoSave.feature@createPdfNosaveSuccessfully')</div></div><div class="time-cell passed">2644</div></div><div class="step-row"><div class="step-container" id="2130.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-cell passed">com/egov/core-services/tests/../../core-services/pretests/pdfServiceCreateNoSave.feature</div></div><div class="time-cell passed">2630</div></div><div class="step-row"><div class="step-container" id="2131"><div class="step-ref passed">2131</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/tests/collectionServicesCreate.feature@Create_PaymentWithValidBillID_01')</div></div><div class="time-cell passed">2237</div></div><div class="step-row"><div class="step-container" id="2131.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/tests/collectionServicesCreate.feature</div></div><div class="time-cell passed">2220</div></div><div class="step-row"><div class="step-container" id="2132"><div class="step-ref passed">2132</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/tests/billingServicesDemand.feature@create_01')</div></div><div class="time-cell passed">306</div></div><div class="step-row"><div class="step-container" id="2132.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/tests/billingServicesDemand.feature</div></div><div class="time-cell passed">270</div></div><div class="step-row"><div class="step-container" id="2133"><div class="step-ref passed">2133</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">14</div></div><div class="step-row"><div class="step-container" id="2134"><div class="step-ref passed">2134</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceDemandConstants = read('../../business-services/constants/billing-service-demand.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2135"><div class="step-ref passed">2135</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2136"><div class="step-ref passed">2136</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="2137"><div class="step-ref passed">2137</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def consumerType = mdmsStateBillingService.BusinessService[0].businessService</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2138"><div class="step-ref passed">2138</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = mdmsStateBillingService.BusinessService[0].code</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2139"><div class="step-ref passed">2139</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxPeriodFrom = getCurrentEpochTime()</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2140"><div class="step-ref passed">2140</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def daysFromToday = 2</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2141"><div class="step-ref passed">2141</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxPeriodTo = getEpochDate(daysFromToday)</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2142"><div class="step-ref passed">2142</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxHeadMasterCodes = karate.jsonPath(mdmsStateBillingService, "$.TaxHeadMaster[?(@.service=='" + businessService + "')].code")</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2143"><div class="step-ref passed">2143</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxHeadMasterCode = taxHeadMasterCodes[randomNumber(taxHeadMasterCodes.length)]</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container" id="2144"><div class="step-ref passed">2144</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxAmount = 200</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2145"><div class="step-ref passed">2145</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionAmount = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2146"><div class="step-ref passed">2146</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def minimumAmountPayable = 1</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Steps to create a new Employee through HRMS</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2147"><div class="step-ref passed">2147</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServiceDemandPretest.feature@createBillDemand')</div></div><div class="time-cell passed">220</div></div><div class="step-row"><div class="step-container" id="2147.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServiceDemandPretest.feature</div></div><div class="time-cell passed">208</div></div><div class="step-row"><div class="step-container" id="2148"><div class="step-ref passed">2148</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2149"><div class="step-ref passed">2149</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceDemandConstants = read('../../business-services/constants/billing-service-demand.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2150"><div class="step-ref passed">2150</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2151"><div class="step-ref passed">2151</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createDemandRequest = read('../../business-services/requestPayload/billing-service-demand/create.json')</div></div><div class="time-cell passed">12</div></div><div class="step-row"><div class="step-container" id="2152"><div class="step-ref passed">2152</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchDemandRequest = read('../../business-services/requestPayload/billing-service-demand/search.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2153"><div class="step-ref passed">2153</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def updateDemandRequest = read('../../business-services/requestPayload/billing-service-demand/update.json')</div></div><div class="time-cell passed">8</div></div><div class="step-row"><div class="step-container" id="2154"><div class="step-ref passed">2154</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="2155"><div class="step-ref passed">2155</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url createDemandUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print createDemandRequest</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2156"><div class="step-ref passed">2156</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request createDemandRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2157"><div class="step-ref passed">2157</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">171</div></div><div class="step-row"><div class="step-container" id="2158"><div class="step-ref passed">2158</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2159"><div class="step-ref passed">2159</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billingServiceDemandResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2160"><div class="step-ref passed">2160</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billingServiceDemandResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2161"><div class="step-ref passed">2161</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* print billingServiceDemandResponseBody</div></div><div class="time-cell passed">0</div></div><div class="preformatted" data-parent="2161">15:37:49.873 [print] {
  "ResponseInfo": {
    "ver": null,
    "resMsgId": null,
    "msgId": null,
    "apiId": null,
    "ts": null,
    "status": "201 CREATED"
  },
  "Demands": [
    {
      "taxPeriodFrom": 1628590069644,
      "businessService": "PT",
      "minimumAmountPayable": 1,
      "taxPeriodTo": 1628762869647,
      "fixedBillExpiryDate": null,
      "additionalDetails": null,
      "payer": null,
      "demandDetails": [
        {
          "demandId": "a3fb5e86-c138-474d-b8be-c34aee409e49",
          "taxHeadMasterCode": "PT_ADVANCE_CARRYFORWARD",
          "collectionAmount": 0,
          "auditDetails": {
            "lastModifiedTime": 1628590070050,
            "createdBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
            "lastModifiedBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
            "createdTime": 1628590070050
          },
          "tenantId": "pb.amritsar",
          "id": "4c15e79c-5bfd-4c77-8355-6377a504689f",
          "taxAmount": 200,
          "additionalDetails": null
        }
      ],
      "consumerType": "PropertyTax",
      "auditDetails": {
        "lastModifiedTime": 1628590070050,
        "createdBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
        "lastModifiedBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
        "createdTime": 1628590070050
      },
      "tenantId": "pb.amritsar",
      "consumerCode": "Consumer-Code-Test-32408",
      "id": "a3fb5e86-c138-474d-b8be-c34aee409e49",
      "billExpiryTime": null,
      "isPaymentCompleted": false,
      "status": "ACTIVE"
    }
  ],
  "CollectedReceipt": null
}</div><div class="step-row"><div class="step-container" id="2162"><div class="step-ref passed">2162</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def Demands = billingServiceDemandResponseBody.Demands</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2163"><div class="step-ref passed">2163</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def demandId = Demands[0].id</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2164"><div class="step-ref passed">2164</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def consumerCode = Demands[0].consumerCode</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the status Created</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2165"><div class="step-ref passed">2165</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* assert billingServiceDemandResponseBody.ResponseInfo.status == commonConstants.expectedStatus.created</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand id is present</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2166"><div class="step-ref passed">2166</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].id == "#present"</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the tenantId of demand response is equal with current tenantId</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2167"><div class="step-ref passed">2167</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].tenantId == tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the consumer code of demand response is equal with defined consumerCode</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2168"><div class="step-ref passed">2168</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].consumerCode == consumerCode</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the consumerType of demand response is equal with defined consumerType</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2169"><div class="step-ref passed">2169</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].consumerType == consumerType</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the businessService of demand response is equal with defined businessService</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2170"><div class="step-ref passed">2170</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].businessService == businessService</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxPeriodFrom of demand response is equal with defined taxPeriodFrom</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2171"><div class="step-ref passed">2171</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].taxPeriodFrom == taxPeriodFrom</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxPeriodTo of demand response is equal with defined taxPeriodTo</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2172"><div class="step-ref passed">2172</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].taxPeriodTo == taxPeriodTo</div></div><div class="time-cell passed">6</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand details id is present in demand response body</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2173"><div class="step-ref passed">2173</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].id == "#present"</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demandId is present in demand response body</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2174"><div class="step-ref passed">2174</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].demandId == "#present"</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxHeadMasterCode of demand response is equal with defined taxHeadMasterCode</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2175"><div class="step-ref passed">2175</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].taxHeadMasterCode == taxHeadMasterCode</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxAmount of demand response is equal with defined taxAmount</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2176"><div class="step-ref passed">2176</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].taxAmount == taxAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the collectionAmount of demand response is equal with defined collectionAmount</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2177"><div class="step-ref passed">2177</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].collectionAmount == collectionAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the minimumAmountPayable of demand response is equal with defined minimumAmountPayable</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2178"><div class="step-ref passed">2178</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].minimumAmountPayable == minimumAmountPayable</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand status is equal with expected demand status `ACTIVE`</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2179"><div class="step-ref passed">2179</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].status == billingServiceDemandConstants.parameters.status</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2180"><div class="step-ref passed">2180</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2181"><div class="step-ref passed">2181</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2182"><div class="step-ref passed">2182</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="2183"><div class="step-ref passed">2183</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2184"><div class="step-ref passed">2184</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServicePretest.feature@fetchBill')</div></div><div class="time-cell passed">209</div></div><div class="step-row"><div class="step-container" id="2184.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServicePretest.feature</div></div><div class="time-cell passed">201</div></div><div class="step-row"><div class="step-container" id="2185"><div class="step-ref passed">2185</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceConstants = read('../../business-services/constants/billing-service.yaml')</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="2186"><div class="step-ref passed">2186</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionServiceConstants = read('../../business-services/constants/apportionService.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="2187"><div class="step-ref passed">2187</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = billingServiceConstants.parameters.businessService</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2188"><div class="step-ref passed">2188</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionbusinessService = apportionServiceConstants.parameters.businessService</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2189"><div class="step-ref passed">2189</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason1 = apportionServiceConstants.parameters.reason1</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2190"><div class="step-ref passed">2190</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason2 = apportionServiceConstants.parameters.reason2</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2191"><div class="step-ref passed">2191</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason3 = apportionServiceConstants.parameters.reason3</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2192"><div class="step-ref passed">2192</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason4 = apportionServiceConstants.parameters.reason4</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment">#* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2193"><div class="step-ref passed">2193</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillRequest = read('../../business-services/requestPayload/collection-services/fetchBill.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="2194"><div class="step-ref passed">2194</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillRequest = read('../../business-services/requestPayload/collection-services/cancelBill.json')</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container" id="2195"><div class="step-ref passed">2195</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2196"><div class="step-ref passed">2196</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillParams =</div></div><div class="time-cell passed">0</div></div><div class="preformatted" data-parent="2196">{
   consumerCode: '#(consumerCode)',
   businessService: '#(businessService)',
   tenantId: '#(tenantId)'
}</div><div class="step-row"><div class="step-container" id="2197"><div class="step-ref passed">2197</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url fetchBill</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2198"><div class="step-ref passed">2198</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And params fetchBillParams</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillParams</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2199"><div class="step-ref passed">2199</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request fetchBillRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2200"><div class="step-ref passed">2200</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">172</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillResponse</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2201"><div class="step-ref passed">2201</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2202"><div class="step-ref passed">2202</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def fetchBillResponse = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2203"><div class="step-ref passed">2203</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmount = response.Bill[0].totalAmount</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2204"><div class="step-ref passed">2204</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billId = response.Bill[0].id</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2205"><div class="step-ref passed">2205</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def txnAmount = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2206"><div class="step-ref passed">2206</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmountPaid = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2207"><div class="step-ref passed">2207</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalDue = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2208"><div class="step-ref passed">2208</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBillIdError = collectionServicesConstants.errorMessages.paidBillId</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2209"><div class="step-ref passed">2209</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillIdError = collectionServicesConstants.errorMessages.invalidBillId</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2210"><div class="step-ref passed">2210</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalAmountPaidError = collectionServicesConstants.errorMessages.totalAmountPaidNull</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2211"><div class="step-ref passed">2211</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentModeError = collectionServicesConstants.errorMessages.invalidPaymentMode</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2212"><div class="step-ref passed">2212</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantIdError = commonConstants.errorMessages.invalidTenantIdError</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2213"><div class="step-ref passed">2213</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def nullTenantIdError = commonConstants.errorMessages.nullParameterError</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2214"><div class="step-ref passed">2214</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def reason = collectionServicesConstants.parameters.reason</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2215"><div class="step-ref passed">2215</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def action = collectionServicesConstants.parameters.action</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2216"><div class="step-ref passed">2216</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDateError = collectionServicesConstants.errorMessages.instrumentDateAsNull</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2217"><div class="step-ref passed">2217</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentPastDateError = collectionServicesConstants.errorMessages.instrumentDatePastNinetyDays</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2218"><div class="step-ref passed">2218</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentFutureDateError = collectionServicesConstants.errorMessages.futureInstrumentDate</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2219"><div class="step-ref passed">2219</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def moreThanDueAmountError = collectionServicesConstants.errorMessages.moreThanDueAmount</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2220"><div class="step-ref passed">2220</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberError = collectionServicesConstants.errorMessages.instrumentNumberAsEmptyString</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2221"><div class="step-ref passed">2221</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberError = collectionServicesConstants.errorMessages.transactionNumberAsEmptyString</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2222"><div class="step-ref passed">2222</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/collectionServicesPretest.feature@createPayment')</div></div><div class="time-cell passed">442</div></div><div class="step-row"><div class="step-container" id="2222.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/collectionServicesPretest.feature</div></div><div class="time-cell passed">426</div></div><div class="step-row"><div class="step-container" id="2223"><div class="step-ref passed">2223</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2224"><div class="step-ref passed">2224</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2225"><div class="step-ref passed">2225</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2226"><div class="step-ref passed">2226</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def tenantId = tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2227"><div class="step-ref passed">2227</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentMode = collectionServicesConstants.parameters.paymentMode</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2228"><div class="step-ref passed">2228</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBy = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="2229"><div class="step-ref passed">2229</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="2230"><div class="step-ref passed">2230</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def payerName = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2231"><div class="step-ref passed">2231</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalDue = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2232"><div class="step-ref passed">2232</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumber = collectionServicesConstants.parameters.transactionNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2233"><div class="step-ref passed">2233</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumber = collectionServicesConstants.parameters.instrumentNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2234"><div class="step-ref passed">2234</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCard = collectionServicesConstants.parameters.paymentMode2</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2235"><div class="step-ref passed">2235</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCheque = collectionServicesConstants.parameters.paymentModeForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2236"><div class="step-ref passed">2236</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberForCheque = collectionServicesConstants.parameters.transactionNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2237"><div class="step-ref passed">2237</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberForCheque = collectionServicesConstants.parameters.instrumentNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2238"><div class="step-ref passed">2238</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="2239"><div class="step-ref passed">2239</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def ifscCode = collectionServicesConstants.parameters.ifscCode</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2240"><div class="step-ref passed">2240</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="2241"><div class="step-ref passed">2241</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2242"><div class="step-ref passed">2242</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequest = read('../../business-services/requestPayload/collection-services/create.json')</div></div><div class="time-cell passed">11</div></div><div class="step-row"><div class="step-container" id="2243"><div class="step-ref passed">2243</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def workflowRequest = read('../../business-services/requestPayload/collection-services/workflow.json')</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container" id="2244"><div class="step-ref passed">2244</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPaymentRequest = read('../../business-services/requestPayload/collection-services/search.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="2245"><div class="step-ref passed">2245</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTreceiptcount = read('../../business-services/requestPayload/collection-services/receiptcount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2246"><div class="step-ref passed">2246</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequestForCheque = read('../../business-services/requestPayload/collection-services/createPaymentWithCheque.json')</div></div><div class="time-cell passed">8</div></div><div class="step-row"><div class="step-container" id="2247"><div class="step-ref passed">2247</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def eChallanPaymentcount = read('../../business-services/requestPayload/collection-services/echallancount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2248"><div class="step-ref passed">2248</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2249"><div class="step-ref passed">2249</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = 'invalid_'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2250"><div class="step-ref passed">2250</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBusinessId = 'PT'+randomNumber(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2251"><div class="step-ref passed">2251</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentMode = randomString(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2252"><div class="step-ref passed">2252</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantId = randomString(5)</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2253"><div class="step-ref passed">2253</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def negativeTotalAmount = '-'+randomNumber(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2254"><div class="step-ref passed">2254</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url payment</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2255"><div class="step-ref passed">2255</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request createPaymentRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print createPaymentRequest</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2256"><div class="step-ref passed">2256</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">357</div></div><div class="step-row"><div class="step-container" id="2257"><div class="step-ref passed">2257</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2258"><div class="step-ref passed">2258</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2259"><div class="step-ref passed">2259</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2260"><div class="step-ref passed">2260</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def Payments = collectionServicesResponseBody.Payments</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2261"><div class="step-ref passed">2261</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match response.ResponseInfo.status == '200 OK'</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2262"><div class="step-ref passed">2262</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentId = collectionServicesResponseBody.Payments[0].id</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2263"><div class="step-ref passed">2263</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/collectionServicesPretest.feature@processworkflow')</div></div><div class="time-cell passed">1241</div></div><div class="step-row"><div class="step-container" id="2263.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/collectionServicesPretest.feature</div></div><div class="time-cell passed">1191</div></div><div class="step-row"><div class="step-container" id="2264"><div class="step-ref passed">2264</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">18</div></div><div class="step-row"><div class="step-container" id="2265"><div class="step-ref passed">2265</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2266"><div class="step-ref passed">2266</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container" id="2267"><div class="step-ref passed">2267</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def tenantId = tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2268"><div class="step-ref passed">2268</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentMode = collectionServicesConstants.parameters.paymentMode</div></div><div class="time-cell passed">46</div></div><div class="step-row"><div class="step-container" id="2269"><div class="step-ref passed">2269</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBy = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">23</div></div><div class="step-row"><div class="step-container" id="2270"><div class="step-ref passed">2270</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">21</div></div><div class="step-row"><div class="step-container" id="2271"><div class="step-ref passed">2271</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def payerName = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2272"><div class="step-ref passed">2272</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalDue = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2273"><div class="step-ref passed">2273</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumber = collectionServicesConstants.parameters.transactionNumber</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2274"><div class="step-ref passed">2274</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumber = collectionServicesConstants.parameters.instrumentNumber</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container" id="2275"><div class="step-ref passed">2275</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCard = collectionServicesConstants.parameters.paymentMode2</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="2276"><div class="step-ref passed">2276</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCheque = collectionServicesConstants.parameters.paymentModeForCheque</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="2277"><div class="step-ref passed">2277</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberForCheque = collectionServicesConstants.parameters.transactionNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2278"><div class="step-ref passed">2278</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberForCheque = collectionServicesConstants.parameters.instrumentNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2279"><div class="step-ref passed">2279</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">8</div></div><div class="step-row"><div class="step-container" id="2280"><div class="step-ref passed">2280</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def ifscCode = collectionServicesConstants.parameters.ifscCode</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2281"><div class="step-ref passed">2281</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="2282"><div class="step-ref passed">2282</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2283"><div class="step-ref passed">2283</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequest = read('../../business-services/requestPayload/collection-services/create.json')</div></div><div class="time-cell passed">10</div></div><div class="step-row"><div class="step-container" id="2284"><div class="step-ref passed">2284</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def workflowRequest = read('../../business-services/requestPayload/collection-services/workflow.json')</div></div><div class="time-cell passed">6</div></div><div class="step-row"><div class="step-container" id="2285"><div class="step-ref passed">2285</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPaymentRequest = read('../../business-services/requestPayload/collection-services/search.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2286"><div class="step-ref passed">2286</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTreceiptcount = read('../../business-services/requestPayload/collection-services/receiptcount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2287"><div class="step-ref passed">2287</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequestForCheque = read('../../business-services/requestPayload/collection-services/createPaymentWithCheque.json')</div></div><div class="time-cell passed">13</div></div><div class="step-row"><div class="step-container" id="2288"><div class="step-ref passed">2288</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def eChallanPaymentcount = read('../../business-services/requestPayload/collection-services/echallancount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2289"><div class="step-ref passed">2289</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container" id="2290"><div class="step-ref passed">2290</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = 'invalid_'+randomNumber(4)</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="2291"><div class="step-ref passed">2291</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBusinessId = 'PT'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2292"><div class="step-ref passed">2292</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentMode = randomString(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2293"><div class="step-ref passed">2293</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantId = randomString(5)</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2294"><div class="step-ref passed">2294</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def negativeTotalAmount = '-'+randomNumber(4)</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="2295"><div class="step-ref passed">2295</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url collectionServiceWorkflowUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2296"><div class="step-ref passed">2296</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request workflowRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print workflowRequest</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2297"><div class="step-ref passed">2297</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">989</div></div><div class="step-row"><div class="step-container" id="2298"><div class="step-ref passed">2298</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2299"><div class="step-ref passed">2299</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2300"><div class="step-ref passed">2300</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2301"><div class="step-ref passed">2301</div><div class="step-indent"> </div><div class="step-cell passed">* def Payments = Payments</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2302"><div class="step-ref passed">2302</div><div class="step-indent"> </div><div class="step-cell passed">* def Bill = Payments[0].paymentDetails[0].bill</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2303"><div class="step-ref passed">2303</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreateNoSavePayload = read('../../core-services/requestPayload/pdf-service/pdfCreateNoSave.json')</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="2304"><div class="step-ref passed">2304</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreateNoSavePayloadFirst = pdfCreateNoSavePayload.WS</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2305"><div class="step-ref passed">2305</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreateNoSaveParam =</div></div><div class="time-cell passed">1</div></div><div class="preformatted" data-parent="2305">{
 key: '#(key)',
 tenantId: '#(tenantId)'
}</div><div class="step-row"><div class="step-container" id="2306"><div class="step-ref passed">2306</div><div class="step-indent"> </div><div class="step-cell passed">Given url createNoSavePdf</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2307"><div class="step-ref passed">2307</div><div class="step-indent"> </div><div class="step-cell passed">And params pdfCreateNoSaveParam</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2308"><div class="step-ref passed">2308</div><div class="step-indent"> </div><div class="step-cell passed">And request pdfCreateNoSavePayload</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2309"><div class="step-ref passed">2309</div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">385</div></div><div class="step-row"><div class="step-container" id="2310"><div class="step-ref passed">2310</div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2311"><div class="step-ref passed">2311</div><div class="step-indent"> </div><div class="step-cell passed">And def pdfCreateNoSaveResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2312"><div class="step-ref passed">2312</div><div class="step-indent"> </div><div class="step-cell passed">And def pdfCreateNoSaveResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2313"><div class="step-ref passed">2313</div><div class="step-cell passed">* match pdfCreateNoSaveResponseBody == '#present'</div></div><div class="time-cell passed">1</div></div></div><div class="scenario"><div class="scenario-heading" id="[12:104]"><div class="heading-container"><div class="scenario-tags"><a class="badge badge-primary" href="karate-tags.html">pdf_createnosave_TL_02</a><a class="badge badge-primary" href="karate-tags.html">regression</a><a class="badge badge-primary" href="karate-tags.html">positive</a><a class="badge badge-primary" href="karate-tags.html">pdfservice</a><a class="badge badge-primary" href="karate-tags.html">coreServices</a></div><span class="scenario-keyword">Scenario: [12:104]</span><span class="scenario-name">Generate PDF config for TL module for a given key and tenantid </span></div><div class="scenario-time passed">ms: 4429</div></div><div class="step-row"><div class="step-container" id="[12:104]bg"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-cell passed">Background:</div></div><div class="time-cell passed"></div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-cell comment"># reading javascript utils for using generic methods</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2314"><div class="step-ref bg-step">2314</div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">7</div></div><div class="preformatted" data-parent="2314">15:37:52.281 karate.env:  
15:37:52.282 locale: en_IN 
15:37:52.282 tenantId: pb.amritsar</div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2315"><div class="step-ref bg-step">2315</div><div class="step-cell passed">* def pdfCreateConstant = read('../../core-services/constants/pdfService.yaml')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2316"><div class="step-ref bg-step">2316</div><div class="step-cell passed">* call read('../../business-services/tests/collectionServicesCreate.feature@Create_PaymentWithValidBillID_01')</div></div><div class="time-cell passed">2104</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2316.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/tests/collectionServicesCreate.feature</div></div><div class="time-cell passed">2083</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2317"><div class="step-ref bg-step">2317</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/tests/billingServicesDemand.feature@create_01')</div></div><div class="time-cell passed">338</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2317.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/tests/billingServicesDemand.feature</div></div><div class="time-cell passed">295</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2318"><div class="step-ref bg-step">2318</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2319"><div class="step-ref bg-step">2319</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceDemandConstants = read('../../business-services/constants/billing-service-demand.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2320"><div class="step-ref bg-step">2320</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2321"><div class="step-ref bg-step">2321</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2322"><div class="step-ref bg-step">2322</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def consumerType = mdmsStateBillingService.BusinessService[0].businessService</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2323"><div class="step-ref bg-step">2323</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = mdmsStateBillingService.BusinessService[0].code</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2324"><div class="step-ref bg-step">2324</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxPeriodFrom = getCurrentEpochTime()</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2325"><div class="step-ref bg-step">2325</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def daysFromToday = 2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2326"><div class="step-ref bg-step">2326</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxPeriodTo = getEpochDate(daysFromToday)</div></div><div class="time-cell passed">43</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2327"><div class="step-ref bg-step">2327</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxHeadMasterCodes = karate.jsonPath(mdmsStateBillingService, "$.TaxHeadMaster[?(@.service=='" + businessService + "')].code")</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2328"><div class="step-ref bg-step">2328</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxHeadMasterCode = taxHeadMasterCodes[randomNumber(taxHeadMasterCodes.length)]</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2329"><div class="step-ref bg-step">2329</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxAmount = 200</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2330"><div class="step-ref bg-step">2330</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionAmount = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2331"><div class="step-ref bg-step">2331</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def minimumAmountPayable = 1</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Steps to create a new Employee through HRMS</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2332"><div class="step-ref bg-step">2332</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServiceDemandPretest.feature@createBillDemand')</div></div><div class="time-cell passed">218</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2332.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServiceDemandPretest.feature</div></div><div class="time-cell passed">210</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2333"><div class="step-ref bg-step">2333</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2334"><div class="step-ref bg-step">2334</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceDemandConstants = read('../../business-services/constants/billing-service-demand.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2335"><div class="step-ref bg-step">2335</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2336"><div class="step-ref bg-step">2336</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createDemandRequest = read('../../business-services/requestPayload/billing-service-demand/create.json')</div></div><div class="time-cell passed">18</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2337"><div class="step-ref bg-step">2337</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchDemandRequest = read('../../business-services/requestPayload/billing-service-demand/search.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2338"><div class="step-ref bg-step">2338</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def updateDemandRequest = read('../../business-services/requestPayload/billing-service-demand/update.json')</div></div><div class="time-cell passed">18</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2339"><div class="step-ref bg-step">2339</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2340"><div class="step-ref bg-step">2340</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url createDemandUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print createDemandRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2341"><div class="step-ref bg-step">2341</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request createDemandRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2342"><div class="step-ref bg-step">2342</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">155</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2343"><div class="step-ref bg-step">2343</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2344"><div class="step-ref bg-step">2344</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billingServiceDemandResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2345"><div class="step-ref bg-step">2345</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billingServiceDemandResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2346"><div class="step-ref bg-step">2346</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* print billingServiceDemandResponseBody</div></div><div class="time-cell passed">0</div></div><div class="preformatted" data-parent="2346">15:37:52.637 [print] {
  "ResponseInfo": {
    "ver": null,
    "resMsgId": null,
    "msgId": null,
    "apiId": null,
    "ts": null,
    "status": "201 CREATED"
  },
  "Demands": [
    {
      "taxPeriodFrom": 1628590072375,
      "businessService": "PT",
      "minimumAmountPayable": 1,
      "taxPeriodTo": 1628762872420,
      "fixedBillExpiryDate": null,
      "additionalDetails": null,
      "payer": null,
      "demandDetails": [
        {
          "demandId": "b4b4da3d-a5c8-4347-83a7-3e6f6814a9d3",
          "taxHeadMasterCode": "PT_UNIT_USAGE_EXEMPTION",
          "collectionAmount": 0,
          "auditDetails": {
            "lastModifiedTime": 1628590072821,
            "createdBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
            "lastModifiedBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
            "createdTime": 1628590072821
          },
          "tenantId": "pb.amritsar",
          "id": "0b33b63f-0553-4f8e-8ae3-88d5208702ff",
          "taxAmount": 200,
          "additionalDetails": null
        }
      ],
      "consumerType": "PropertyTax",
      "auditDetails": {
        "lastModifiedTime": 1628590072821,
        "createdBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
        "lastModifiedBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
        "createdTime": 1628590072821
      },
      "tenantId": "pb.amritsar",
      "consumerCode": "Consumer-Code-Test-149130",
      "id": "b4b4da3d-a5c8-4347-83a7-3e6f6814a9d3",
      "billExpiryTime": null,
      "isPaymentCompleted": false,
      "status": "ACTIVE"
    }
  ],
  "CollectedReceipt": null
}</div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2347"><div class="step-ref bg-step">2347</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def Demands = billingServiceDemandResponseBody.Demands</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2348"><div class="step-ref bg-step">2348</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def demandId = Demands[0].id</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2349"><div class="step-ref bg-step">2349</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def consumerCode = Demands[0].consumerCode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the status Created</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2350"><div class="step-ref bg-step">2350</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* assert billingServiceDemandResponseBody.ResponseInfo.status == commonConstants.expectedStatus.created</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand id is present</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2351"><div class="step-ref bg-step">2351</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].id == "#present"</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the tenantId of demand response is equal with current tenantId</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2352"><div class="step-ref bg-step">2352</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].tenantId == tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the consumer code of demand response is equal with defined consumerCode</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2353"><div class="step-ref bg-step">2353</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].consumerCode == consumerCode</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the consumerType of demand response is equal with defined consumerType</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2354"><div class="step-ref bg-step">2354</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].consumerType == consumerType</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the businessService of demand response is equal with defined businessService</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2355"><div class="step-ref bg-step">2355</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].businessService == businessService</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxPeriodFrom of demand response is equal with defined taxPeriodFrom</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2356"><div class="step-ref bg-step">2356</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].taxPeriodFrom == taxPeriodFrom</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxPeriodTo of demand response is equal with defined taxPeriodTo</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2357"><div class="step-ref bg-step">2357</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].taxPeriodTo == taxPeriodTo</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand details id is present in demand response body</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2358"><div class="step-ref bg-step">2358</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].id == "#present"</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demandId is present in demand response body</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2359"><div class="step-ref bg-step">2359</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].demandId == "#present"</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxHeadMasterCode of demand response is equal with defined taxHeadMasterCode</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2360"><div class="step-ref bg-step">2360</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].taxHeadMasterCode == taxHeadMasterCode</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxAmount of demand response is equal with defined taxAmount</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2361"><div class="step-ref bg-step">2361</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].taxAmount == taxAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the collectionAmount of demand response is equal with defined collectionAmount</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2362"><div class="step-ref bg-step">2362</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].collectionAmount == collectionAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the minimumAmountPayable of demand response is equal with defined minimumAmountPayable</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2363"><div class="step-ref bg-step">2363</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].minimumAmountPayable == minimumAmountPayable</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand status is equal with expected demand status `ACTIVE`</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2364"><div class="step-ref bg-step">2364</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].status == billingServiceDemandConstants.parameters.status</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2365"><div class="step-ref bg-step">2365</div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2366"><div class="step-ref bg-step">2366</div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2367"><div class="step-ref bg-step">2367</div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2368"><div class="step-ref bg-step">2368</div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2369"><div class="step-ref bg-step">2369</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServicePretest.feature@fetchBill')</div></div><div class="time-cell passed">185</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2369.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServicePretest.feature</div></div><div class="time-cell passed">171</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2370"><div class="step-ref bg-step">2370</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceConstants = read('../../business-services/constants/billing-service.yaml')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2371"><div class="step-ref bg-step">2371</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionServiceConstants = read('../../business-services/constants/apportionService.yaml')</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2372"><div class="step-ref bg-step">2372</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = billingServiceConstants.parameters.businessService</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2373"><div class="step-ref bg-step">2373</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionbusinessService = apportionServiceConstants.parameters.businessService</div></div><div class="time-cell passed">14</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2374"><div class="step-ref bg-step">2374</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason1 = apportionServiceConstants.parameters.reason1</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2375"><div class="step-ref bg-step">2375</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason2 = apportionServiceConstants.parameters.reason2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2376"><div class="step-ref bg-step">2376</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason3 = apportionServiceConstants.parameters.reason3</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2377"><div class="step-ref bg-step">2377</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason4 = apportionServiceConstants.parameters.reason4</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment">#* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2378"><div class="step-ref bg-step">2378</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillRequest = read('../../business-services/requestPayload/collection-services/fetchBill.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2379"><div class="step-ref bg-step">2379</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillRequest = read('../../business-services/requestPayload/collection-services/cancelBill.json')</div></div><div class="time-cell passed">6</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2380"><div class="step-ref bg-step">2380</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2381"><div class="step-ref bg-step">2381</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillParams =</div></div><div class="time-cell passed">0</div></div><div class="preformatted" data-parent="2381">{
   consumerCode: '#(consumerCode)',
   businessService: '#(businessService)',
   tenantId: '#(tenantId)'
}</div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2382"><div class="step-ref bg-step">2382</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url fetchBill</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2383"><div class="step-ref bg-step">2383</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And params fetchBillParams</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillParams</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2384"><div class="step-ref bg-step">2384</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request fetchBillRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2385"><div class="step-ref bg-step">2385</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">128</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillResponse</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2386"><div class="step-ref bg-step">2386</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2387"><div class="step-ref bg-step">2387</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def fetchBillResponse = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2388"><div class="step-ref bg-step">2388</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmount = response.Bill[0].totalAmount</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2389"><div class="step-ref bg-step">2389</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billId = response.Bill[0].id</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2390"><div class="step-ref bg-step">2390</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def txnAmount = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2391"><div class="step-ref bg-step">2391</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmountPaid = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2392"><div class="step-ref bg-step">2392</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalDue = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2393"><div class="step-ref bg-step">2393</div><div class="step-indent"> </div><div class="step-cell passed">* def paidBillIdError = collectionServicesConstants.errorMessages.paidBillId</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2394"><div class="step-ref bg-step">2394</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillIdError = collectionServicesConstants.errorMessages.invalidBillId</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2395"><div class="step-ref bg-step">2395</div><div class="step-indent"> </div><div class="step-cell passed">* def totalAmountPaidError = collectionServicesConstants.errorMessages.totalAmountPaidNull</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2396"><div class="step-ref bg-step">2396</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentModeError = collectionServicesConstants.errorMessages.invalidPaymentMode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2397"><div class="step-ref bg-step">2397</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantIdError = commonConstants.errorMessages.invalidTenantIdError</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2398"><div class="step-ref bg-step">2398</div><div class="step-indent"> </div><div class="step-cell passed">* def nullTenantIdError = commonConstants.errorMessages.nullParameterError</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2399"><div class="step-ref bg-step">2399</div><div class="step-indent"> </div><div class="step-cell passed">* def reason = collectionServicesConstants.parameters.reason</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2400"><div class="step-ref bg-step">2400</div><div class="step-indent"> </div><div class="step-cell passed">* def action = collectionServicesConstants.parameters.action</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2401"><div class="step-ref bg-step">2401</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDateError = collectionServicesConstants.errorMessages.instrumentDateAsNull</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2402"><div class="step-ref bg-step">2402</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentPastDateError = collectionServicesConstants.errorMessages.instrumentDatePastNinetyDays</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2403"><div class="step-ref bg-step">2403</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentFutureDateError = collectionServicesConstants.errorMessages.futureInstrumentDate</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2404"><div class="step-ref bg-step">2404</div><div class="step-indent"> </div><div class="step-cell passed">* def moreThanDueAmountError = collectionServicesConstants.errorMessages.moreThanDueAmount</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2405"><div class="step-ref bg-step">2405</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberError = collectionServicesConstants.errorMessages.instrumentNumberAsEmptyString</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2406"><div class="step-ref bg-step">2406</div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberError = collectionServicesConstants.errorMessages.transactionNumberAsEmptyString</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2407"><div class="step-ref bg-step">2407</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/collectionServicesPretest.feature@createPayment')</div></div><div class="time-cell passed">494</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2407.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/collectionServicesPretest.feature</div></div><div class="time-cell passed">468</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2408"><div class="step-ref bg-step">2408</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">9</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2409"><div class="step-ref bg-step">2409</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2410"><div class="step-ref bg-step">2410</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2411"><div class="step-ref bg-step">2411</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def tenantId = tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2412"><div class="step-ref bg-step">2412</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentMode = collectionServicesConstants.parameters.paymentMode</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2413"><div class="step-ref bg-step">2413</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBy = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">6</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2414"><div class="step-ref bg-step">2414</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2415"><div class="step-ref bg-step">2415</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def payerName = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2416"><div class="step-ref bg-step">2416</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalDue = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2417"><div class="step-ref bg-step">2417</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumber = collectionServicesConstants.parameters.transactionNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2418"><div class="step-ref bg-step">2418</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumber = collectionServicesConstants.parameters.instrumentNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2419"><div class="step-ref bg-step">2419</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCard = collectionServicesConstants.parameters.paymentMode2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2420"><div class="step-ref bg-step">2420</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCheque = collectionServicesConstants.parameters.paymentModeForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2421"><div class="step-ref bg-step">2421</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberForCheque = collectionServicesConstants.parameters.transactionNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2422"><div class="step-ref bg-step">2422</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberForCheque = collectionServicesConstants.parameters.instrumentNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2423"><div class="step-ref bg-step">2423</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2424"><div class="step-ref bg-step">2424</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def ifscCode = collectionServicesConstants.parameters.ifscCode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2425"><div class="step-ref bg-step">2425</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2426"><div class="step-ref bg-step">2426</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2427"><div class="step-ref bg-step">2427</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequest = read('../../business-services/requestPayload/collection-services/create.json')</div></div><div class="time-cell passed">14</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2428"><div class="step-ref bg-step">2428</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def workflowRequest = read('../../business-services/requestPayload/collection-services/workflow.json')</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2429"><div class="step-ref bg-step">2429</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPaymentRequest = read('../../business-services/requestPayload/collection-services/search.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2430"><div class="step-ref bg-step">2430</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTreceiptcount = read('../../business-services/requestPayload/collection-services/receiptcount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2431"><div class="step-ref bg-step">2431</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequestForCheque = read('../../business-services/requestPayload/collection-services/createPaymentWithCheque.json')</div></div><div class="time-cell passed">11</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2432"><div class="step-ref bg-step">2432</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def eChallanPaymentcount = read('../../business-services/requestPayload/collection-services/echallancount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2433"><div class="step-ref bg-step">2433</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2434"><div class="step-ref bg-step">2434</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = 'invalid_'+randomNumber(4)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2435"><div class="step-ref bg-step">2435</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBusinessId = 'PT'+randomNumber(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2436"><div class="step-ref bg-step">2436</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentMode = randomString(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2437"><div class="step-ref bg-step">2437</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantId = randomString(5)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2438"><div class="step-ref bg-step">2438</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def negativeTotalAmount = '-'+randomNumber(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2439"><div class="step-ref bg-step">2439</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url payment</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2440"><div class="step-ref bg-step">2440</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request createPaymentRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print createPaymentRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2441"><div class="step-ref bg-step">2441</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">379</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2442"><div class="step-ref bg-step">2442</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2443"><div class="step-ref bg-step">2443</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2444"><div class="step-ref bg-step">2444</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2445"><div class="step-ref bg-step">2445</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def Payments = collectionServicesResponseBody.Payments</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2446"><div class="step-ref bg-step">2446</div><div class="step-indent"> </div><div class="step-cell passed">* match response.ResponseInfo.status == '200 OK'</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2447"><div class="step-ref bg-step">2447</div><div class="step-indent"> </div><div class="step-cell passed">* def paymentId = collectionServicesResponseBody.Payments[0].id</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2448"><div class="step-ref bg-step">2448</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/collectionServicesPretest.feature@processworkflow')</div></div><div class="time-cell passed">1038</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2448.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/collectionServicesPretest.feature</div></div><div class="time-cell passed">1018</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2449"><div class="step-ref bg-step">2449</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">7</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2450"><div class="step-ref bg-step">2450</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2451"><div class="step-ref bg-step">2451</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2452"><div class="step-ref bg-step">2452</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def tenantId = tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2453"><div class="step-ref bg-step">2453</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentMode = collectionServicesConstants.parameters.paymentMode</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2454"><div class="step-ref bg-step">2454</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBy = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">14</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2455"><div class="step-ref bg-step">2455</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2456"><div class="step-ref bg-step">2456</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def payerName = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2457"><div class="step-ref bg-step">2457</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalDue = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2458"><div class="step-ref bg-step">2458</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumber = collectionServicesConstants.parameters.transactionNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2459"><div class="step-ref bg-step">2459</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumber = collectionServicesConstants.parameters.instrumentNumber</div></div><div class="time-cell passed">14</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2460"><div class="step-ref bg-step">2460</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCard = collectionServicesConstants.parameters.paymentMode2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2461"><div class="step-ref bg-step">2461</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCheque = collectionServicesConstants.parameters.paymentModeForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2462"><div class="step-ref bg-step">2462</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberForCheque = collectionServicesConstants.parameters.transactionNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2463"><div class="step-ref bg-step">2463</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberForCheque = collectionServicesConstants.parameters.instrumentNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2464"><div class="step-ref bg-step">2464</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">21</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2465"><div class="step-ref bg-step">2465</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def ifscCode = collectionServicesConstants.parameters.ifscCode</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2466"><div class="step-ref bg-step">2466</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2467"><div class="step-ref bg-step">2467</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2468"><div class="step-ref bg-step">2468</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequest = read('../../business-services/requestPayload/collection-services/create.json')</div></div><div class="time-cell passed">18</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2469"><div class="step-ref bg-step">2469</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def workflowRequest = read('../../business-services/requestPayload/collection-services/workflow.json')</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2470"><div class="step-ref bg-step">2470</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPaymentRequest = read('../../business-services/requestPayload/collection-services/search.json')</div></div><div class="time-cell passed">10</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2471"><div class="step-ref bg-step">2471</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTreceiptcount = read('../../business-services/requestPayload/collection-services/receiptcount.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2472"><div class="step-ref bg-step">2472</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequestForCheque = read('../../business-services/requestPayload/collection-services/createPaymentWithCheque.json')</div></div><div class="time-cell passed">10</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2473"><div class="step-ref bg-step">2473</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def eChallanPaymentcount = read('../../business-services/requestPayload/collection-services/echallancount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2474"><div class="step-ref bg-step">2474</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2475"><div class="step-ref bg-step">2475</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = 'invalid_'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2476"><div class="step-ref bg-step">2476</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBusinessId = 'PT'+randomNumber(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2477"><div class="step-ref bg-step">2477</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentMode = randomString(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2478"><div class="step-ref bg-step">2478</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantId = randomString(5)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2479"><div class="step-ref bg-step">2479</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def negativeTotalAmount = '-'+randomNumber(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2480"><div class="step-ref bg-step">2480</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url collectionServiceWorkflowUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2481"><div class="step-ref bg-step">2481</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request workflowRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print workflowRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2482"><div class="step-ref bg-step">2482</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">882</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2483"><div class="step-ref bg-step">2483</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2484"><div class="step-ref bg-step">2484</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[12:104]bg"><div class="step-container" id="2485"><div class="step-ref bg-step">2485</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2486"><div class="step-ref passed">2486</div><div class="step-cell passed">* def key = pdfCreateConstant.parameters.valid.keyForTl</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-cell comment"># calling create pdf nosave pretest</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2487"><div class="step-ref passed">2487</div><div class="step-cell passed">* call read('../../core-services/pretests/pdfServiceCreateNoSave.feature@createPdfNosaveSuccessfully')</div></div><div class="time-cell passed">2311</div></div><div class="step-row"><div class="step-container" id="2487.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-cell passed">com/egov/core-services/tests/../../core-services/pretests/pdfServiceCreateNoSave.feature</div></div><div class="time-cell passed">2300</div></div><div class="step-row"><div class="step-container" id="2488"><div class="step-ref passed">2488</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/tests/collectionServicesCreate.feature@Create_PaymentWithValidBillID_01')</div></div><div class="time-cell passed">1891</div></div><div class="step-row"><div class="step-container" id="2488.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/tests/collectionServicesCreate.feature</div></div><div class="time-cell passed">1874</div></div><div class="step-row"><div class="step-container" id="2489"><div class="step-ref passed">2489</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/tests/billingServicesDemand.feature@create_01')</div></div><div class="time-cell passed">274</div></div><div class="step-row"><div class="step-container" id="2489.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/tests/billingServicesDemand.feature</div></div><div class="time-cell passed">243</div></div><div class="step-row"><div class="step-container" id="2490"><div class="step-ref passed">2490</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">8</div></div><div class="step-row"><div class="step-container" id="2491"><div class="step-ref passed">2491</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceDemandConstants = read('../../business-services/constants/billing-service-demand.yaml')</div></div><div class="time-cell passed">6</div></div><div class="step-row"><div class="step-container" id="2492"><div class="step-ref passed">2492</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container" id="2493"><div class="step-ref passed">2493</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2494"><div class="step-ref passed">2494</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def consumerType = mdmsStateBillingService.BusinessService[0].businessService</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2495"><div class="step-ref passed">2495</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = mdmsStateBillingService.BusinessService[0].code</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2496"><div class="step-ref passed">2496</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxPeriodFrom = getCurrentEpochTime()</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2497"><div class="step-ref passed">2497</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def daysFromToday = 2</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2498"><div class="step-ref passed">2498</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxPeriodTo = getEpochDate(daysFromToday)</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2499"><div class="step-ref passed">2499</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxHeadMasterCodes = karate.jsonPath(mdmsStateBillingService, "$.TaxHeadMaster[?(@.service=='" + businessService + "')].code")</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2500"><div class="step-ref passed">2500</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxHeadMasterCode = taxHeadMasterCodes[randomNumber(taxHeadMasterCodes.length)]</div></div><div class="time-cell passed">6</div></div><div class="step-row"><div class="step-container" id="2501"><div class="step-ref passed">2501</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxAmount = 200</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2502"><div class="step-ref passed">2502</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionAmount = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2503"><div class="step-ref passed">2503</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def minimumAmountPayable = 1</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Steps to create a new Employee through HRMS</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2504"><div class="step-ref passed">2504</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServiceDemandPretest.feature@createBillDemand')</div></div><div class="time-cell passed">195</div></div><div class="step-row"><div class="step-container" id="2504.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServiceDemandPretest.feature</div></div><div class="time-cell passed">183</div></div><div class="step-row"><div class="step-container" id="2505"><div class="step-ref passed">2505</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2506"><div class="step-ref passed">2506</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceDemandConstants = read('../../business-services/constants/billing-service-demand.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2507"><div class="step-ref passed">2507</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2508"><div class="step-ref passed">2508</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createDemandRequest = read('../../business-services/requestPayload/billing-service-demand/create.json')</div></div><div class="time-cell passed">12</div></div><div class="step-row"><div class="step-container" id="2509"><div class="step-ref passed">2509</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchDemandRequest = read('../../business-services/requestPayload/billing-service-demand/search.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="2510"><div class="step-ref passed">2510</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def updateDemandRequest = read('../../business-services/requestPayload/billing-service-demand/update.json')</div></div><div class="time-cell passed">16</div></div><div class="step-row"><div class="step-container" id="2511"><div class="step-ref passed">2511</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="2512"><div class="step-ref passed">2512</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url createDemandUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print createDemandRequest</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2513"><div class="step-ref passed">2513</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request createDemandRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2514"><div class="step-ref passed">2514</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">139</div></div><div class="step-row"><div class="step-container" id="2515"><div class="step-ref passed">2515</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2516"><div class="step-ref passed">2516</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billingServiceDemandResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2517"><div class="step-ref passed">2517</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billingServiceDemandResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2518"><div class="step-ref passed">2518</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* print billingServiceDemandResponseBody</div></div><div class="time-cell passed">0</div></div><div class="preformatted" data-parent="2518">15:37:54.687 [print] {
  "ResponseInfo": {
    "ver": null,
    "resMsgId": null,
    "msgId": null,
    "apiId": null,
    "ts": null,
    "status": "201 CREATED"
  },
  "Demands": [
    {
      "taxPeriodFrom": 1628590074484,
      "businessService": "PT",
      "minimumAmountPayable": 1,
      "taxPeriodTo": 1628762874487,
      "fixedBillExpiryDate": null,
      "additionalDetails": null,
      "payer": null,
      "demandDetails": [
        {
          "demandId": "4f7a5900-a57d-44bc-b341-9198f1cdb231",
          "taxHeadMasterCode": "PT_FIRE_CESS",
          "collectionAmount": 0,
          "auditDetails": {
            "lastModifiedTime": 1628590074875,
            "createdBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
            "lastModifiedBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
            "createdTime": 1628590074875
          },
          "tenantId": "pb.amritsar",
          "id": "ab7d52b8-80ae-45ec-9e89-a1047d128874",
          "taxAmount": 200,
          "additionalDetails": null
        }
      ],
      "consumerType": "PropertyTax",
      "auditDetails": {
        "lastModifiedTime": 1628590074875,
        "createdBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
        "lastModifiedBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
        "createdTime": 1628590074875
      },
      "tenantId": "pb.amritsar",
      "consumerCode": "Consumer-Code-Test-345004",
      "id": "4f7a5900-a57d-44bc-b341-9198f1cdb231",
      "billExpiryTime": null,
      "isPaymentCompleted": false,
      "status": "ACTIVE"
    }
  ],
  "CollectedReceipt": null
}</div><div class="step-row"><div class="step-container" id="2519"><div class="step-ref passed">2519</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def Demands = billingServiceDemandResponseBody.Demands</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2520"><div class="step-ref passed">2520</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def demandId = Demands[0].id</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2521"><div class="step-ref passed">2521</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def consumerCode = Demands[0].consumerCode</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the status Created</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2522"><div class="step-ref passed">2522</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* assert billingServiceDemandResponseBody.ResponseInfo.status == commonConstants.expectedStatus.created</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand id is present</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2523"><div class="step-ref passed">2523</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].id == "#present"</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the tenantId of demand response is equal with current tenantId</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2524"><div class="step-ref passed">2524</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].tenantId == tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the consumer code of demand response is equal with defined consumerCode</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2525"><div class="step-ref passed">2525</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].consumerCode == consumerCode</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the consumerType of demand response is equal with defined consumerType</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2526"><div class="step-ref passed">2526</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].consumerType == consumerType</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the businessService of demand response is equal with defined businessService</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2527"><div class="step-ref passed">2527</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].businessService == businessService</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxPeriodFrom of demand response is equal with defined taxPeriodFrom</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2528"><div class="step-ref passed">2528</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].taxPeriodFrom == taxPeriodFrom</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxPeriodTo of demand response is equal with defined taxPeriodTo</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2529"><div class="step-ref passed">2529</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].taxPeriodTo == taxPeriodTo</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand details id is present in demand response body</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2530"><div class="step-ref passed">2530</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].id == "#present"</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demandId is present in demand response body</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2531"><div class="step-ref passed">2531</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].demandId == "#present"</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxHeadMasterCode of demand response is equal with defined taxHeadMasterCode</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2532"><div class="step-ref passed">2532</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].taxHeadMasterCode == taxHeadMasterCode</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxAmount of demand response is equal with defined taxAmount</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2533"><div class="step-ref passed">2533</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].taxAmount == taxAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the collectionAmount of demand response is equal with defined collectionAmount</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2534"><div class="step-ref passed">2534</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].collectionAmount == collectionAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the minimumAmountPayable of demand response is equal with defined minimumAmountPayable</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2535"><div class="step-ref passed">2535</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].minimumAmountPayable == minimumAmountPayable</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand status is equal with expected demand status `ACTIVE`</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2536"><div class="step-ref passed">2536</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].status == billingServiceDemandConstants.parameters.status</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2537"><div class="step-ref passed">2537</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2538"><div class="step-ref passed">2538</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2539"><div class="step-ref passed">2539</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2540"><div class="step-ref passed">2540</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">7</div></div><div class="step-row"><div class="step-container" id="2541"><div class="step-ref passed">2541</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServicePretest.feature@fetchBill')</div></div><div class="time-cell passed">184</div></div><div class="step-row"><div class="step-container" id="2541.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServicePretest.feature</div></div><div class="time-cell passed">174</div></div><div class="step-row"><div class="step-container" id="2542"><div class="step-ref passed">2542</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceConstants = read('../../business-services/constants/billing-service.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="2543"><div class="step-ref passed">2543</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionServiceConstants = read('../../business-services/constants/apportionService.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="2544"><div class="step-ref passed">2544</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = billingServiceConstants.parameters.businessService</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2545"><div class="step-ref passed">2545</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionbusinessService = apportionServiceConstants.parameters.businessService</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2546"><div class="step-ref passed">2546</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason1 = apportionServiceConstants.parameters.reason1</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2547"><div class="step-ref passed">2547</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason2 = apportionServiceConstants.parameters.reason2</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2548"><div class="step-ref passed">2548</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason3 = apportionServiceConstants.parameters.reason3</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="2549"><div class="step-ref passed">2549</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason4 = apportionServiceConstants.parameters.reason4</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment">#* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2550"><div class="step-ref passed">2550</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillRequest = read('../../business-services/requestPayload/collection-services/fetchBill.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="2551"><div class="step-ref passed">2551</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillRequest = read('../../business-services/requestPayload/collection-services/cancelBill.json')</div></div><div class="time-cell passed">6</div></div><div class="step-row"><div class="step-container" id="2552"><div class="step-ref passed">2552</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2553"><div class="step-ref passed">2553</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillParams =</div></div><div class="time-cell passed">0</div></div><div class="preformatted" data-parent="2553">{
   consumerCode: '#(consumerCode)',
   businessService: '#(businessService)',
   tenantId: '#(tenantId)'
}</div><div class="step-row"><div class="step-container" id="2554"><div class="step-ref passed">2554</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url fetchBill</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2555"><div class="step-ref passed">2555</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And params fetchBillParams</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillParams</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2556"><div class="step-ref passed">2556</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request fetchBillRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2557"><div class="step-ref passed">2557</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">145</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillResponse</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2558"><div class="step-ref passed">2558</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2559"><div class="step-ref passed">2559</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def fetchBillResponse = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2560"><div class="step-ref passed">2560</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmount = response.Bill[0].totalAmount</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2561"><div class="step-ref passed">2561</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billId = response.Bill[0].id</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2562"><div class="step-ref passed">2562</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def txnAmount = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2563"><div class="step-ref passed">2563</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmountPaid = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2564"><div class="step-ref passed">2564</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalDue = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2565"><div class="step-ref passed">2565</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBillIdError = collectionServicesConstants.errorMessages.paidBillId</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2566"><div class="step-ref passed">2566</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillIdError = collectionServicesConstants.errorMessages.invalidBillId</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2567"><div class="step-ref passed">2567</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalAmountPaidError = collectionServicesConstants.errorMessages.totalAmountPaidNull</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2568"><div class="step-ref passed">2568</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentModeError = collectionServicesConstants.errorMessages.invalidPaymentMode</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2569"><div class="step-ref passed">2569</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantIdError = commonConstants.errorMessages.invalidTenantIdError</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2570"><div class="step-ref passed">2570</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def nullTenantIdError = commonConstants.errorMessages.nullParameterError</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2571"><div class="step-ref passed">2571</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def reason = collectionServicesConstants.parameters.reason</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2572"><div class="step-ref passed">2572</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def action = collectionServicesConstants.parameters.action</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2573"><div class="step-ref passed">2573</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDateError = collectionServicesConstants.errorMessages.instrumentDateAsNull</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2574"><div class="step-ref passed">2574</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentPastDateError = collectionServicesConstants.errorMessages.instrumentDatePastNinetyDays</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2575"><div class="step-ref passed">2575</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentFutureDateError = collectionServicesConstants.errorMessages.futureInstrumentDate</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="2576"><div class="step-ref passed">2576</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def moreThanDueAmountError = collectionServicesConstants.errorMessages.moreThanDueAmount</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2577"><div class="step-ref passed">2577</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberError = collectionServicesConstants.errorMessages.instrumentNumberAsEmptyString</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2578"><div class="step-ref passed">2578</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberError = collectionServicesConstants.errorMessages.transactionNumberAsEmptyString</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2579"><div class="step-ref passed">2579</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/collectionServicesPretest.feature@createPayment')</div></div><div class="time-cell passed">478</div></div><div class="step-row"><div class="step-container" id="2579.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/collectionServicesPretest.feature</div></div><div class="time-cell passed">458</div></div><div class="step-row"><div class="step-container" id="2580"><div class="step-ref passed">2580</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2581"><div class="step-ref passed">2581</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2582"><div class="step-ref passed">2582</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2583"><div class="step-ref passed">2583</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def tenantId = tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2584"><div class="step-ref passed">2584</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentMode = collectionServicesConstants.parameters.paymentMode</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2585"><div class="step-ref passed">2585</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBy = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="2586"><div class="step-ref passed">2586</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">8</div></div><div class="step-row"><div class="step-container" id="2587"><div class="step-ref passed">2587</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def payerName = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2588"><div class="step-ref passed">2588</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalDue = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2589"><div class="step-ref passed">2589</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumber = collectionServicesConstants.parameters.transactionNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2590"><div class="step-ref passed">2590</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumber = collectionServicesConstants.parameters.instrumentNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2591"><div class="step-ref passed">2591</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCard = collectionServicesConstants.parameters.paymentMode2</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2592"><div class="step-ref passed">2592</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCheque = collectionServicesConstants.parameters.paymentModeForCheque</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2593"><div class="step-ref passed">2593</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberForCheque = collectionServicesConstants.parameters.transactionNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2594"><div class="step-ref passed">2594</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberForCheque = collectionServicesConstants.parameters.instrumentNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2595"><div class="step-ref passed">2595</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container" id="2596"><div class="step-ref passed">2596</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def ifscCode = collectionServicesConstants.parameters.ifscCode</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2597"><div class="step-ref passed">2597</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2598"><div class="step-ref passed">2598</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2599"><div class="step-ref passed">2599</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequest = read('../../business-services/requestPayload/collection-services/create.json')</div></div><div class="time-cell passed">11</div></div><div class="step-row"><div class="step-container" id="2600"><div class="step-ref passed">2600</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def workflowRequest = read('../../business-services/requestPayload/collection-services/workflow.json')</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container" id="2601"><div class="step-ref passed">2601</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPaymentRequest = read('../../business-services/requestPayload/collection-services/search.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2602"><div class="step-ref passed">2602</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTreceiptcount = read('../../business-services/requestPayload/collection-services/receiptcount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2603"><div class="step-ref passed">2603</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequestForCheque = read('../../business-services/requestPayload/collection-services/createPaymentWithCheque.json')</div></div><div class="time-cell passed">9</div></div><div class="step-row"><div class="step-container" id="2604"><div class="step-ref passed">2604</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def eChallanPaymentcount = read('../../business-services/requestPayload/collection-services/echallancount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2605"><div class="step-ref passed">2605</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="2606"><div class="step-ref passed">2606</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = 'invalid_'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2607"><div class="step-ref passed">2607</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBusinessId = 'PT'+randomNumber(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2608"><div class="step-ref passed">2608</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentMode = randomString(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2609"><div class="step-ref passed">2609</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantId = randomString(5)</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2610"><div class="step-ref passed">2610</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def negativeTotalAmount = '-'+randomNumber(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2611"><div class="step-ref passed">2611</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url payment</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2612"><div class="step-ref passed">2612</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request createPaymentRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print createPaymentRequest</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2613"><div class="step-ref passed">2613</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">380</div></div><div class="step-row"><div class="step-container" id="2614"><div class="step-ref passed">2614</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2615"><div class="step-ref passed">2615</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2616"><div class="step-ref passed">2616</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2617"><div class="step-ref passed">2617</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def Payments = collectionServicesResponseBody.Payments</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2618"><div class="step-ref passed">2618</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match response.ResponseInfo.status == '200 OK'</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2619"><div class="step-ref passed">2619</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentId = collectionServicesResponseBody.Payments[0].id</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2620"><div class="step-ref passed">2620</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/collectionServicesPretest.feature@processworkflow')</div></div><div class="time-cell passed">907</div></div><div class="step-row"><div class="step-container" id="2620.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/collectionServicesPretest.feature</div></div><div class="time-cell passed">885</div></div><div class="step-row"><div class="step-container" id="2621"><div class="step-ref passed">2621</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">10</div></div><div class="step-row"><div class="step-container" id="2622"><div class="step-ref passed">2622</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="2623"><div class="step-ref passed">2623</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2624"><div class="step-ref passed">2624</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def tenantId = tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2625"><div class="step-ref passed">2625</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentMode = collectionServicesConstants.parameters.paymentMode</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2626"><div class="step-ref passed">2626</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBy = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="2627"><div class="step-ref passed">2627</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="2628"><div class="step-ref passed">2628</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def payerName = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2629"><div class="step-ref passed">2629</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalDue = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2630"><div class="step-ref passed">2630</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumber = collectionServicesConstants.parameters.transactionNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2631"><div class="step-ref passed">2631</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumber = collectionServicesConstants.parameters.instrumentNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2632"><div class="step-ref passed">2632</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCard = collectionServicesConstants.parameters.paymentMode2</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="2633"><div class="step-ref passed">2633</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCheque = collectionServicesConstants.parameters.paymentModeForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2634"><div class="step-ref passed">2634</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberForCheque = collectionServicesConstants.parameters.transactionNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2635"><div class="step-ref passed">2635</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberForCheque = collectionServicesConstants.parameters.instrumentNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2636"><div class="step-ref passed">2636</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2637"><div class="step-ref passed">2637</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def ifscCode = collectionServicesConstants.parameters.ifscCode</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2638"><div class="step-ref passed">2638</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2639"><div class="step-ref passed">2639</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2640"><div class="step-ref passed">2640</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequest = read('../../business-services/requestPayload/collection-services/create.json')</div></div><div class="time-cell passed">7</div></div><div class="step-row"><div class="step-container" id="2641"><div class="step-ref passed">2641</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def workflowRequest = read('../../business-services/requestPayload/collection-services/workflow.json')</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="2642"><div class="step-ref passed">2642</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPaymentRequest = read('../../business-services/requestPayload/collection-services/search.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2643"><div class="step-ref passed">2643</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTreceiptcount = read('../../business-services/requestPayload/collection-services/receiptcount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2644"><div class="step-ref passed">2644</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequestForCheque = read('../../business-services/requestPayload/collection-services/createPaymentWithCheque.json')</div></div><div class="time-cell passed">8</div></div><div class="step-row"><div class="step-container" id="2645"><div class="step-ref passed">2645</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def eChallanPaymentcount = read('../../business-services/requestPayload/collection-services/echallancount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2646"><div class="step-ref passed">2646</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2647"><div class="step-ref passed">2647</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = 'invalid_'+randomNumber(4)</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="2648"><div class="step-ref passed">2648</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBusinessId = 'PT'+randomNumber(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2649"><div class="step-ref passed">2649</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentMode = randomString(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2650"><div class="step-ref passed">2650</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantId = randomString(5)</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2651"><div class="step-ref passed">2651</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def negativeTotalAmount = '-'+randomNumber(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2652"><div class="step-ref passed">2652</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url collectionServiceWorkflowUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2653"><div class="step-ref passed">2653</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request workflowRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print workflowRequest</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2654"><div class="step-ref passed">2654</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">815</div></div><div class="step-row"><div class="step-container" id="2655"><div class="step-ref passed">2655</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2656"><div class="step-ref passed">2656</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2657"><div class="step-ref passed">2657</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2658"><div class="step-ref passed">2658</div><div class="step-indent"> </div><div class="step-cell passed">* def Payments = Payments</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2659"><div class="step-ref passed">2659</div><div class="step-indent"> </div><div class="step-cell passed">* def Bill = Payments[0].paymentDetails[0].bill</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2660"><div class="step-ref passed">2660</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreateNoSavePayload = read('../../core-services/requestPayload/pdf-service/pdfCreateNoSave.json')</div></div><div class="time-cell passed">6</div></div><div class="step-row"><div class="step-container" id="2661"><div class="step-ref passed">2661</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreateNoSavePayloadFirst = pdfCreateNoSavePayload.WS</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2662"><div class="step-ref passed">2662</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreateNoSaveParam =</div></div><div class="time-cell passed">1</div></div><div class="preformatted" data-parent="2662">{
 key: '#(key)',
 tenantId: '#(tenantId)'
}</div><div class="step-row"><div class="step-container" id="2663"><div class="step-ref passed">2663</div><div class="step-indent"> </div><div class="step-cell passed">Given url createNoSavePdf</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2664"><div class="step-ref passed">2664</div><div class="step-indent"> </div><div class="step-cell passed">And params pdfCreateNoSaveParam</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2665"><div class="step-ref passed">2665</div><div class="step-indent"> </div><div class="step-cell passed">And request pdfCreateNoSavePayload</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2666"><div class="step-ref passed">2666</div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">399</div></div><div class="step-row"><div class="step-container" id="2667"><div class="step-ref passed">2667</div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2668"><div class="step-ref passed">2668</div><div class="step-indent"> </div><div class="step-cell passed">And def pdfCreateNoSaveResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2669"><div class="step-ref passed">2669</div><div class="step-indent"> </div><div class="step-cell passed">And def pdfCreateNoSaveResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2670"><div class="step-ref passed">2670</div><div class="step-cell passed">* match pdfCreateNoSaveResponseBody == '#present'</div></div><div class="time-cell passed">1</div></div></div><div class="scenario"><div class="scenario-heading" id="[13:111]"><div class="heading-container"><div class="scenario-tags"><a class="badge badge-primary" href="karate-tags.html">pdf_createnosave_WS_03</a><a class="badge badge-primary" href="karate-tags.html">regression</a><a class="badge badge-primary" href="karate-tags.html">positive</a><a class="badge badge-primary" href="karate-tags.html">pdfservice</a><a class="badge badge-primary" href="karate-tags.html">coreServices</a></div><span class="scenario-keyword">Scenario: [13:111]</span><span class="scenario-name">Generate PDF config for WS module for a given key and tenantid </span></div><div class="scenario-time failed">ms: 4493</div></div><div class="step-row"><div class="step-container" id="[13:111]bg"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-cell passed">Background:</div></div><div class="time-cell passed"></div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-cell comment"># reading javascript utils for using generic methods</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2671"><div class="step-ref bg-step">2671</div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">8</div></div><div class="preformatted" data-parent="2671">15:37:56.781 karate.env:  
15:37:56.781 locale: en_IN 
15:37:56.781 tenantId: pb.amritsar</div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2672"><div class="step-ref bg-step">2672</div><div class="step-cell passed">* def pdfCreateConstant = read('../../core-services/constants/pdfService.yaml')</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2673"><div class="step-ref bg-step">2673</div><div class="step-cell passed">* call read('../../business-services/tests/collectionServicesCreate.feature@Create_PaymentWithValidBillID_01')</div></div><div class="time-cell passed">1973</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2673.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/tests/collectionServicesCreate.feature</div></div><div class="time-cell passed">1940</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2674"><div class="step-ref bg-step">2674</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/tests/billingServicesDemand.feature@create_01')</div></div><div class="time-cell passed">287</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2674.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/tests/billingServicesDemand.feature</div></div><div class="time-cell passed">238</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2675"><div class="step-ref bg-step">2675</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2676"><div class="step-ref bg-step">2676</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceDemandConstants = read('../../business-services/constants/billing-service-demand.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2677"><div class="step-ref bg-step">2677</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2678"><div class="step-ref bg-step">2678</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2679"><div class="step-ref bg-step">2679</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def consumerType = mdmsStateBillingService.BusinessService[0].businessService</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2680"><div class="step-ref bg-step">2680</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = mdmsStateBillingService.BusinessService[0].code</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2681"><div class="step-ref bg-step">2681</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxPeriodFrom = getCurrentEpochTime()</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2682"><div class="step-ref bg-step">2682</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def daysFromToday = 2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2683"><div class="step-ref bg-step">2683</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxPeriodTo = getEpochDate(daysFromToday)</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2684"><div class="step-ref bg-step">2684</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxHeadMasterCodes = karate.jsonPath(mdmsStateBillingService, "$.TaxHeadMaster[?(@.service=='" + businessService + "')].code")</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2685"><div class="step-ref bg-step">2685</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxHeadMasterCode = taxHeadMasterCodes[randomNumber(taxHeadMasterCodes.length)]</div></div><div class="time-cell passed">6</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2686"><div class="step-ref bg-step">2686</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxAmount = 200</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2687"><div class="step-ref bg-step">2687</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionAmount = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2688"><div class="step-ref bg-step">2688</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def minimumAmountPayable = 1</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Steps to create a new Employee through HRMS</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2689"><div class="step-ref bg-step">2689</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServiceDemandPretest.feature@createBillDemand')</div></div><div class="time-cell passed">197</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2689.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServiceDemandPretest.feature</div></div><div class="time-cell passed">182</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2690"><div class="step-ref bg-step">2690</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2691"><div class="step-ref bg-step">2691</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceDemandConstants = read('../../business-services/constants/billing-service-demand.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2692"><div class="step-ref bg-step">2692</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2693"><div class="step-ref bg-step">2693</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createDemandRequest = read('../../business-services/requestPayload/billing-service-demand/create.json')</div></div><div class="time-cell passed">10</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2694"><div class="step-ref bg-step">2694</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchDemandRequest = read('../../business-services/requestPayload/billing-service-demand/search.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2695"><div class="step-ref bg-step">2695</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def updateDemandRequest = read('../../business-services/requestPayload/billing-service-demand/update.json')</div></div><div class="time-cell passed">14</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2696"><div class="step-ref bg-step">2696</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2697"><div class="step-ref bg-step">2697</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url createDemandUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print createDemandRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2698"><div class="step-ref bg-step">2698</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request createDemandRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2699"><div class="step-ref bg-step">2699</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">144</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2700"><div class="step-ref bg-step">2700</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2701"><div class="step-ref bg-step">2701</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billingServiceDemandResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2702"><div class="step-ref bg-step">2702</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billingServiceDemandResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2703"><div class="step-ref bg-step">2703</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* print billingServiceDemandResponseBody</div></div><div class="time-cell passed">0</div></div><div class="preformatted" data-parent="2703">15:37:57.103 [print] {
  "ResponseInfo": {
    "ver": null,
    "resMsgId": null,
    "msgId": null,
    "apiId": null,
    "ts": null,
    "status": "201 CREATED"
  },
  "Demands": [
    {
      "taxPeriodFrom": 1628590076893,
      "businessService": "PT",
      "minimumAmountPayable": 1,
      "taxPeriodTo": 1628762876897,
      "fixedBillExpiryDate": null,
      "additionalDetails": null,
      "payer": null,
      "demandDetails": [
        {
          "demandId": "0078605c-39c0-48b4-8081-582e64de094d",
          "taxHeadMasterCode": "PT_TIME_INTEREST",
          "collectionAmount": 0,
          "auditDetails": {
            "lastModifiedTime": 1628590077293,
            "createdBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
            "lastModifiedBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
            "createdTime": 1628590077293
          },
          "tenantId": "pb.amritsar",
          "id": "02248800-b9c0-48fc-9a43-e2c5decb8c1f",
          "taxAmount": 200,
          "additionalDetails": null
        }
      ],
      "consumerType": "PropertyTax",
      "auditDetails": {
        "lastModifiedTime": 1628590077293,
        "createdBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
        "lastModifiedBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
        "createdTime": 1628590077293
      },
      "tenantId": "pb.amritsar",
      "consumerCode": "Consumer-Code-Test-846093",
      "id": "0078605c-39c0-48b4-8081-582e64de094d",
      "billExpiryTime": null,
      "isPaymentCompleted": false,
      "status": "ACTIVE"
    }
  ],
  "CollectedReceipt": null
}</div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2704"><div class="step-ref bg-step">2704</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def Demands = billingServiceDemandResponseBody.Demands</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2705"><div class="step-ref bg-step">2705</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def demandId = Demands[0].id</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2706"><div class="step-ref bg-step">2706</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def consumerCode = Demands[0].consumerCode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the status Created</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2707"><div class="step-ref bg-step">2707</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* assert billingServiceDemandResponseBody.ResponseInfo.status == commonConstants.expectedStatus.created</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand id is present</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2708"><div class="step-ref bg-step">2708</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].id == "#present"</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the tenantId of demand response is equal with current tenantId</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2709"><div class="step-ref bg-step">2709</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].tenantId == tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the consumer code of demand response is equal with defined consumerCode</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2710"><div class="step-ref bg-step">2710</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].consumerCode == consumerCode</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the consumerType of demand response is equal with defined consumerType</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2711"><div class="step-ref bg-step">2711</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].consumerType == consumerType</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the businessService of demand response is equal with defined businessService</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2712"><div class="step-ref bg-step">2712</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].businessService == businessService</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxPeriodFrom of demand response is equal with defined taxPeriodFrom</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2713"><div class="step-ref bg-step">2713</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].taxPeriodFrom == taxPeriodFrom</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxPeriodTo of demand response is equal with defined taxPeriodTo</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2714"><div class="step-ref bg-step">2714</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].taxPeriodTo == taxPeriodTo</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand details id is present in demand response body</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2715"><div class="step-ref bg-step">2715</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].id == "#present"</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demandId is present in demand response body</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2716"><div class="step-ref bg-step">2716</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].demandId == "#present"</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxHeadMasterCode of demand response is equal with defined taxHeadMasterCode</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2717"><div class="step-ref bg-step">2717</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].taxHeadMasterCode == taxHeadMasterCode</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxAmount of demand response is equal with defined taxAmount</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2718"><div class="step-ref bg-step">2718</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].taxAmount == taxAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the collectionAmount of demand response is equal with defined collectionAmount</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2719"><div class="step-ref bg-step">2719</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].collectionAmount == collectionAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the minimumAmountPayable of demand response is equal with defined minimumAmountPayable</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2720"><div class="step-ref bg-step">2720</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].minimumAmountPayable == minimumAmountPayable</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand status is equal with expected demand status `ACTIVE`</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2721"><div class="step-ref bg-step">2721</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].status == billingServiceDemandConstants.parameters.status</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2722"><div class="step-ref bg-step">2722</div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2723"><div class="step-ref bg-step">2723</div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2724"><div class="step-ref bg-step">2724</div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2725"><div class="step-ref bg-step">2725</div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2726"><div class="step-ref bg-step">2726</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServicePretest.feature@fetchBill')</div></div><div class="time-cell passed">208</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2726.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServicePretest.feature</div></div><div class="time-cell passed">190</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2727"><div class="step-ref bg-step">2727</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceConstants = read('../../business-services/constants/billing-service.yaml')</div></div><div class="time-cell passed">6</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2728"><div class="step-ref bg-step">2728</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionServiceConstants = read('../../business-services/constants/apportionService.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2729"><div class="step-ref bg-step">2729</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = billingServiceConstants.parameters.businessService</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2730"><div class="step-ref bg-step">2730</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionbusinessService = apportionServiceConstants.parameters.businessService</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2731"><div class="step-ref bg-step">2731</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason1 = apportionServiceConstants.parameters.reason1</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2732"><div class="step-ref bg-step">2732</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason2 = apportionServiceConstants.parameters.reason2</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2733"><div class="step-ref bg-step">2733</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason3 = apportionServiceConstants.parameters.reason3</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2734"><div class="step-ref bg-step">2734</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason4 = apportionServiceConstants.parameters.reason4</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment">#* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2735"><div class="step-ref bg-step">2735</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillRequest = read('../../business-services/requestPayload/collection-services/fetchBill.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2736"><div class="step-ref bg-step">2736</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillRequest = read('../../business-services/requestPayload/collection-services/cancelBill.json')</div></div><div class="time-cell passed">9</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2737"><div class="step-ref bg-step">2737</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2738"><div class="step-ref bg-step">2738</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillParams =</div></div><div class="time-cell passed">0</div></div><div class="preformatted" data-parent="2738">{
   consumerCode: '#(consumerCode)',
   businessService: '#(businessService)',
   tenantId: '#(tenantId)'
}</div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2739"><div class="step-ref bg-step">2739</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url fetchBill</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2740"><div class="step-ref bg-step">2740</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And params fetchBillParams</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillParams</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2741"><div class="step-ref bg-step">2741</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request fetchBillRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2742"><div class="step-ref bg-step">2742</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">156</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillResponse</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2743"><div class="step-ref bg-step">2743</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2744"><div class="step-ref bg-step">2744</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def fetchBillResponse = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2745"><div class="step-ref bg-step">2745</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmount = response.Bill[0].totalAmount</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2746"><div class="step-ref bg-step">2746</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billId = response.Bill[0].id</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2747"><div class="step-ref bg-step">2747</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def txnAmount = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2748"><div class="step-ref bg-step">2748</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmountPaid = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2749"><div class="step-ref bg-step">2749</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalDue = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2750"><div class="step-ref bg-step">2750</div><div class="step-indent"> </div><div class="step-cell passed">* def paidBillIdError = collectionServicesConstants.errorMessages.paidBillId</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2751"><div class="step-ref bg-step">2751</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillIdError = collectionServicesConstants.errorMessages.invalidBillId</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2752"><div class="step-ref bg-step">2752</div><div class="step-indent"> </div><div class="step-cell passed">* def totalAmountPaidError = collectionServicesConstants.errorMessages.totalAmountPaidNull</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2753"><div class="step-ref bg-step">2753</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentModeError = collectionServicesConstants.errorMessages.invalidPaymentMode</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2754"><div class="step-ref bg-step">2754</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantIdError = commonConstants.errorMessages.invalidTenantIdError</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2755"><div class="step-ref bg-step">2755</div><div class="step-indent"> </div><div class="step-cell passed">* def nullTenantIdError = commonConstants.errorMessages.nullParameterError</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2756"><div class="step-ref bg-step">2756</div><div class="step-indent"> </div><div class="step-cell passed">* def reason = collectionServicesConstants.parameters.reason</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2757"><div class="step-ref bg-step">2757</div><div class="step-indent"> </div><div class="step-cell passed">* def action = collectionServicesConstants.parameters.action</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2758"><div class="step-ref bg-step">2758</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDateError = collectionServicesConstants.errorMessages.instrumentDateAsNull</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2759"><div class="step-ref bg-step">2759</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentPastDateError = collectionServicesConstants.errorMessages.instrumentDatePastNinetyDays</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2760"><div class="step-ref bg-step">2760</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentFutureDateError = collectionServicesConstants.errorMessages.futureInstrumentDate</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2761"><div class="step-ref bg-step">2761</div><div class="step-indent"> </div><div class="step-cell passed">* def moreThanDueAmountError = collectionServicesConstants.errorMessages.moreThanDueAmount</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2762"><div class="step-ref bg-step">2762</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberError = collectionServicesConstants.errorMessages.instrumentNumberAsEmptyString</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2763"><div class="step-ref bg-step">2763</div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberError = collectionServicesConstants.errorMessages.transactionNumberAsEmptyString</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2764"><div class="step-ref bg-step">2764</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/collectionServicesPretest.feature@createPayment')</div></div><div class="time-cell passed">445</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2764.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/collectionServicesPretest.feature</div></div><div class="time-cell passed">423</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2765"><div class="step-ref bg-step">2765</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2766"><div class="step-ref bg-step">2766</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2767"><div class="step-ref bg-step">2767</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2768"><div class="step-ref bg-step">2768</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def tenantId = tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2769"><div class="step-ref bg-step">2769</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentMode = collectionServicesConstants.parameters.paymentMode</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2770"><div class="step-ref bg-step">2770</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBy = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2771"><div class="step-ref bg-step">2771</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2772"><div class="step-ref bg-step">2772</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def payerName = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2773"><div class="step-ref bg-step">2773</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalDue = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2774"><div class="step-ref bg-step">2774</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumber = collectionServicesConstants.parameters.transactionNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2775"><div class="step-ref bg-step">2775</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumber = collectionServicesConstants.parameters.instrumentNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2776"><div class="step-ref bg-step">2776</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCard = collectionServicesConstants.parameters.paymentMode2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2777"><div class="step-ref bg-step">2777</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCheque = collectionServicesConstants.parameters.paymentModeForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2778"><div class="step-ref bg-step">2778</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberForCheque = collectionServicesConstants.parameters.transactionNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2779"><div class="step-ref bg-step">2779</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberForCheque = collectionServicesConstants.parameters.instrumentNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2780"><div class="step-ref bg-step">2780</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">6</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2781"><div class="step-ref bg-step">2781</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def ifscCode = collectionServicesConstants.parameters.ifscCode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2782"><div class="step-ref bg-step">2782</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2783"><div class="step-ref bg-step">2783</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2784"><div class="step-ref bg-step">2784</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequest = read('../../business-services/requestPayload/collection-services/create.json')</div></div><div class="time-cell passed">11</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2785"><div class="step-ref bg-step">2785</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def workflowRequest = read('../../business-services/requestPayload/collection-services/workflow.json')</div></div><div class="time-cell passed">6</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2786"><div class="step-ref bg-step">2786</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPaymentRequest = read('../../business-services/requestPayload/collection-services/search.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2787"><div class="step-ref bg-step">2787</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTreceiptcount = read('../../business-services/requestPayload/collection-services/receiptcount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2788"><div class="step-ref bg-step">2788</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequestForCheque = read('../../business-services/requestPayload/collection-services/createPaymentWithCheque.json')</div></div><div class="time-cell passed">9</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2789"><div class="step-ref bg-step">2789</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def eChallanPaymentcount = read('../../business-services/requestPayload/collection-services/echallancount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2790"><div class="step-ref bg-step">2790</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2791"><div class="step-ref bg-step">2791</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = 'invalid_'+randomNumber(4)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2792"><div class="step-ref bg-step">2792</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBusinessId = 'PT'+randomNumber(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2793"><div class="step-ref bg-step">2793</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentMode = randomString(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2794"><div class="step-ref bg-step">2794</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantId = randomString(5)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2795"><div class="step-ref bg-step">2795</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def negativeTotalAmount = '-'+randomNumber(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2796"><div class="step-ref bg-step">2796</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url payment</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2797"><div class="step-ref bg-step">2797</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request createPaymentRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print createPaymentRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2798"><div class="step-ref bg-step">2798</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">351</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2799"><div class="step-ref bg-step">2799</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2800"><div class="step-ref bg-step">2800</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2801"><div class="step-ref bg-step">2801</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2802"><div class="step-ref bg-step">2802</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def Payments = collectionServicesResponseBody.Payments</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2803"><div class="step-ref bg-step">2803</div><div class="step-indent"> </div><div class="step-cell passed">* match response.ResponseInfo.status == '200 OK'</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2804"><div class="step-ref bg-step">2804</div><div class="step-indent"> </div><div class="step-cell passed">* def paymentId = collectionServicesResponseBody.Payments[0].id</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2805"><div class="step-ref bg-step">2805</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/collectionServicesPretest.feature@processworkflow')</div></div><div class="time-cell passed">975</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2805.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/collectionServicesPretest.feature</div></div><div class="time-cell passed">941</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2806"><div class="step-ref bg-step">2806</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">12</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2807"><div class="step-ref bg-step">2807</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2808"><div class="step-ref bg-step">2808</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2809"><div class="step-ref bg-step">2809</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def tenantId = tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2810"><div class="step-ref bg-step">2810</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentMode = collectionServicesConstants.parameters.paymentMode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2811"><div class="step-ref bg-step">2811</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBy = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2812"><div class="step-ref bg-step">2812</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">10</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2813"><div class="step-ref bg-step">2813</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def payerName = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2814"><div class="step-ref bg-step">2814</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalDue = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2815"><div class="step-ref bg-step">2815</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumber = collectionServicesConstants.parameters.transactionNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2816"><div class="step-ref bg-step">2816</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumber = collectionServicesConstants.parameters.instrumentNumber</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2817"><div class="step-ref bg-step">2817</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCard = collectionServicesConstants.parameters.paymentMode2</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2818"><div class="step-ref bg-step">2818</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCheque = collectionServicesConstants.parameters.paymentModeForCheque</div></div><div class="time-cell passed">11</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2819"><div class="step-ref bg-step">2819</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberForCheque = collectionServicesConstants.parameters.transactionNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2820"><div class="step-ref bg-step">2820</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberForCheque = collectionServicesConstants.parameters.instrumentNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2821"><div class="step-ref bg-step">2821</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2822"><div class="step-ref bg-step">2822</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def ifscCode = collectionServicesConstants.parameters.ifscCode</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2823"><div class="step-ref bg-step">2823</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">9</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2824"><div class="step-ref bg-step">2824</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2825"><div class="step-ref bg-step">2825</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequest = read('../../business-services/requestPayload/collection-services/create.json')</div></div><div class="time-cell passed">17</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2826"><div class="step-ref bg-step">2826</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def workflowRequest = read('../../business-services/requestPayload/collection-services/workflow.json')</div></div><div class="time-cell passed">22</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2827"><div class="step-ref bg-step">2827</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPaymentRequest = read('../../business-services/requestPayload/collection-services/search.json')</div></div><div class="time-cell passed">7</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2828"><div class="step-ref bg-step">2828</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTreceiptcount = read('../../business-services/requestPayload/collection-services/receiptcount.json')</div></div><div class="time-cell passed">6</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2829"><div class="step-ref bg-step">2829</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequestForCheque = read('../../business-services/requestPayload/collection-services/createPaymentWithCheque.json')</div></div><div class="time-cell passed">33</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2830"><div class="step-ref bg-step">2830</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def eChallanPaymentcount = read('../../business-services/requestPayload/collection-services/echallancount.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2831"><div class="step-ref bg-step">2831</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">7</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2832"><div class="step-ref bg-step">2832</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = 'invalid_'+randomNumber(4)</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2833"><div class="step-ref bg-step">2833</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBusinessId = 'PT'+randomNumber(4)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2834"><div class="step-ref bg-step">2834</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentMode = randomString(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2835"><div class="step-ref bg-step">2835</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantId = randomString(5)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2836"><div class="step-ref bg-step">2836</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def negativeTotalAmount = '-'+randomNumber(4)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2837"><div class="step-ref bg-step">2837</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url collectionServiceWorkflowUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2838"><div class="step-ref bg-step">2838</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request workflowRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print workflowRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2839"><div class="step-ref bg-step">2839</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">759</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2840"><div class="step-ref bg-step">2840</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2841"><div class="step-ref bg-step">2841</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[13:111]bg"><div class="step-container" id="2842"><div class="step-ref bg-step">2842</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2843"><div class="step-ref passed">2843</div><div class="step-cell passed">* def key = pdfCreateConstant.parameters.valid.keyForWs</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container"><div class="step-ref failed"></div><div class="step-cell comment"># calling create pdf nosave pretest</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2844"><div class="step-ref failed">2844</div><div class="step-cell failed">* call read('../../core-services/pretests/pdfServiceCreateNoSave.feature@createPdfNosaveForWsSuccessfully')</div></div><div class="time-cell failed">2505</div></div><div class="preformatted" data-parent="2844">15:38:01.275 feature call failed: classpath:com/egov/core-services/tests/../../core-services/pretests/pdfServiceCreateNoSave.feature
arg: null
pdfServiceCreateNoSave.feature:42 - status code was: 400, expected: 201, response time: 146, url: https://qa.digit.org/pdf-service/v1/_createnosave?key=ws-bill&amp;tenantId=pb.amritsar, response: {"message":"some unknown error while creating: could not find property of type array in request body with name $.Bill.*"}
pdfService.feature:114 - 
pdfServiceCreateNoSave.feature:42 - status code was: 400, expected: 201, response time: 146, url: https://qa.digit.org/pdf-service/v1/_createnosave?key=ws-bill&amp;tenantId=pb.amritsar, response: {"message":"some unknown error while creating: could not find property of type array in request body with name $.Bill.*"}</div><div class="step-row"><div class="step-container" id="2844.1"><div class="step-ref failed">&gt;&gt;</div><div class="step-cell failed">com/egov/core-services/tests/../../core-services/pretests/pdfServiceCreateNoSave.feature</div></div><div class="time-cell failed">2489</div></div><div class="step-row"><div class="step-container" id="2845"><div class="step-ref passed">2845</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/tests/collectionServicesCreate.feature@Create_PaymentWithValidBillID_01')</div></div><div class="time-cell passed">2333</div></div><div class="step-row"><div class="step-container" id="2845.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/tests/collectionServicesCreate.feature</div></div><div class="time-cell passed">2191</div></div><div class="step-row"><div class="step-container" id="2846"><div class="step-ref passed">2846</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/tests/billingServicesDemand.feature@create_01')</div></div><div class="time-cell passed">451</div></div><div class="step-row"><div class="step-container" id="2846.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/tests/billingServicesDemand.feature</div></div><div class="time-cell passed">381</div></div><div class="step-row"><div class="step-container" id="2847"><div class="step-ref passed">2847</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">15</div></div><div class="step-row"><div class="step-container" id="2848"><div class="step-ref passed">2848</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceDemandConstants = read('../../business-services/constants/billing-service-demand.yaml')</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container" id="2849"><div class="step-ref passed">2849</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="2850"><div class="step-ref passed">2850</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container" id="2851"><div class="step-ref passed">2851</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def consumerType = mdmsStateBillingService.BusinessService[0].businessService</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2852"><div class="step-ref passed">2852</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = mdmsStateBillingService.BusinessService[0].code</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2853"><div class="step-ref passed">2853</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxPeriodFrom = getCurrentEpochTime()</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="2854"><div class="step-ref passed">2854</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def daysFromToday = 2</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2855"><div class="step-ref passed">2855</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxPeriodTo = getEpochDate(daysFromToday)</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="2856"><div class="step-ref passed">2856</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxHeadMasterCodes = karate.jsonPath(mdmsStateBillingService, "$.TaxHeadMaster[?(@.service=='" + businessService + "')].code")</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container" id="2857"><div class="step-ref passed">2857</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxHeadMasterCode = taxHeadMasterCodes[randomNumber(taxHeadMasterCodes.length)]</div></div><div class="time-cell passed">19</div></div><div class="step-row"><div class="step-container" id="2858"><div class="step-ref passed">2858</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxAmount = 200</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2859"><div class="step-ref passed">2859</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionAmount = 0</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2860"><div class="step-ref passed">2860</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def minimumAmountPayable = 1</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Steps to create a new Employee through HRMS</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2861"><div class="step-ref passed">2861</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServiceDemandPretest.feature@createBillDemand')</div></div><div class="time-cell passed">296</div></div><div class="step-row"><div class="step-container" id="2861.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServiceDemandPretest.feature</div></div><div class="time-cell passed">274</div></div><div class="step-row"><div class="step-container" id="2862"><div class="step-ref passed">2862</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="2863"><div class="step-ref passed">2863</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceDemandConstants = read('../../business-services/constants/billing-service-demand.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2864"><div class="step-ref passed">2864</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="2865"><div class="step-ref passed">2865</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createDemandRequest = read('../../business-services/requestPayload/billing-service-demand/create.json')</div></div><div class="time-cell passed">31</div></div><div class="step-row"><div class="step-container" id="2866"><div class="step-ref passed">2866</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchDemandRequest = read('../../business-services/requestPayload/billing-service-demand/search.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="2867"><div class="step-ref passed">2867</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def updateDemandRequest = read('../../business-services/requestPayload/billing-service-demand/update.json')</div></div><div class="time-cell passed">15</div></div><div class="step-row"><div class="step-container" id="2868"><div class="step-ref passed">2868</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">10</div></div><div class="step-row"><div class="step-container" id="2869"><div class="step-ref passed">2869</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url createDemandUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print createDemandRequest</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2870"><div class="step-ref passed">2870</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request createDemandRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2871"><div class="step-ref passed">2871</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">188</div></div><div class="step-row"><div class="step-container" id="2872"><div class="step-ref passed">2872</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2873"><div class="step-ref passed">2873</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billingServiceDemandResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2874"><div class="step-ref passed">2874</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billingServiceDemandResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2875"><div class="step-ref passed">2875</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* print billingServiceDemandResponseBody</div></div><div class="time-cell passed">5</div></div><div class="preformatted" data-parent="2875">15:37:59.340 [print] {
  "ResponseInfo": {
    "ver": null,
    "resMsgId": null,
    "msgId": null,
    "apiId": null,
    "ts": null,
    "status": "201 CREATED"
  },
  "Demands": [
    {
      "taxPeriodFrom": 1628590079025,
      "businessService": "PT",
      "minimumAmountPayable": 1,
      "taxPeriodTo": 1628762879029,
      "fixedBillExpiryDate": null,
      "additionalDetails": null,
      "payer": null,
      "demandDetails": [
        {
          "demandId": "eed45569-f0b8-4ac8-93c3-46c1fc39fdc2",
          "taxHeadMasterCode": "PT_ADVANCE_CARRYFORWARD",
          "collectionAmount": 0,
          "auditDetails": {
            "lastModifiedTime": 1628590079515,
            "createdBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
            "lastModifiedBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
            "createdTime": 1628590079515
          },
          "tenantId": "pb.amritsar",
          "id": "c3e0825e-be31-4757-b412-ef70899d4906",
          "taxAmount": 200,
          "additionalDetails": null
        }
      ],
      "consumerType": "PropertyTax",
      "auditDetails": {
        "lastModifiedTime": 1628590079515,
        "createdBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
        "lastModifiedBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
        "createdTime": 1628590079515
      },
      "tenantId": "pb.amritsar",
      "consumerCode": "Consumer-Code-Test-687850",
      "id": "eed45569-f0b8-4ac8-93c3-46c1fc39fdc2",
      "billExpiryTime": null,
      "isPaymentCompleted": false,
      "status": "ACTIVE"
    }
  ],
  "CollectedReceipt": null
}</div><div class="step-row"><div class="step-container" id="2876"><div class="step-ref passed">2876</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def Demands = billingServiceDemandResponseBody.Demands</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="2877"><div class="step-ref passed">2877</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def demandId = Demands[0].id</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container" id="2878"><div class="step-ref passed">2878</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def consumerCode = Demands[0].consumerCode</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the status Created</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2879"><div class="step-ref passed">2879</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* assert billingServiceDemandResponseBody.ResponseInfo.status == commonConstants.expectedStatus.created</div></div><div class="time-cell passed">9</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand id is present</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2880"><div class="step-ref passed">2880</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].id == "#present"</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the tenantId of demand response is equal with current tenantId</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2881"><div class="step-ref passed">2881</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].tenantId == tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the consumer code of demand response is equal with defined consumerCode</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2882"><div class="step-ref passed">2882</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].consumerCode == consumerCode</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the consumerType of demand response is equal with defined consumerType</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2883"><div class="step-ref passed">2883</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].consumerType == consumerType</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the businessService of demand response is equal with defined businessService</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2884"><div class="step-ref passed">2884</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].businessService == businessService</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxPeriodFrom of demand response is equal with defined taxPeriodFrom</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2885"><div class="step-ref passed">2885</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].taxPeriodFrom == taxPeriodFrom</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxPeriodTo of demand response is equal with defined taxPeriodTo</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2886"><div class="step-ref passed">2886</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].taxPeriodTo == taxPeriodTo</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand details id is present in demand response body</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2887"><div class="step-ref passed">2887</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].id == "#present"</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demandId is present in demand response body</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2888"><div class="step-ref passed">2888</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].demandId == "#present"</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxHeadMasterCode of demand response is equal with defined taxHeadMasterCode</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2889"><div class="step-ref passed">2889</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].taxHeadMasterCode == taxHeadMasterCode</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxAmount of demand response is equal with defined taxAmount</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2890"><div class="step-ref passed">2890</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].taxAmount == taxAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the collectionAmount of demand response is equal with defined collectionAmount</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2891"><div class="step-ref passed">2891</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].collectionAmount == collectionAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the minimumAmountPayable of demand response is equal with defined minimumAmountPayable</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2892"><div class="step-ref passed">2892</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].minimumAmountPayable == minimumAmountPayable</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand status is equal with expected demand status `ACTIVE`</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2893"><div class="step-ref passed">2893</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].status == billingServiceDemandConstants.parameters.status</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="2894"><div class="step-ref passed">2894</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="2895"><div class="step-ref passed">2895</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2896"><div class="step-ref passed">2896</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="2897"><div class="step-ref passed">2897</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="2898"><div class="step-ref passed">2898</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServicePretest.feature@fetchBill')</div></div><div class="time-cell passed">196</div></div><div class="step-row"><div class="step-container" id="2898.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServicePretest.feature</div></div><div class="time-cell passed">182</div></div><div class="step-row"><div class="step-container" id="2899"><div class="step-ref passed">2899</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceConstants = read('../../business-services/constants/billing-service.yaml')</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="2900"><div class="step-ref passed">2900</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionServiceConstants = read('../../business-services/constants/apportionService.yaml')</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container" id="2901"><div class="step-ref passed">2901</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = billingServiceConstants.parameters.businessService</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2902"><div class="step-ref passed">2902</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionbusinessService = apportionServiceConstants.parameters.businessService</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2903"><div class="step-ref passed">2903</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason1 = apportionServiceConstants.parameters.reason1</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2904"><div class="step-ref passed">2904</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason2 = apportionServiceConstants.parameters.reason2</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2905"><div class="step-ref passed">2905</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason3 = apportionServiceConstants.parameters.reason3</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2906"><div class="step-ref passed">2906</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason4 = apportionServiceConstants.parameters.reason4</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment">#* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2907"><div class="step-ref passed">2907</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillRequest = read('../../business-services/requestPayload/collection-services/fetchBill.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="2908"><div class="step-ref passed">2908</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillRequest = read('../../business-services/requestPayload/collection-services/cancelBill.json')</div></div><div class="time-cell passed">9</div></div><div class="step-row"><div class="step-container" id="2909"><div class="step-ref passed">2909</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2910"><div class="step-ref passed">2910</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillParams =</div></div><div class="time-cell passed">0</div></div><div class="preformatted" data-parent="2910">{
   consumerCode: '#(consumerCode)',
   businessService: '#(businessService)',
   tenantId: '#(tenantId)'
}</div><div class="step-row"><div class="step-container" id="2911"><div class="step-ref passed">2911</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url fetchBill</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2912"><div class="step-ref passed">2912</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And params fetchBillParams</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillParams</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2913"><div class="step-ref passed">2913</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request fetchBillRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2914"><div class="step-ref passed">2914</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">148</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillResponse</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2915"><div class="step-ref passed">2915</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2916"><div class="step-ref passed">2916</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def fetchBillResponse = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2917"><div class="step-ref passed">2917</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmount = response.Bill[0].totalAmount</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2918"><div class="step-ref passed">2918</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billId = response.Bill[0].id</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2919"><div class="step-ref passed">2919</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def txnAmount = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2920"><div class="step-ref passed">2920</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmountPaid = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2921"><div class="step-ref passed">2921</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalDue = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2922"><div class="step-ref passed">2922</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBillIdError = collectionServicesConstants.errorMessages.paidBillId</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2923"><div class="step-ref passed">2923</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillIdError = collectionServicesConstants.errorMessages.invalidBillId</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2924"><div class="step-ref passed">2924</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalAmountPaidError = collectionServicesConstants.errorMessages.totalAmountPaidNull</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2925"><div class="step-ref passed">2925</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentModeError = collectionServicesConstants.errorMessages.invalidPaymentMode</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2926"><div class="step-ref passed">2926</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantIdError = commonConstants.errorMessages.invalidTenantIdError</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="2927"><div class="step-ref passed">2927</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def nullTenantIdError = commonConstants.errorMessages.nullParameterError</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="2928"><div class="step-ref passed">2928</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def reason = collectionServicesConstants.parameters.reason</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2929"><div class="step-ref passed">2929</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def action = collectionServicesConstants.parameters.action</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2930"><div class="step-ref passed">2930</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDateError = collectionServicesConstants.errorMessages.instrumentDateAsNull</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2931"><div class="step-ref passed">2931</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentPastDateError = collectionServicesConstants.errorMessages.instrumentDatePastNinetyDays</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2932"><div class="step-ref passed">2932</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentFutureDateError = collectionServicesConstants.errorMessages.futureInstrumentDate</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2933"><div class="step-ref passed">2933</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def moreThanDueAmountError = collectionServicesConstants.errorMessages.moreThanDueAmount</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2934"><div class="step-ref passed">2934</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberError = collectionServicesConstants.errorMessages.instrumentNumberAsEmptyString</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="2935"><div class="step-ref passed">2935</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberError = collectionServicesConstants.errorMessages.transactionNumberAsEmptyString</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2936"><div class="step-ref passed">2936</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/collectionServicesPretest.feature@createPayment')</div></div><div class="time-cell passed">593</div></div><div class="step-row"><div class="step-container" id="2936.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/collectionServicesPretest.feature</div></div><div class="time-cell passed">550</div></div><div class="step-row"><div class="step-container" id="2937"><div class="step-ref passed">2937</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container" id="2938"><div class="step-ref passed">2938</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2939"><div class="step-ref passed">2939</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container" id="2940"><div class="step-ref passed">2940</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def tenantId = tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2941"><div class="step-ref passed">2941</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentMode = collectionServicesConstants.parameters.paymentMode</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2942"><div class="step-ref passed">2942</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBy = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container" id="2943"><div class="step-ref passed">2943</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">6</div></div><div class="step-row"><div class="step-container" id="2944"><div class="step-ref passed">2944</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def payerName = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2945"><div class="step-ref passed">2945</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalDue = 0</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2946"><div class="step-ref passed">2946</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumber = collectionServicesConstants.parameters.transactionNumber</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2947"><div class="step-ref passed">2947</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumber = collectionServicesConstants.parameters.instrumentNumber</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="2948"><div class="step-ref passed">2948</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCard = collectionServicesConstants.parameters.paymentMode2</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2949"><div class="step-ref passed">2949</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCheque = collectionServicesConstants.parameters.paymentModeForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2950"><div class="step-ref passed">2950</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberForCheque = collectionServicesConstants.parameters.transactionNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2951"><div class="step-ref passed">2951</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberForCheque = collectionServicesConstants.parameters.instrumentNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2952"><div class="step-ref passed">2952</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">14</div></div><div class="step-row"><div class="step-container" id="2953"><div class="step-ref passed">2953</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def ifscCode = collectionServicesConstants.parameters.ifscCode</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2954"><div class="step-ref passed">2954</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2955"><div class="step-ref passed">2955</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2956"><div class="step-ref passed">2956</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequest = read('../../business-services/requestPayload/collection-services/create.json')</div></div><div class="time-cell passed">26</div></div><div class="step-row"><div class="step-container" id="2957"><div class="step-ref passed">2957</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def workflowRequest = read('../../business-services/requestPayload/collection-services/workflow.json')</div></div><div class="time-cell passed">9</div></div><div class="step-row"><div class="step-container" id="2958"><div class="step-ref passed">2958</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPaymentRequest = read('../../business-services/requestPayload/collection-services/search.json')</div></div><div class="time-cell passed">11</div></div><div class="step-row"><div class="step-container" id="2959"><div class="step-ref passed">2959</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTreceiptcount = read('../../business-services/requestPayload/collection-services/receiptcount.json')</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="2960"><div class="step-ref passed">2960</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequestForCheque = read('../../business-services/requestPayload/collection-services/createPaymentWithCheque.json')</div></div><div class="time-cell passed">21</div></div><div class="step-row"><div class="step-container" id="2961"><div class="step-ref passed">2961</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def eChallanPaymentcount = read('../../business-services/requestPayload/collection-services/echallancount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2962"><div class="step-ref passed">2962</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="2963"><div class="step-ref passed">2963</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = 'invalid_'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2964"><div class="step-ref passed">2964</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBusinessId = 'PT'+randomNumber(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2965"><div class="step-ref passed">2965</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentMode = randomString(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2966"><div class="step-ref passed">2966</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantId = randomString(5)</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2967"><div class="step-ref passed">2967</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def negativeTotalAmount = '-'+randomNumber(4)</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="2968"><div class="step-ref passed">2968</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url payment</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2969"><div class="step-ref passed">2969</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request createPaymentRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print createPaymentRequest</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="2970"><div class="step-ref passed">2970</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">408</div></div><div class="step-row"><div class="step-container" id="2971"><div class="step-ref passed">2971</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2972"><div class="step-ref passed">2972</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2973"><div class="step-ref passed">2973</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2974"><div class="step-ref passed">2974</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def Payments = collectionServicesResponseBody.Payments</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2975"><div class="step-ref passed">2975</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match response.ResponseInfo.status == '200 OK'</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2976"><div class="step-ref passed">2976</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentId = collectionServicesResponseBody.Payments[0].id</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2977"><div class="step-ref passed">2977</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/collectionServicesPretest.feature@processworkflow')</div></div><div class="time-cell passed">906</div></div><div class="step-row"><div class="step-container" id="2977.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/collectionServicesPretest.feature</div></div><div class="time-cell passed">876</div></div><div class="step-row"><div class="step-container" id="2978"><div class="step-ref passed">2978</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">11</div></div><div class="step-row"><div class="step-container" id="2979"><div class="step-ref passed">2979</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="2980"><div class="step-ref passed">2980</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="2981"><div class="step-ref passed">2981</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def tenantId = tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2982"><div class="step-ref passed">2982</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentMode = collectionServicesConstants.parameters.paymentMode</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2983"><div class="step-ref passed">2983</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBy = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container" id="2984"><div class="step-ref passed">2984</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="2985"><div class="step-ref passed">2985</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def payerName = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2986"><div class="step-ref passed">2986</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalDue = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2987"><div class="step-ref passed">2987</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumber = collectionServicesConstants.parameters.transactionNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2988"><div class="step-ref passed">2988</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumber = collectionServicesConstants.parameters.instrumentNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2989"><div class="step-ref passed">2989</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCard = collectionServicesConstants.parameters.paymentMode2</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2990"><div class="step-ref passed">2990</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCheque = collectionServicesConstants.parameters.paymentModeForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2991"><div class="step-ref passed">2991</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberForCheque = collectionServicesConstants.parameters.transactionNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2992"><div class="step-ref passed">2992</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberForCheque = collectionServicesConstants.parameters.instrumentNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="2993"><div class="step-ref passed">2993</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">6</div></div><div class="step-row"><div class="step-container" id="2994"><div class="step-ref passed">2994</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def ifscCode = collectionServicesConstants.parameters.ifscCode</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="2995"><div class="step-ref passed">2995</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="2996"><div class="step-ref passed">2996</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="2997"><div class="step-ref passed">2997</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequest = read('../../business-services/requestPayload/collection-services/create.json')</div></div><div class="time-cell passed">6</div></div><div class="step-row"><div class="step-container" id="2998"><div class="step-ref passed">2998</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def workflowRequest = read('../../business-services/requestPayload/collection-services/workflow.json')</div></div><div class="time-cell passed">9</div></div><div class="step-row"><div class="step-container" id="2999"><div class="step-ref passed">2999</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPaymentRequest = read('../../business-services/requestPayload/collection-services/search.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3000"><div class="step-ref passed">3000</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTreceiptcount = read('../../business-services/requestPayload/collection-services/receiptcount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3001"><div class="step-ref passed">3001</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequestForCheque = read('../../business-services/requestPayload/collection-services/createPaymentWithCheque.json')</div></div><div class="time-cell passed">13</div></div><div class="step-row"><div class="step-container" id="3002"><div class="step-ref passed">3002</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def eChallanPaymentcount = read('../../business-services/requestPayload/collection-services/echallancount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3003"><div class="step-ref passed">3003</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3004"><div class="step-ref passed">3004</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = 'invalid_'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3005"><div class="step-ref passed">3005</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBusinessId = 'PT'+randomNumber(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3006"><div class="step-ref passed">3006</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentMode = randomString(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3007"><div class="step-ref passed">3007</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantId = randomString(5)</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3008"><div class="step-ref passed">3008</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def negativeTotalAmount = '-'+randomNumber(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3009"><div class="step-ref passed">3009</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url collectionServiceWorkflowUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3010"><div class="step-ref passed">3010</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request workflowRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print workflowRequest</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3011"><div class="step-ref passed">3011</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">787</div></div><div class="step-row"><div class="step-container" id="3012"><div class="step-ref passed">3012</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3013"><div class="step-ref passed">3013</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3014"><div class="step-ref passed">3014</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3015"><div class="step-ref passed">3015</div><div class="step-indent"> </div><div class="step-cell passed">* def Payments = Payments</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3016"><div class="step-ref passed">3016</div><div class="step-indent"> </div><div class="step-cell passed">* def Bill = Payments[0].paymentDetails[0].bill</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3017"><div class="step-ref passed">3017</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreateNoSavePayload = read('../../core-services/requestPayload/pdf-service/pdfCreateNoSave.json')</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="3018"><div class="step-ref passed">3018</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreateNoSavePayloadFirst = pdfCreateNoSavePayload.WS</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3019"><div class="step-ref passed">3019</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreateNoSaveParam =</div></div><div class="time-cell passed">1</div></div><div class="preformatted" data-parent="3019">{
 key: '#(key)',
 tenantId: '#(tenantId)'
}</div><div class="step-row"><div class="step-container" id="3020"><div class="step-ref passed">3020</div><div class="step-indent"> </div><div class="step-cell passed">Given url createNoSavePdf</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3021"><div class="step-ref passed">3021</div><div class="step-indent"> </div><div class="step-cell passed">And params pdfCreateNoSaveParam</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3022"><div class="step-ref passed">3022</div><div class="step-indent"> </div><div class="step-cell passed">And request pdfCreateNoSavePayloadFirst</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3023"><div class="step-ref passed">3023</div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">148</div></div><div class="step-row"><div class="step-container" id="3024"><div class="step-ref failed">3024</div><div class="step-indent"> </div><div class="step-cell failed">Then status 201</div></div><div class="time-cell failed">0</div></div><div class="preformatted" data-parent="3024">15:38:01.274 status code was: 400, expected: 201, response time: 146, url: https://qa.digit.org/pdf-service/v1/_createnosave?key=ws-bill&amp;tenantId=pb.amritsar, response: {"message":"some unknown error while creating: could not find property of type array in request body with name $.Bill.*"}
pdfServiceCreateNoSave.feature:42 - status code was: 400, expected: 201, response time: 146, url: https://qa.digit.org/pdf-service/v1/_createnosave?key=ws-bill&amp;tenantId=pb.amritsar, response: {"message":"some unknown error while creating: could not find property of type array in request body with name $.Bill.*"}</div><div class="step-row"><div class="step-container" id="3025"><div class="step-ref skipped">3025</div><div class="step-indent"> </div><div class="step-cell skipped">And def pdfCreateNoSaveResponseHeader = responseHeaders</div></div><div class="time-cell skipped">0</div></div><div class="step-row"><div class="step-container" id="3026"><div class="step-ref skipped">3026</div><div class="step-indent"> </div><div class="step-cell skipped">And def pdfCreateNoSaveResponseBody = response</div></div><div class="time-cell skipped">0</div></div><div class="step-row"><div class="step-container" id="3027"><div class="step-ref skipped">3027</div><div class="step-cell skipped">* match pdfCreateNoSaveResponseBody == '#present'</div></div><div class="time-cell skipped">0</div></div></div><div class="scenario"><div class="scenario-heading" id="[14:119]"><div class="heading-container"><div class="scenario-tags"><a class="badge badge-primary" href="karate-tags.html">pdf_createnosave_FireNOC_04</a><a class="badge badge-primary" href="karate-tags.html">regression</a><a class="badge badge-primary" href="karate-tags.html">positive</a><a class="badge badge-primary" href="karate-tags.html">pdfservice</a><a class="badge badge-primary" href="karate-tags.html">coreServices</a></div><span class="scenario-keyword">Scenario: [14:119]</span><span class="scenario-name">Generate PDF config for FireNOC module for a given key and tenantid </span></div><div class="scenario-time passed">ms: 4853</div></div><div class="step-row"><div class="step-container" id="[14:119]bg"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-cell passed">Background:</div></div><div class="time-cell passed"></div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-cell comment"># reading javascript utils for using generic methods</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3028"><div class="step-ref bg-step">3028</div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">11</div></div><div class="preformatted" data-parent="3028">15:38:01.359 karate.env:  
15:38:01.359 locale: en_IN 
15:38:01.360 tenantId: pb.amritsar</div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3029"><div class="step-ref bg-step">3029</div><div class="step-cell passed">* def pdfCreateConstant = read('../../core-services/constants/pdfService.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3030"><div class="step-ref bg-step">3030</div><div class="step-cell passed">* call read('../../business-services/tests/collectionServicesCreate.feature@Create_PaymentWithValidBillID_01')</div></div><div class="time-cell passed">2057</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3030.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/tests/collectionServicesCreate.feature</div></div><div class="time-cell passed">2029</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3031"><div class="step-ref bg-step">3031</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/tests/billingServicesDemand.feature@create_01')</div></div><div class="time-cell passed">382</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3031.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/tests/billingServicesDemand.feature</div></div><div class="time-cell passed">318</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3032"><div class="step-ref bg-step">3032</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3033"><div class="step-ref bg-step">3033</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceDemandConstants = read('../../business-services/constants/billing-service-demand.yaml')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3034"><div class="step-ref bg-step">3034</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">7</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3035"><div class="step-ref bg-step">3035</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell passed">7</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3036"><div class="step-ref bg-step">3036</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def consumerType = mdmsStateBillingService.BusinessService[0].businessService</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3037"><div class="step-ref bg-step">3037</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = mdmsStateBillingService.BusinessService[0].code</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3038"><div class="step-ref bg-step">3038</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxPeriodFrom = getCurrentEpochTime()</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3039"><div class="step-ref bg-step">3039</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def daysFromToday = 2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3040"><div class="step-ref bg-step">3040</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxPeriodTo = getEpochDate(daysFromToday)</div></div><div class="time-cell passed">9</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3041"><div class="step-ref bg-step">3041</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxHeadMasterCodes = karate.jsonPath(mdmsStateBillingService, "$.TaxHeadMaster[?(@.service=='" + businessService + "')].code")</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3042"><div class="step-ref bg-step">3042</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxHeadMasterCode = taxHeadMasterCodes[randomNumber(taxHeadMasterCodes.length)]</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3043"><div class="step-ref bg-step">3043</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxAmount = 200</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3044"><div class="step-ref bg-step">3044</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionAmount = 0</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3045"><div class="step-ref bg-step">3045</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def minimumAmountPayable = 1</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Steps to create a new Employee through HRMS</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3046"><div class="step-ref bg-step">3046</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServiceDemandPretest.feature@createBillDemand')</div></div><div class="time-cell passed">255</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3046.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServiceDemandPretest.feature</div></div><div class="time-cell passed">238</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3047"><div class="step-ref bg-step">3047</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3048"><div class="step-ref bg-step">3048</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceDemandConstants = read('../../business-services/constants/billing-service-demand.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3049"><div class="step-ref bg-step">3049</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3050"><div class="step-ref bg-step">3050</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createDemandRequest = read('../../business-services/requestPayload/billing-service-demand/create.json')</div></div><div class="time-cell passed">17</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3051"><div class="step-ref bg-step">3051</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchDemandRequest = read('../../business-services/requestPayload/billing-service-demand/search.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3052"><div class="step-ref bg-step">3052</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def updateDemandRequest = read('../../business-services/requestPayload/billing-service-demand/update.json')</div></div><div class="time-cell passed">20</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3053"><div class="step-ref bg-step">3053</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">9</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3054"><div class="step-ref bg-step">3054</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url createDemandUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print createDemandRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3055"><div class="step-ref bg-step">3055</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request createDemandRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3056"><div class="step-ref bg-step">3056</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">176</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3057"><div class="step-ref bg-step">3057</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3058"><div class="step-ref bg-step">3058</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billingServiceDemandResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3059"><div class="step-ref bg-step">3059</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billingServiceDemandResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3060"><div class="step-ref bg-step">3060</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* print billingServiceDemandResponseBody</div></div><div class="time-cell passed">1</div></div><div class="preformatted" data-parent="3060">15:38:01.769 [print] {
  "ResponseInfo": {
    "ver": null,
    "resMsgId": null,
    "msgId": null,
    "apiId": null,
    "ts": null,
    "status": "201 CREATED"
  },
  "Demands": [
    {
      "taxPeriodFrom": 1628590081496,
      "businessService": "PT",
      "minimumAmountPayable": 1,
      "taxPeriodTo": 1628762881507,
      "fixedBillExpiryDate": null,
      "additionalDetails": null,
      "payer": null,
      "demandDetails": [
        {
          "demandId": "07b5053b-6d03-4643-9466-813d86fdf567",
          "taxHeadMasterCode": "PT_TIME_REBATE",
          "collectionAmount": 0,
          "auditDetails": {
            "lastModifiedTime": 1628590081957,
            "createdBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
            "lastModifiedBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
            "createdTime": 1628590081957
          },
          "tenantId": "pb.amritsar",
          "id": "394da1e5-5537-4f9f-bb12-9e37d72056eb",
          "taxAmount": 200,
          "additionalDetails": null
        }
      ],
      "consumerType": "PropertyTax",
      "auditDetails": {
        "lastModifiedTime": 1628590081957,
        "createdBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
        "lastModifiedBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
        "createdTime": 1628590081957
      },
      "tenantId": "pb.amritsar",
      "consumerCode": "Consumer-Code-Test-640931",
      "id": "07b5053b-6d03-4643-9466-813d86fdf567",
      "billExpiryTime": null,
      "isPaymentCompleted": false,
      "status": "ACTIVE"
    }
  ],
  "CollectedReceipt": null
}</div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3061"><div class="step-ref bg-step">3061</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def Demands = billingServiceDemandResponseBody.Demands</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3062"><div class="step-ref bg-step">3062</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def demandId = Demands[0].id</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3063"><div class="step-ref bg-step">3063</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def consumerCode = Demands[0].consumerCode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the status Created</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3064"><div class="step-ref bg-step">3064</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* assert billingServiceDemandResponseBody.ResponseInfo.status == commonConstants.expectedStatus.created</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand id is present</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3065"><div class="step-ref bg-step">3065</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].id == "#present"</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the tenantId of demand response is equal with current tenantId</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3066"><div class="step-ref bg-step">3066</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].tenantId == tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the consumer code of demand response is equal with defined consumerCode</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3067"><div class="step-ref bg-step">3067</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].consumerCode == consumerCode</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the consumerType of demand response is equal with defined consumerType</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3068"><div class="step-ref bg-step">3068</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].consumerType == consumerType</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the businessService of demand response is equal with defined businessService</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3069"><div class="step-ref bg-step">3069</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].businessService == businessService</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxPeriodFrom of demand response is equal with defined taxPeriodFrom</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3070"><div class="step-ref bg-step">3070</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].taxPeriodFrom == taxPeriodFrom</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxPeriodTo of demand response is equal with defined taxPeriodTo</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3071"><div class="step-ref bg-step">3071</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].taxPeriodTo == taxPeriodTo</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand details id is present in demand response body</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3072"><div class="step-ref bg-step">3072</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].id == "#present"</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demandId is present in demand response body</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3073"><div class="step-ref bg-step">3073</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].demandId == "#present"</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxHeadMasterCode of demand response is equal with defined taxHeadMasterCode</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3074"><div class="step-ref bg-step">3074</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].taxHeadMasterCode == taxHeadMasterCode</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxAmount of demand response is equal with defined taxAmount</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3075"><div class="step-ref bg-step">3075</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].taxAmount == taxAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the collectionAmount of demand response is equal with defined collectionAmount</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3076"><div class="step-ref bg-step">3076</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].collectionAmount == collectionAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the minimumAmountPayable of demand response is equal with defined minimumAmountPayable</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3077"><div class="step-ref bg-step">3077</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].minimumAmountPayable == minimumAmountPayable</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand status is equal with expected demand status `ACTIVE`</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3078"><div class="step-ref bg-step">3078</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].status == billingServiceDemandConstants.parameters.status</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3079"><div class="step-ref bg-step">3079</div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3080"><div class="step-ref bg-step">3080</div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3081"><div class="step-ref bg-step">3081</div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3082"><div class="step-ref bg-step">3082</div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3083"><div class="step-ref bg-step">3083</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServicePretest.feature@fetchBill')</div></div><div class="time-cell passed">263</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3083.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServicePretest.feature</div></div><div class="time-cell passed">246</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3084"><div class="step-ref bg-step">3084</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceConstants = read('../../business-services/constants/billing-service.yaml')</div></div><div class="time-cell passed">7</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3085"><div class="step-ref bg-step">3085</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionServiceConstants = read('../../business-services/constants/apportionService.yaml')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3086"><div class="step-ref bg-step">3086</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = billingServiceConstants.parameters.businessService</div></div><div class="time-cell passed">9</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3087"><div class="step-ref bg-step">3087</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionbusinessService = apportionServiceConstants.parameters.businessService</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3088"><div class="step-ref bg-step">3088</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason1 = apportionServiceConstants.parameters.reason1</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3089"><div class="step-ref bg-step">3089</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason2 = apportionServiceConstants.parameters.reason2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3090"><div class="step-ref bg-step">3090</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason3 = apportionServiceConstants.parameters.reason3</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3091"><div class="step-ref bg-step">3091</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason4 = apportionServiceConstants.parameters.reason4</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment">#* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3092"><div class="step-ref bg-step">3092</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillRequest = read('../../business-services/requestPayload/collection-services/fetchBill.json')</div></div><div class="time-cell passed">14</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3093"><div class="step-ref bg-step">3093</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillRequest = read('../../business-services/requestPayload/collection-services/cancelBill.json')</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3094"><div class="step-ref bg-step">3094</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3095"><div class="step-ref bg-step">3095</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillParams =</div></div><div class="time-cell passed">0</div></div><div class="preformatted" data-parent="3095">{
   consumerCode: '#(consumerCode)',
   businessService: '#(businessService)',
   tenantId: '#(tenantId)'
}</div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3096"><div class="step-ref bg-step">3096</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url fetchBill</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3097"><div class="step-ref bg-step">3097</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And params fetchBillParams</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillParams</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3098"><div class="step-ref bg-step">3098</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request fetchBillRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3099"><div class="step-ref bg-step">3099</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">196</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillResponse</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3100"><div class="step-ref bg-step">3100</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3101"><div class="step-ref bg-step">3101</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def fetchBillResponse = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3102"><div class="step-ref bg-step">3102</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmount = response.Bill[0].totalAmount</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3103"><div class="step-ref bg-step">3103</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billId = response.Bill[0].id</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3104"><div class="step-ref bg-step">3104</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def txnAmount = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3105"><div class="step-ref bg-step">3105</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmountPaid = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3106"><div class="step-ref bg-step">3106</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalDue = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3107"><div class="step-ref bg-step">3107</div><div class="step-indent"> </div><div class="step-cell passed">* def paidBillIdError = collectionServicesConstants.errorMessages.paidBillId</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3108"><div class="step-ref bg-step">3108</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillIdError = collectionServicesConstants.errorMessages.invalidBillId</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3109"><div class="step-ref bg-step">3109</div><div class="step-indent"> </div><div class="step-cell passed">* def totalAmountPaidError = collectionServicesConstants.errorMessages.totalAmountPaidNull</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3110"><div class="step-ref bg-step">3110</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentModeError = collectionServicesConstants.errorMessages.invalidPaymentMode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3111"><div class="step-ref bg-step">3111</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantIdError = commonConstants.errorMessages.invalidTenantIdError</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3112"><div class="step-ref bg-step">3112</div><div class="step-indent"> </div><div class="step-cell passed">* def nullTenantIdError = commonConstants.errorMessages.nullParameterError</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3113"><div class="step-ref bg-step">3113</div><div class="step-indent"> </div><div class="step-cell passed">* def reason = collectionServicesConstants.parameters.reason</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3114"><div class="step-ref bg-step">3114</div><div class="step-indent"> </div><div class="step-cell passed">* def action = collectionServicesConstants.parameters.action</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3115"><div class="step-ref bg-step">3115</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDateError = collectionServicesConstants.errorMessages.instrumentDateAsNull</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3116"><div class="step-ref bg-step">3116</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentPastDateError = collectionServicesConstants.errorMessages.instrumentDatePastNinetyDays</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3117"><div class="step-ref bg-step">3117</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentFutureDateError = collectionServicesConstants.errorMessages.futureInstrumentDate</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3118"><div class="step-ref bg-step">3118</div><div class="step-indent"> </div><div class="step-cell passed">* def moreThanDueAmountError = collectionServicesConstants.errorMessages.moreThanDueAmount</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3119"><div class="step-ref bg-step">3119</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberError = collectionServicesConstants.errorMessages.instrumentNumberAsEmptyString</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3120"><div class="step-ref bg-step">3120</div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberError = collectionServicesConstants.errorMessages.transactionNumberAsEmptyString</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3121"><div class="step-ref bg-step">3121</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/collectionServicesPretest.feature@createPayment')</div></div><div class="time-cell passed">458</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3121.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/collectionServicesPretest.feature</div></div><div class="time-cell passed">435</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3122"><div class="step-ref bg-step">3122</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3123"><div class="step-ref bg-step">3123</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3124"><div class="step-ref bg-step">3124</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3125"><div class="step-ref bg-step">3125</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def tenantId = tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3126"><div class="step-ref bg-step">3126</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentMode = collectionServicesConstants.parameters.paymentMode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3127"><div class="step-ref bg-step">3127</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBy = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3128"><div class="step-ref bg-step">3128</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3129"><div class="step-ref bg-step">3129</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def payerName = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3130"><div class="step-ref bg-step">3130</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalDue = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3131"><div class="step-ref bg-step">3131</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumber = collectionServicesConstants.parameters.transactionNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3132"><div class="step-ref bg-step">3132</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumber = collectionServicesConstants.parameters.instrumentNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3133"><div class="step-ref bg-step">3133</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCard = collectionServicesConstants.parameters.paymentMode2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3134"><div class="step-ref bg-step">3134</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCheque = collectionServicesConstants.parameters.paymentModeForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3135"><div class="step-ref bg-step">3135</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberForCheque = collectionServicesConstants.parameters.transactionNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3136"><div class="step-ref bg-step">3136</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberForCheque = collectionServicesConstants.parameters.instrumentNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3137"><div class="step-ref bg-step">3137</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3138"><div class="step-ref bg-step">3138</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def ifscCode = collectionServicesConstants.parameters.ifscCode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3139"><div class="step-ref bg-step">3139</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3140"><div class="step-ref bg-step">3140</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3141"><div class="step-ref bg-step">3141</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequest = read('../../business-services/requestPayload/collection-services/create.json')</div></div><div class="time-cell passed">13</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3142"><div class="step-ref bg-step">3142</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def workflowRequest = read('../../business-services/requestPayload/collection-services/workflow.json')</div></div><div class="time-cell passed">9</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3143"><div class="step-ref bg-step">3143</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPaymentRequest = read('../../business-services/requestPayload/collection-services/search.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3144"><div class="step-ref bg-step">3144</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTreceiptcount = read('../../business-services/requestPayload/collection-services/receiptcount.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3145"><div class="step-ref bg-step">3145</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequestForCheque = read('../../business-services/requestPayload/collection-services/createPaymentWithCheque.json')</div></div><div class="time-cell passed">14</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3146"><div class="step-ref bg-step">3146</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def eChallanPaymentcount = read('../../business-services/requestPayload/collection-services/echallancount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3147"><div class="step-ref bg-step">3147</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3148"><div class="step-ref bg-step">3148</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = 'invalid_'+randomNumber(4)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3149"><div class="step-ref bg-step">3149</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBusinessId = 'PT'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3150"><div class="step-ref bg-step">3150</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentMode = randomString(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3151"><div class="step-ref bg-step">3151</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantId = randomString(5)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3152"><div class="step-ref bg-step">3152</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def negativeTotalAmount = '-'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3153"><div class="step-ref bg-step">3153</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url payment</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3154"><div class="step-ref bg-step">3154</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request createPaymentRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print createPaymentRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3155"><div class="step-ref bg-step">3155</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">347</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3156"><div class="step-ref bg-step">3156</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3157"><div class="step-ref bg-step">3157</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3158"><div class="step-ref bg-step">3158</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3159"><div class="step-ref bg-step">3159</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def Payments = collectionServicesResponseBody.Payments</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3160"><div class="step-ref bg-step">3160</div><div class="step-indent"> </div><div class="step-cell passed">* match response.ResponseInfo.status == '200 OK'</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3161"><div class="step-ref bg-step">3161</div><div class="step-indent"> </div><div class="step-cell passed">* def paymentId = collectionServicesResponseBody.Payments[0].id</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3162"><div class="step-ref bg-step">3162</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/collectionServicesPretest.feature@processworkflow')</div></div><div class="time-cell passed">901</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3162.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/collectionServicesPretest.feature</div></div><div class="time-cell passed">868</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3163"><div class="step-ref bg-step">3163</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">14</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3164"><div class="step-ref bg-step">3164</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3165"><div class="step-ref bg-step">3165</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3166"><div class="step-ref bg-step">3166</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def tenantId = tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3167"><div class="step-ref bg-step">3167</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentMode = collectionServicesConstants.parameters.paymentMode</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3168"><div class="step-ref bg-step">3168</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBy = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3169"><div class="step-ref bg-step">3169</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">6</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3170"><div class="step-ref bg-step">3170</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def payerName = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3171"><div class="step-ref bg-step">3171</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalDue = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3172"><div class="step-ref bg-step">3172</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumber = collectionServicesConstants.parameters.transactionNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3173"><div class="step-ref bg-step">3173</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumber = collectionServicesConstants.parameters.instrumentNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3174"><div class="step-ref bg-step">3174</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCard = collectionServicesConstants.parameters.paymentMode2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3175"><div class="step-ref bg-step">3175</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCheque = collectionServicesConstants.parameters.paymentModeForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3176"><div class="step-ref bg-step">3176</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberForCheque = collectionServicesConstants.parameters.transactionNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3177"><div class="step-ref bg-step">3177</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberForCheque = collectionServicesConstants.parameters.instrumentNumberForCheque</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3178"><div class="step-ref bg-step">3178</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3179"><div class="step-ref bg-step">3179</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def ifscCode = collectionServicesConstants.parameters.ifscCode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3180"><div class="step-ref bg-step">3180</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3181"><div class="step-ref bg-step">3181</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3182"><div class="step-ref bg-step">3182</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequest = read('../../business-services/requestPayload/collection-services/create.json')</div></div><div class="time-cell passed">12</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3183"><div class="step-ref bg-step">3183</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def workflowRequest = read('../../business-services/requestPayload/collection-services/workflow.json')</div></div><div class="time-cell passed">7</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3184"><div class="step-ref bg-step">3184</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPaymentRequest = read('../../business-services/requestPayload/collection-services/search.json')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3185"><div class="step-ref bg-step">3185</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTreceiptcount = read('../../business-services/requestPayload/collection-services/receiptcount.json')</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3186"><div class="step-ref bg-step">3186</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequestForCheque = read('../../business-services/requestPayload/collection-services/createPaymentWithCheque.json')</div></div><div class="time-cell passed">17</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3187"><div class="step-ref bg-step">3187</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def eChallanPaymentcount = read('../../business-services/requestPayload/collection-services/echallancount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3188"><div class="step-ref bg-step">3188</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3189"><div class="step-ref bg-step">3189</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = 'invalid_'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3190"><div class="step-ref bg-step">3190</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBusinessId = 'PT'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3191"><div class="step-ref bg-step">3191</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentMode = randomString(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3192"><div class="step-ref bg-step">3192</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantId = randomString(5)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3193"><div class="step-ref bg-step">3193</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def negativeTotalAmount = '-'+randomNumber(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3194"><div class="step-ref bg-step">3194</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url collectionServiceWorkflowUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3195"><div class="step-ref bg-step">3195</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request workflowRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print workflowRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3196"><div class="step-ref bg-step">3196</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">757</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3197"><div class="step-ref bg-step">3197</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3198"><div class="step-ref bg-step">3198</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[14:119]bg"><div class="step-container" id="3199"><div class="step-ref bg-step">3199</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3200"><div class="step-ref passed">3200</div><div class="step-cell passed">* def key = pdfCreateConstant.parameters.valid.keyForFireNoc</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-cell comment"># calling create pdf nosave pretest</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3201"><div class="step-ref passed">3201</div><div class="step-cell passed">* call read('../../core-services/pretests/pdfServiceCreateNoSave.feature@createPdfNosaveSuccessfully')</div></div><div class="time-cell passed">2779</div></div><div class="step-row"><div class="step-container" id="3201.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-cell passed">com/egov/core-services/tests/../../core-services/pretests/pdfServiceCreateNoSave.feature</div></div><div class="time-cell passed">2758</div></div><div class="step-row"><div class="step-container" id="3202"><div class="step-ref passed">3202</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/tests/collectionServicesCreate.feature@Create_PaymentWithValidBillID_01')</div></div><div class="time-cell passed">2403</div></div><div class="step-row"><div class="step-container" id="3202.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/tests/collectionServicesCreate.feature</div></div><div class="time-cell passed">2373</div></div><div class="step-row"><div class="step-container" id="3203"><div class="step-ref passed">3203</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/tests/billingServicesDemand.feature@create_01')</div></div><div class="time-cell passed">494</div></div><div class="step-row"><div class="step-container" id="3203.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/tests/billingServicesDemand.feature</div></div><div class="time-cell passed">424</div></div><div class="step-row"><div class="step-container" id="3204"><div class="step-ref passed">3204</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">33</div></div><div class="step-row"><div class="step-container" id="3205"><div class="step-ref passed">3205</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceDemandConstants = read('../../business-services/constants/billing-service-demand.yaml')</div></div><div class="time-cell passed">6</div></div><div class="step-row"><div class="step-container" id="3206"><div class="step-ref passed">3206</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">7</div></div><div class="step-row"><div class="step-container" id="3207"><div class="step-ref passed">3207</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell passed">19</div></div><div class="step-row"><div class="step-container" id="3208"><div class="step-ref passed">3208</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def consumerType = mdmsStateBillingService.BusinessService[0].businessService</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3209"><div class="step-ref passed">3209</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = mdmsStateBillingService.BusinessService[0].code</div></div><div class="time-cell passed">13</div></div><div class="step-row"><div class="step-container" id="3210"><div class="step-ref passed">3210</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxPeriodFrom = getCurrentEpochTime()</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3211"><div class="step-ref passed">3211</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def daysFromToday = 2</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3212"><div class="step-ref passed">3212</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxPeriodTo = getEpochDate(daysFromToday)</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container" id="3213"><div class="step-ref passed">3213</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxHeadMasterCodes = karate.jsonPath(mdmsStateBillingService, "$.TaxHeadMaster[?(@.service=='" + businessService + "')].code")</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3214"><div class="step-ref passed">3214</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxHeadMasterCode = taxHeadMasterCodes[randomNumber(taxHeadMasterCodes.length)]</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="3215"><div class="step-ref passed">3215</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxAmount = 200</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3216"><div class="step-ref passed">3216</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionAmount = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3217"><div class="step-ref passed">3217</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def minimumAmountPayable = 1</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Steps to create a new Employee through HRMS</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3218"><div class="step-ref passed">3218</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServiceDemandPretest.feature@createBillDemand')</div></div><div class="time-cell passed">298</div></div><div class="step-row"><div class="step-container" id="3218.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServiceDemandPretest.feature</div></div><div class="time-cell passed">276</div></div><div class="step-row"><div class="step-container" id="3219"><div class="step-ref passed">3219</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">6</div></div><div class="step-row"><div class="step-container" id="3220"><div class="step-ref passed">3220</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceDemandConstants = read('../../business-services/constants/billing-service-demand.yaml')</div></div><div class="time-cell passed">14</div></div><div class="step-row"><div class="step-container" id="3221"><div class="step-ref passed">3221</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="3222"><div class="step-ref passed">3222</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createDemandRequest = read('../../business-services/requestPayload/billing-service-demand/create.json')</div></div><div class="time-cell passed">26</div></div><div class="step-row"><div class="step-container" id="3223"><div class="step-ref passed">3223</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchDemandRequest = read('../../business-services/requestPayload/billing-service-demand/search.json')</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container" id="3224"><div class="step-ref passed">3224</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def updateDemandRequest = read('../../business-services/requestPayload/billing-service-demand/update.json')</div></div><div class="time-cell passed">24</div></div><div class="step-row"><div class="step-container" id="3225"><div class="step-ref passed">3225</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="3226"><div class="step-ref passed">3226</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url createDemandUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print createDemandRequest</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3227"><div class="step-ref passed">3227</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request createDemandRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3228"><div class="step-ref passed">3228</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">170</div></div><div class="step-row"><div class="step-container" id="3229"><div class="step-ref passed">3229</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3230"><div class="step-ref passed">3230</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billingServiceDemandResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3231"><div class="step-ref passed">3231</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billingServiceDemandResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3232"><div class="step-ref passed">3232</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* print billingServiceDemandResponseBody</div></div><div class="time-cell passed">15</div></div><div class="preformatted" data-parent="3232">15:38:03.921 [print] {
  "ResponseInfo": {
    "ver": null,
    "resMsgId": null,
    "msgId": null,
    "apiId": null,
    "ts": null,
    "status": "201 CREATED"
  },
  "Demands": [
    {
      "taxPeriodFrom": 1628590083633,
      "businessService": "PT",
      "minimumAmountPayable": 1,
      "taxPeriodTo": 1628762883637,
      "fixedBillExpiryDate": null,
      "additionalDetails": null,
      "payer": null,
      "demandDetails": [
        {
          "demandId": "3d936232-f3ef-42cd-9701-112a5f288154",
          "taxHeadMasterCode": "PT_DECIMAL_CEILING_DEBIT",
          "collectionAmount": 0,
          "auditDetails": {
            "lastModifiedTime": 1628590084100,
            "createdBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
            "lastModifiedBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
            "createdTime": 1628590084100
          },
          "tenantId": "pb.amritsar",
          "id": "f9f4bb5b-ed0c-47fc-b729-d46e6138793f",
          "taxAmount": 200,
          "additionalDetails": null
        }
      ],
      "consumerType": "PropertyTax",
      "auditDetails": {
        "lastModifiedTime": 1628590084100,
        "createdBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
        "lastModifiedBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
        "createdTime": 1628590084100
      },
      "tenantId": "pb.amritsar",
      "consumerCode": "Consumer-Code-Test-126578",
      "id": "3d936232-f3ef-42cd-9701-112a5f288154",
      "billExpiryTime": null,
      "isPaymentCompleted": false,
      "status": "ACTIVE"
    }
  ],
  "CollectedReceipt": null
}</div><div class="step-row"><div class="step-container" id="3233"><div class="step-ref passed">3233</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def Demands = billingServiceDemandResponseBody.Demands</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3234"><div class="step-ref passed">3234</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def demandId = Demands[0].id</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="3235"><div class="step-ref passed">3235</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def consumerCode = Demands[0].consumerCode</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the status Created</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3236"><div class="step-ref passed">3236</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* assert billingServiceDemandResponseBody.ResponseInfo.status == commonConstants.expectedStatus.created</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand id is present</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3237"><div class="step-ref passed">3237</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].id == "#present"</div></div><div class="time-cell passed">18</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the tenantId of demand response is equal with current tenantId</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3238"><div class="step-ref passed">3238</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].tenantId == tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the consumer code of demand response is equal with defined consumerCode</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3239"><div class="step-ref passed">3239</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].consumerCode == consumerCode</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the consumerType of demand response is equal with defined consumerType</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3240"><div class="step-ref passed">3240</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].consumerType == consumerType</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the businessService of demand response is equal with defined businessService</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3241"><div class="step-ref passed">3241</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].businessService == businessService</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxPeriodFrom of demand response is equal with defined taxPeriodFrom</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3242"><div class="step-ref passed">3242</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].taxPeriodFrom == taxPeriodFrom</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxPeriodTo of demand response is equal with defined taxPeriodTo</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3243"><div class="step-ref passed">3243</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].taxPeriodTo == taxPeriodTo</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand details id is present in demand response body</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3244"><div class="step-ref passed">3244</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].id == "#present"</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demandId is present in demand response body</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3245"><div class="step-ref passed">3245</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].demandId == "#present"</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxHeadMasterCode of demand response is equal with defined taxHeadMasterCode</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3246"><div class="step-ref passed">3246</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].taxHeadMasterCode == taxHeadMasterCode</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxAmount of demand response is equal with defined taxAmount</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3247"><div class="step-ref passed">3247</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].taxAmount == taxAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the collectionAmount of demand response is equal with defined collectionAmount</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3248"><div class="step-ref passed">3248</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].collectionAmount == collectionAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the minimumAmountPayable of demand response is equal with defined minimumAmountPayable</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3249"><div class="step-ref passed">3249</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].minimumAmountPayable == minimumAmountPayable</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand status is equal with expected demand status `ACTIVE`</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3250"><div class="step-ref passed">3250</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].status == billingServiceDemandConstants.parameters.status</div></div><div class="time-cell passed">6</div></div><div class="step-row"><div class="step-container" id="3251"><div class="step-ref passed">3251</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3252"><div class="step-ref passed">3252</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3253"><div class="step-ref passed">3253</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">16</div></div><div class="step-row"><div class="step-container" id="3254"><div class="step-ref passed">3254</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3255"><div class="step-ref passed">3255</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServicePretest.feature@fetchBill')</div></div><div class="time-cell passed">226</div></div><div class="step-row"><div class="step-container" id="3255.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServicePretest.feature</div></div><div class="time-cell passed">210</div></div><div class="step-row"><div class="step-container" id="3256"><div class="step-ref passed">3256</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceConstants = read('../../business-services/constants/billing-service.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="3257"><div class="step-ref passed">3257</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionServiceConstants = read('../../business-services/constants/apportionService.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="3258"><div class="step-ref passed">3258</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = billingServiceConstants.parameters.businessService</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3259"><div class="step-ref passed">3259</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionbusinessService = apportionServiceConstants.parameters.businessService</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="3260"><div class="step-ref passed">3260</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason1 = apportionServiceConstants.parameters.reason1</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3261"><div class="step-ref passed">3261</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason2 = apportionServiceConstants.parameters.reason2</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3262"><div class="step-ref passed">3262</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason3 = apportionServiceConstants.parameters.reason3</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3263"><div class="step-ref passed">3263</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason4 = apportionServiceConstants.parameters.reason4</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment">#* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3264"><div class="step-ref passed">3264</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillRequest = read('../../business-services/requestPayload/collection-services/fetchBill.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3265"><div class="step-ref passed">3265</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillRequest = read('../../business-services/requestPayload/collection-services/cancelBill.json')</div></div><div class="time-cell passed">12</div></div><div class="step-row"><div class="step-container" id="3266"><div class="step-ref passed">3266</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3267"><div class="step-ref passed">3267</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillParams =</div></div><div class="time-cell passed">0</div></div><div class="preformatted" data-parent="3267">{
   consumerCode: '#(consumerCode)',
   businessService: '#(businessService)',
   tenantId: '#(tenantId)'
}</div><div class="step-row"><div class="step-container" id="3268"><div class="step-ref passed">3268</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url fetchBill</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3269"><div class="step-ref passed">3269</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And params fetchBillParams</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillParams</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3270"><div class="step-ref passed">3270</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request fetchBillRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3271"><div class="step-ref passed">3271</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">174</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillResponse</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3272"><div class="step-ref passed">3272</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3273"><div class="step-ref passed">3273</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def fetchBillResponse = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3274"><div class="step-ref passed">3274</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmount = response.Bill[0].totalAmount</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3275"><div class="step-ref passed">3275</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billId = response.Bill[0].id</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3276"><div class="step-ref passed">3276</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def txnAmount = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3277"><div class="step-ref passed">3277</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmountPaid = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3278"><div class="step-ref passed">3278</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalDue = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3279"><div class="step-ref passed">3279</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBillIdError = collectionServicesConstants.errorMessages.paidBillId</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3280"><div class="step-ref passed">3280</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillIdError = collectionServicesConstants.errorMessages.invalidBillId</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="3281"><div class="step-ref passed">3281</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalAmountPaidError = collectionServicesConstants.errorMessages.totalAmountPaidNull</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3282"><div class="step-ref passed">3282</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentModeError = collectionServicesConstants.errorMessages.invalidPaymentMode</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3283"><div class="step-ref passed">3283</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantIdError = commonConstants.errorMessages.invalidTenantIdError</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3284"><div class="step-ref passed">3284</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def nullTenantIdError = commonConstants.errorMessages.nullParameterError</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3285"><div class="step-ref passed">3285</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def reason = collectionServicesConstants.parameters.reason</div></div><div class="time-cell passed">7</div></div><div class="step-row"><div class="step-container" id="3286"><div class="step-ref passed">3286</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def action = collectionServicesConstants.parameters.action</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="3287"><div class="step-ref passed">3287</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDateError = collectionServicesConstants.errorMessages.instrumentDateAsNull</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3288"><div class="step-ref passed">3288</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentPastDateError = collectionServicesConstants.errorMessages.instrumentDatePastNinetyDays</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3289"><div class="step-ref passed">3289</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentFutureDateError = collectionServicesConstants.errorMessages.futureInstrumentDate</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3290"><div class="step-ref passed">3290</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def moreThanDueAmountError = collectionServicesConstants.errorMessages.moreThanDueAmount</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3291"><div class="step-ref passed">3291</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberError = collectionServicesConstants.errorMessages.instrumentNumberAsEmptyString</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3292"><div class="step-ref passed">3292</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberError = collectionServicesConstants.errorMessages.transactionNumberAsEmptyString</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3293"><div class="step-ref passed">3293</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/collectionServicesPretest.feature@createPayment')</div></div><div class="time-cell passed">581</div></div><div class="step-row"><div class="step-container" id="3293.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/collectionServicesPretest.feature</div></div><div class="time-cell passed">534</div></div><div class="step-row"><div class="step-container" id="3294"><div class="step-ref passed">3294</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="3295"><div class="step-ref passed">3295</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3296"><div class="step-ref passed">3296</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container" id="3297"><div class="step-ref passed">3297</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def tenantId = tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3298"><div class="step-ref passed">3298</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentMode = collectionServicesConstants.parameters.paymentMode</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="3299"><div class="step-ref passed">3299</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBy = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="3300"><div class="step-ref passed">3300</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container" id="3301"><div class="step-ref passed">3301</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def payerName = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3302"><div class="step-ref passed">3302</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalDue = 0</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="3303"><div class="step-ref passed">3303</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumber = collectionServicesConstants.parameters.transactionNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3304"><div class="step-ref passed">3304</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumber = collectionServicesConstants.parameters.instrumentNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3305"><div class="step-ref passed">3305</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCard = collectionServicesConstants.parameters.paymentMode2</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3306"><div class="step-ref passed">3306</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCheque = collectionServicesConstants.parameters.paymentModeForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3307"><div class="step-ref passed">3307</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberForCheque = collectionServicesConstants.parameters.transactionNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3308"><div class="step-ref passed">3308</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberForCheque = collectionServicesConstants.parameters.instrumentNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3309"><div class="step-ref passed">3309</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="3310"><div class="step-ref passed">3310</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def ifscCode = collectionServicesConstants.parameters.ifscCode</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="3311"><div class="step-ref passed">3311</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="3312"><div class="step-ref passed">3312</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3313"><div class="step-ref passed">3313</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequest = read('../../business-services/requestPayload/collection-services/create.json')</div></div><div class="time-cell passed">29</div></div><div class="step-row"><div class="step-container" id="3314"><div class="step-ref passed">3314</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def workflowRequest = read('../../business-services/requestPayload/collection-services/workflow.json')</div></div><div class="time-cell passed">18</div></div><div class="step-row"><div class="step-container" id="3315"><div class="step-ref passed">3315</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPaymentRequest = read('../../business-services/requestPayload/collection-services/search.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3316"><div class="step-ref passed">3316</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTreceiptcount = read('../../business-services/requestPayload/collection-services/receiptcount.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="3317"><div class="step-ref passed">3317</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequestForCheque = read('../../business-services/requestPayload/collection-services/createPaymentWithCheque.json')</div></div><div class="time-cell passed">44</div></div><div class="step-row"><div class="step-container" id="3318"><div class="step-ref passed">3318</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def eChallanPaymentcount = read('../../business-services/requestPayload/collection-services/echallancount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3319"><div class="step-ref passed">3319</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">6</div></div><div class="step-row"><div class="step-container" id="3320"><div class="step-ref passed">3320</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = 'invalid_'+randomNumber(4)</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="3321"><div class="step-ref passed">3321</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBusinessId = 'PT'+randomNumber(4)</div></div><div class="time-cell passed">6</div></div><div class="step-row"><div class="step-container" id="3322"><div class="step-ref passed">3322</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentMode = randomString(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3323"><div class="step-ref passed">3323</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantId = randomString(5)</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="3324"><div class="step-ref passed">3324</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def negativeTotalAmount = '-'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3325"><div class="step-ref passed">3325</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url payment</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3326"><div class="step-ref passed">3326</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request createPaymentRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print createPaymentRequest</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3327"><div class="step-ref passed">3327</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">366</div></div><div class="step-row"><div class="step-container" id="3328"><div class="step-ref passed">3328</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3329"><div class="step-ref passed">3329</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3330"><div class="step-ref passed">3330</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3331"><div class="step-ref passed">3331</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def Payments = collectionServicesResponseBody.Payments</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3332"><div class="step-ref passed">3332</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match response.ResponseInfo.status == '200 OK'</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3333"><div class="step-ref passed">3333</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentId = collectionServicesResponseBody.Payments[0].id</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3334"><div class="step-ref passed">3334</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/collectionServicesPretest.feature@processworkflow')</div></div><div class="time-cell passed">1020</div></div><div class="step-row"><div class="step-container" id="3334.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/collectionServicesPretest.feature</div></div><div class="time-cell passed">911</div></div><div class="step-row"><div class="step-container" id="3335"><div class="step-ref passed">3335</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">17</div></div><div class="step-row"><div class="step-container" id="3336"><div class="step-ref passed">3336</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="3337"><div class="step-ref passed">3337</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="3338"><div class="step-ref passed">3338</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def tenantId = tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3339"><div class="step-ref passed">3339</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentMode = collectionServicesConstants.parameters.paymentMode</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3340"><div class="step-ref passed">3340</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBy = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">9</div></div><div class="step-row"><div class="step-container" id="3341"><div class="step-ref passed">3341</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="3342"><div class="step-ref passed">3342</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def payerName = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3343"><div class="step-ref passed">3343</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalDue = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3344"><div class="step-ref passed">3344</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumber = collectionServicesConstants.parameters.transactionNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3345"><div class="step-ref passed">3345</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumber = collectionServicesConstants.parameters.instrumentNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3346"><div class="step-ref passed">3346</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCard = collectionServicesConstants.parameters.paymentMode2</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3347"><div class="step-ref passed">3347</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCheque = collectionServicesConstants.parameters.paymentModeForCheque</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3348"><div class="step-ref passed">3348</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberForCheque = collectionServicesConstants.parameters.transactionNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3349"><div class="step-ref passed">3349</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberForCheque = collectionServicesConstants.parameters.instrumentNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3350"><div class="step-ref passed">3350</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="3351"><div class="step-ref passed">3351</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def ifscCode = collectionServicesConstants.parameters.ifscCode</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3352"><div class="step-ref passed">3352</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="3353"><div class="step-ref passed">3353</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3354"><div class="step-ref passed">3354</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequest = read('../../business-services/requestPayload/collection-services/create.json')</div></div><div class="time-cell passed">11</div></div><div class="step-row"><div class="step-container" id="3355"><div class="step-ref passed">3355</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def workflowRequest = read('../../business-services/requestPayload/collection-services/workflow.json')</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container" id="3356"><div class="step-ref passed">3356</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPaymentRequest = read('../../business-services/requestPayload/collection-services/search.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3357"><div class="step-ref passed">3357</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTreceiptcount = read('../../business-services/requestPayload/collection-services/receiptcount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3358"><div class="step-ref passed">3358</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequestForCheque = read('../../business-services/requestPayload/collection-services/createPaymentWithCheque.json')</div></div><div class="time-cell passed">10</div></div><div class="step-row"><div class="step-container" id="3359"><div class="step-ref passed">3359</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def eChallanPaymentcount = read('../../business-services/requestPayload/collection-services/echallancount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3360"><div class="step-ref passed">3360</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="3361"><div class="step-ref passed">3361</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = 'invalid_'+randomNumber(4)</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="3362"><div class="step-ref passed">3362</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBusinessId = 'PT'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3363"><div class="step-ref passed">3363</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentMode = randomString(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3364"><div class="step-ref passed">3364</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantId = randomString(5)</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3365"><div class="step-ref passed">3365</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def negativeTotalAmount = '-'+randomNumber(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3366"><div class="step-ref passed">3366</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url collectionServiceWorkflowUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3367"><div class="step-ref passed">3367</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request workflowRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print workflowRequest</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3368"><div class="step-ref passed">3368</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">813</div></div><div class="step-row"><div class="step-container" id="3369"><div class="step-ref passed">3369</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3370"><div class="step-ref passed">3370</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3371"><div class="step-ref passed">3371</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3372"><div class="step-ref passed">3372</div><div class="step-indent"> </div><div class="step-cell passed">* def Payments = Payments</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3373"><div class="step-ref passed">3373</div><div class="step-indent"> </div><div class="step-cell passed">* def Bill = Payments[0].paymentDetails[0].bill</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3374"><div class="step-ref passed">3374</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreateNoSavePayload = read('../../core-services/requestPayload/pdf-service/pdfCreateNoSave.json')</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="3375"><div class="step-ref passed">3375</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreateNoSavePayloadFirst = pdfCreateNoSavePayload.WS</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3376"><div class="step-ref passed">3376</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreateNoSaveParam =</div></div><div class="time-cell passed">1</div></div><div class="preformatted" data-parent="3376">{
 key: '#(key)',
 tenantId: '#(tenantId)'
}</div><div class="step-row"><div class="step-container" id="3377"><div class="step-ref passed">3377</div><div class="step-indent"> </div><div class="step-cell passed">Given url createNoSavePdf</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3378"><div class="step-ref passed">3378</div><div class="step-indent"> </div><div class="step-cell passed">And params pdfCreateNoSaveParam</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3379"><div class="step-ref passed">3379</div><div class="step-indent"> </div><div class="step-cell passed">And request pdfCreateNoSavePayload</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3380"><div class="step-ref passed">3380</div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">348</div></div><div class="step-row"><div class="step-container" id="3381"><div class="step-ref passed">3381</div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3382"><div class="step-ref passed">3382</div><div class="step-indent"> </div><div class="step-cell passed">And def pdfCreateNoSaveResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3383"><div class="step-ref passed">3383</div><div class="step-indent"> </div><div class="step-cell passed">And def pdfCreateNoSaveResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3384"><div class="step-ref passed">3384</div><div class="step-cell passed">* match pdfCreateNoSaveResponseBody == '#present'</div></div><div class="time-cell passed">1</div></div></div><div class="scenario"><div class="scenario-heading" id="[15:127]"><div class="heading-container"><div class="scenario-tags"><a class="badge badge-primary" href="karate-tags.html">negative</a><a class="badge badge-primary" href="karate-tags.html">regression</a><a class="badge badge-primary" href="karate-tags.html">pdfservice</a><a class="badge badge-primary" href="karate-tags.html">pdf_noqueryparams_FireNOC_05</a><a class="badge badge-primary" href="karate-tags.html">coreServices</a></div><span class="scenario-keyword">Scenario: [15:127]</span><span class="scenario-name">Generate PDF config wihtout passing key or tenantid </span></div><div class="scenario-time passed">ms: 4425</div></div><div class="step-row"><div class="step-container" id="[15:127]bg"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-cell passed">Background:</div></div><div class="time-cell passed"></div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-cell comment"># reading javascript utils for using generic methods</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3385"><div class="step-ref bg-step">3385</div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">13</div></div><div class="preformatted" data-parent="3385">15:38:06.371 karate.env:  
15:38:06.373 locale: en_IN 
15:38:06.374 tenantId: pb.amritsar</div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3386"><div class="step-ref bg-step">3386</div><div class="step-cell passed">* def pdfCreateConstant = read('../../core-services/constants/pdfService.yaml')</div></div><div class="time-cell passed">7</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3387"><div class="step-ref bg-step">3387</div><div class="step-cell passed">* call read('../../business-services/tests/collectionServicesCreate.feature@Create_PaymentWithValidBillID_01')</div></div><div class="time-cell passed">2051</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3387.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/tests/collectionServicesCreate.feature</div></div><div class="time-cell passed">2001</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3388"><div class="step-ref bg-step">3388</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/tests/billingServicesDemand.feature@create_01')</div></div><div class="time-cell passed">371</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3388.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/tests/billingServicesDemand.feature</div></div><div class="time-cell passed">292</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3389"><div class="step-ref bg-step">3389</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3390"><div class="step-ref bg-step">3390</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceDemandConstants = read('../../business-services/constants/billing-service-demand.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3391"><div class="step-ref bg-step">3391</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3392"><div class="step-ref bg-step">3392</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3393"><div class="step-ref bg-step">3393</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def consumerType = mdmsStateBillingService.BusinessService[0].businessService</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3394"><div class="step-ref bg-step">3394</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = mdmsStateBillingService.BusinessService[0].code</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3395"><div class="step-ref bg-step">3395</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxPeriodFrom = getCurrentEpochTime()</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3396"><div class="step-ref bg-step">3396</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def daysFromToday = 2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3397"><div class="step-ref bg-step">3397</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxPeriodTo = getEpochDate(daysFromToday)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3398"><div class="step-ref bg-step">3398</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxHeadMasterCodes = karate.jsonPath(mdmsStateBillingService, "$.TaxHeadMaster[?(@.service=='" + businessService + "')].code")</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3399"><div class="step-ref bg-step">3399</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxHeadMasterCode = taxHeadMasterCodes[randomNumber(taxHeadMasterCodes.length)]</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3400"><div class="step-ref bg-step">3400</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxAmount = 200</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3401"><div class="step-ref bg-step">3401</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionAmount = 0</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3402"><div class="step-ref bg-step">3402</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def minimumAmountPayable = 1</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Steps to create a new Employee through HRMS</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3403"><div class="step-ref bg-step">3403</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServiceDemandPretest.feature@createBillDemand')</div></div><div class="time-cell passed">243</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3403.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServiceDemandPretest.feature</div></div><div class="time-cell passed">225</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3404"><div class="step-ref bg-step">3404</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3405"><div class="step-ref bg-step">3405</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceDemandConstants = read('../../business-services/constants/billing-service-demand.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3406"><div class="step-ref bg-step">3406</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3407"><div class="step-ref bg-step">3407</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createDemandRequest = read('../../business-services/requestPayload/billing-service-demand/create.json')</div></div><div class="time-cell passed">19</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3408"><div class="step-ref bg-step">3408</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchDemandRequest = read('../../business-services/requestPayload/billing-service-demand/search.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3409"><div class="step-ref bg-step">3409</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def updateDemandRequest = read('../../business-services/requestPayload/billing-service-demand/update.json')</div></div><div class="time-cell passed">14</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3410"><div class="step-ref bg-step">3410</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3411"><div class="step-ref bg-step">3411</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url createDemandUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print createDemandRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3412"><div class="step-ref bg-step">3412</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request createDemandRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3413"><div class="step-ref bg-step">3413</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">175</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3414"><div class="step-ref bg-step">3414</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3415"><div class="step-ref bg-step">3415</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billingServiceDemandResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3416"><div class="step-ref bg-step">3416</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billingServiceDemandResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3417"><div class="step-ref bg-step">3417</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* print billingServiceDemandResponseBody</div></div><div class="time-cell passed">0</div></div><div class="preformatted" data-parent="3417">15:38:06.812 [print] {
  "ResponseInfo": {
    "ver": null,
    "resMsgId": null,
    "msgId": null,
    "apiId": null,
    "ts": null,
    "status": "201 CREATED"
  },
  "Demands": [
    {
      "taxPeriodFrom": 1628590086559,
      "businessService": "PT",
      "minimumAmountPayable": 1,
      "taxPeriodTo": 1628762886563,
      "fixedBillExpiryDate": null,
      "additionalDetails": null,
      "payer": null,
      "demandDetails": [
        {
          "demandId": "6164c2b1-7b1c-4228-9750-3e0b99bbbe63",
          "taxHeadMasterCode": "PT_DECIMAL_CEILING_CREDIT",
          "collectionAmount": 0,
          "auditDetails": {
            "lastModifiedTime": 1628590086999,
            "createdBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
            "lastModifiedBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
            "createdTime": 1628590086999
          },
          "tenantId": "pb.amritsar",
          "id": "9234596d-9283-47cc-8a14-9ec13afffdf4",
          "taxAmount": 200,
          "additionalDetails": null
        }
      ],
      "consumerType": "PropertyTax",
      "auditDetails": {
        "lastModifiedTime": 1628590086999,
        "createdBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
        "lastModifiedBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
        "createdTime": 1628590086999
      },
      "tenantId": "pb.amritsar",
      "consumerCode": "Consumer-Code-Test-894849",
      "id": "6164c2b1-7b1c-4228-9750-3e0b99bbbe63",
      "billExpiryTime": null,
      "isPaymentCompleted": false,
      "status": "ACTIVE"
    }
  ],
  "CollectedReceipt": null
}</div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3418"><div class="step-ref bg-step">3418</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def Demands = billingServiceDemandResponseBody.Demands</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3419"><div class="step-ref bg-step">3419</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def demandId = Demands[0].id</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3420"><div class="step-ref bg-step">3420</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def consumerCode = Demands[0].consumerCode</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the status Created</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3421"><div class="step-ref bg-step">3421</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* assert billingServiceDemandResponseBody.ResponseInfo.status == commonConstants.expectedStatus.created</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand id is present</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3422"><div class="step-ref bg-step">3422</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].id == "#present"</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the tenantId of demand response is equal with current tenantId</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3423"><div class="step-ref bg-step">3423</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].tenantId == tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the consumer code of demand response is equal with defined consumerCode</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3424"><div class="step-ref bg-step">3424</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].consumerCode == consumerCode</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the consumerType of demand response is equal with defined consumerType</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3425"><div class="step-ref bg-step">3425</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].consumerType == consumerType</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the businessService of demand response is equal with defined businessService</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3426"><div class="step-ref bg-step">3426</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].businessService == businessService</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxPeriodFrom of demand response is equal with defined taxPeriodFrom</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3427"><div class="step-ref bg-step">3427</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].taxPeriodFrom == taxPeriodFrom</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxPeriodTo of demand response is equal with defined taxPeriodTo</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3428"><div class="step-ref bg-step">3428</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].taxPeriodTo == taxPeriodTo</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand details id is present in demand response body</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3429"><div class="step-ref bg-step">3429</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].id == "#present"</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demandId is present in demand response body</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3430"><div class="step-ref bg-step">3430</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].demandId == "#present"</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxHeadMasterCode of demand response is equal with defined taxHeadMasterCode</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3431"><div class="step-ref bg-step">3431</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].taxHeadMasterCode == taxHeadMasterCode</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxAmount of demand response is equal with defined taxAmount</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3432"><div class="step-ref bg-step">3432</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].taxAmount == taxAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the collectionAmount of demand response is equal with defined collectionAmount</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3433"><div class="step-ref bg-step">3433</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].collectionAmount == collectionAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the minimumAmountPayable of demand response is equal with defined minimumAmountPayable</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3434"><div class="step-ref bg-step">3434</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].minimumAmountPayable == minimumAmountPayable</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand status is equal with expected demand status `ACTIVE`</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3435"><div class="step-ref bg-step">3435</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].status == billingServiceDemandConstants.parameters.status</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3436"><div class="step-ref bg-step">3436</div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3437"><div class="step-ref bg-step">3437</div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3438"><div class="step-ref bg-step">3438</div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3439"><div class="step-ref bg-step">3439</div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3440"><div class="step-ref bg-step">3440</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServicePretest.feature@fetchBill')</div></div><div class="time-cell passed">214</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3440.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServicePretest.feature</div></div><div class="time-cell passed">202</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3441"><div class="step-ref bg-step">3441</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceConstants = read('../../business-services/constants/billing-service.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3442"><div class="step-ref bg-step">3442</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionServiceConstants = read('../../business-services/constants/apportionService.yaml')</div></div><div class="time-cell passed">9</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3443"><div class="step-ref bg-step">3443</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = billingServiceConstants.parameters.businessService</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3444"><div class="step-ref bg-step">3444</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionbusinessService = apportionServiceConstants.parameters.businessService</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3445"><div class="step-ref bg-step">3445</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason1 = apportionServiceConstants.parameters.reason1</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3446"><div class="step-ref bg-step">3446</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason2 = apportionServiceConstants.parameters.reason2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3447"><div class="step-ref bg-step">3447</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason3 = apportionServiceConstants.parameters.reason3</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3448"><div class="step-ref bg-step">3448</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason4 = apportionServiceConstants.parameters.reason4</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment">#* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3449"><div class="step-ref bg-step">3449</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillRequest = read('../../business-services/requestPayload/collection-services/fetchBill.json')</div></div><div class="time-cell passed">6</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3450"><div class="step-ref bg-step">3450</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillRequest = read('../../business-services/requestPayload/collection-services/cancelBill.json')</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3451"><div class="step-ref bg-step">3451</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3452"><div class="step-ref bg-step">3452</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillParams =</div></div><div class="time-cell passed">0</div></div><div class="preformatted" data-parent="3452">{
   consumerCode: '#(consumerCode)',
   businessService: '#(businessService)',
   tenantId: '#(tenantId)'
}</div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3453"><div class="step-ref bg-step">3453</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url fetchBill</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3454"><div class="step-ref bg-step">3454</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And params fetchBillParams</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillParams</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3455"><div class="step-ref bg-step">3455</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request fetchBillRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3456"><div class="step-ref bg-step">3456</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">168</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillResponse</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3457"><div class="step-ref bg-step">3457</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3458"><div class="step-ref bg-step">3458</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def fetchBillResponse = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3459"><div class="step-ref bg-step">3459</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmount = response.Bill[0].totalAmount</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3460"><div class="step-ref bg-step">3460</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billId = response.Bill[0].id</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3461"><div class="step-ref bg-step">3461</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def txnAmount = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3462"><div class="step-ref bg-step">3462</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmountPaid = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3463"><div class="step-ref bg-step">3463</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalDue = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3464"><div class="step-ref bg-step">3464</div><div class="step-indent"> </div><div class="step-cell passed">* def paidBillIdError = collectionServicesConstants.errorMessages.paidBillId</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3465"><div class="step-ref bg-step">3465</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillIdError = collectionServicesConstants.errorMessages.invalidBillId</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3466"><div class="step-ref bg-step">3466</div><div class="step-indent"> </div><div class="step-cell passed">* def totalAmountPaidError = collectionServicesConstants.errorMessages.totalAmountPaidNull</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3467"><div class="step-ref bg-step">3467</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentModeError = collectionServicesConstants.errorMessages.invalidPaymentMode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3468"><div class="step-ref bg-step">3468</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantIdError = commonConstants.errorMessages.invalidTenantIdError</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3469"><div class="step-ref bg-step">3469</div><div class="step-indent"> </div><div class="step-cell passed">* def nullTenantIdError = commonConstants.errorMessages.nullParameterError</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3470"><div class="step-ref bg-step">3470</div><div class="step-indent"> </div><div class="step-cell passed">* def reason = collectionServicesConstants.parameters.reason</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3471"><div class="step-ref bg-step">3471</div><div class="step-indent"> </div><div class="step-cell passed">* def action = collectionServicesConstants.parameters.action</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3472"><div class="step-ref bg-step">3472</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDateError = collectionServicesConstants.errorMessages.instrumentDateAsNull</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3473"><div class="step-ref bg-step">3473</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentPastDateError = collectionServicesConstants.errorMessages.instrumentDatePastNinetyDays</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3474"><div class="step-ref bg-step">3474</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentFutureDateError = collectionServicesConstants.errorMessages.futureInstrumentDate</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3475"><div class="step-ref bg-step">3475</div><div class="step-indent"> </div><div class="step-cell passed">* def moreThanDueAmountError = collectionServicesConstants.errorMessages.moreThanDueAmount</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3476"><div class="step-ref bg-step">3476</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberError = collectionServicesConstants.errorMessages.instrumentNumberAsEmptyString</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3477"><div class="step-ref bg-step">3477</div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberError = collectionServicesConstants.errorMessages.transactionNumberAsEmptyString</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3478"><div class="step-ref bg-step">3478</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/collectionServicesPretest.feature@createPayment')</div></div><div class="time-cell passed">519</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3478.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/collectionServicesPretest.feature</div></div><div class="time-cell passed">480</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3479"><div class="step-ref bg-step">3479</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3480"><div class="step-ref bg-step">3480</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3481"><div class="step-ref bg-step">3481</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3482"><div class="step-ref bg-step">3482</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def tenantId = tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3483"><div class="step-ref bg-step">3483</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentMode = collectionServicesConstants.parameters.paymentMode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3484"><div class="step-ref bg-step">3484</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBy = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3485"><div class="step-ref bg-step">3485</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3486"><div class="step-ref bg-step">3486</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def payerName = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3487"><div class="step-ref bg-step">3487</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalDue = 0</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3488"><div class="step-ref bg-step">3488</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumber = collectionServicesConstants.parameters.transactionNumber</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3489"><div class="step-ref bg-step">3489</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumber = collectionServicesConstants.parameters.instrumentNumber</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3490"><div class="step-ref bg-step">3490</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCard = collectionServicesConstants.parameters.paymentMode2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3491"><div class="step-ref bg-step">3491</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCheque = collectionServicesConstants.parameters.paymentModeForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3492"><div class="step-ref bg-step">3492</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberForCheque = collectionServicesConstants.parameters.transactionNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3493"><div class="step-ref bg-step">3493</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberForCheque = collectionServicesConstants.parameters.instrumentNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3494"><div class="step-ref bg-step">3494</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">7</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3495"><div class="step-ref bg-step">3495</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def ifscCode = collectionServicesConstants.parameters.ifscCode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3496"><div class="step-ref bg-step">3496</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3497"><div class="step-ref bg-step">3497</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3498"><div class="step-ref bg-step">3498</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequest = read('../../business-services/requestPayload/collection-services/create.json')</div></div><div class="time-cell passed">19</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3499"><div class="step-ref bg-step">3499</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def workflowRequest = read('../../business-services/requestPayload/collection-services/workflow.json')</div></div><div class="time-cell passed">7</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3500"><div class="step-ref bg-step">3500</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPaymentRequest = read('../../business-services/requestPayload/collection-services/search.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3501"><div class="step-ref bg-step">3501</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTreceiptcount = read('../../business-services/requestPayload/collection-services/receiptcount.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3502"><div class="step-ref bg-step">3502</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequestForCheque = read('../../business-services/requestPayload/collection-services/createPaymentWithCheque.json')</div></div><div class="time-cell passed">10</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3503"><div class="step-ref bg-step">3503</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def eChallanPaymentcount = read('../../business-services/requestPayload/collection-services/echallancount.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3504"><div class="step-ref bg-step">3504</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3505"><div class="step-ref bg-step">3505</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = 'invalid_'+randomNumber(4)</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3506"><div class="step-ref bg-step">3506</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBusinessId = 'PT'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3507"><div class="step-ref bg-step">3507</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentMode = randomString(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3508"><div class="step-ref bg-step">3508</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantId = randomString(5)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3509"><div class="step-ref bg-step">3509</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def negativeTotalAmount = '-'+randomNumber(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3510"><div class="step-ref bg-step">3510</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url payment</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3511"><div class="step-ref bg-step">3511</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request createPaymentRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print createPaymentRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3512"><div class="step-ref bg-step">3512</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">376</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3513"><div class="step-ref bg-step">3513</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3514"><div class="step-ref bg-step">3514</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3515"><div class="step-ref bg-step">3515</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3516"><div class="step-ref bg-step">3516</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def Payments = collectionServicesResponseBody.Payments</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3517"><div class="step-ref bg-step">3517</div><div class="step-indent"> </div><div class="step-cell passed">* match response.ResponseInfo.status == '200 OK'</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3518"><div class="step-ref bg-step">3518</div><div class="step-indent"> </div><div class="step-cell passed">* def paymentId = collectionServicesResponseBody.Payments[0].id</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3519"><div class="step-ref bg-step">3519</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/collectionServicesPretest.feature@processworkflow')</div></div><div class="time-cell passed">866</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3519.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/collectionServicesPretest.feature</div></div><div class="time-cell passed">845</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3520"><div class="step-ref bg-step">3520</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">9</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3521"><div class="step-ref bg-step">3521</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3522"><div class="step-ref bg-step">3522</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3523"><div class="step-ref bg-step">3523</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def tenantId = tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3524"><div class="step-ref bg-step">3524</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentMode = collectionServicesConstants.parameters.paymentMode</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3525"><div class="step-ref bg-step">3525</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBy = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3526"><div class="step-ref bg-step">3526</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3527"><div class="step-ref bg-step">3527</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def payerName = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3528"><div class="step-ref bg-step">3528</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalDue = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3529"><div class="step-ref bg-step">3529</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumber = collectionServicesConstants.parameters.transactionNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3530"><div class="step-ref bg-step">3530</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumber = collectionServicesConstants.parameters.instrumentNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3531"><div class="step-ref bg-step">3531</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCard = collectionServicesConstants.parameters.paymentMode2</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3532"><div class="step-ref bg-step">3532</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCheque = collectionServicesConstants.parameters.paymentModeForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3533"><div class="step-ref bg-step">3533</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberForCheque = collectionServicesConstants.parameters.transactionNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3534"><div class="step-ref bg-step">3534</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberForCheque = collectionServicesConstants.parameters.instrumentNumberForCheque</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3535"><div class="step-ref bg-step">3535</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3536"><div class="step-ref bg-step">3536</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def ifscCode = collectionServicesConstants.parameters.ifscCode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3537"><div class="step-ref bg-step">3537</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3538"><div class="step-ref bg-step">3538</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3539"><div class="step-ref bg-step">3539</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequest = read('../../business-services/requestPayload/collection-services/create.json')</div></div><div class="time-cell passed">8</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3540"><div class="step-ref bg-step">3540</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def workflowRequest = read('../../business-services/requestPayload/collection-services/workflow.json')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3541"><div class="step-ref bg-step">3541</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPaymentRequest = read('../../business-services/requestPayload/collection-services/search.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3542"><div class="step-ref bg-step">3542</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTreceiptcount = read('../../business-services/requestPayload/collection-services/receiptcount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3543"><div class="step-ref bg-step">3543</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequestForCheque = read('../../business-services/requestPayload/collection-services/createPaymentWithCheque.json')</div></div><div class="time-cell passed">9</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3544"><div class="step-ref bg-step">3544</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def eChallanPaymentcount = read('../../business-services/requestPayload/collection-services/echallancount.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3545"><div class="step-ref bg-step">3545</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3546"><div class="step-ref bg-step">3546</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = 'invalid_'+randomNumber(4)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3547"><div class="step-ref bg-step">3547</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBusinessId = 'PT'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3548"><div class="step-ref bg-step">3548</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentMode = randomString(4)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3549"><div class="step-ref bg-step">3549</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantId = randomString(5)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3550"><div class="step-ref bg-step">3550</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def negativeTotalAmount = '-'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3551"><div class="step-ref bg-step">3551</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url collectionServiceWorkflowUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3552"><div class="step-ref bg-step">3552</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request workflowRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print workflowRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3553"><div class="step-ref bg-step">3553</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">763</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3554"><div class="step-ref bg-step">3554</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3555"><div class="step-ref bg-step">3555</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[15:127]bg"><div class="step-container" id="3556"><div class="step-ref bg-step">3556</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-cell comment"># calling create pdf nosave pretest</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3557"><div class="step-ref passed">3557</div><div class="step-cell passed">* call read('../../core-services/pretests/pdfServiceCreateNoSave.feature@createPdfNosaveWithoutParamsError')</div></div><div class="time-cell passed">2352</div></div><div class="step-row"><div class="step-container" id="3557.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-cell passed">com/egov/core-services/tests/../../core-services/pretests/pdfServiceCreateNoSave.feature</div></div><div class="time-cell passed">2334</div></div><div class="step-row"><div class="step-container" id="3558"><div class="step-ref passed">3558</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/tests/collectionServicesCreate.feature@Create_PaymentWithValidBillID_01')</div></div><div class="time-cell passed">2138</div></div><div class="step-row"><div class="step-container" id="3558.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/tests/collectionServicesCreate.feature</div></div><div class="time-cell passed">2114</div></div><div class="step-row"><div class="step-container" id="3559"><div class="step-ref passed">3559</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/tests/billingServicesDemand.feature@create_01')</div></div><div class="time-cell passed">345</div></div><div class="step-row"><div class="step-container" id="3559.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/tests/billingServicesDemand.feature</div></div><div class="time-cell passed">291</div></div><div class="step-row"><div class="step-container" id="3560"><div class="step-ref passed">3560</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">13</div></div><div class="step-row"><div class="step-container" id="3561"><div class="step-ref passed">3561</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceDemandConstants = read('../../business-services/constants/billing-service-demand.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="3562"><div class="step-ref passed">3562</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="3563"><div class="step-ref passed">3563</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell passed">7</div></div><div class="step-row"><div class="step-container" id="3564"><div class="step-ref passed">3564</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def consumerType = mdmsStateBillingService.BusinessService[0].businessService</div></div><div class="time-cell passed">8</div></div><div class="step-row"><div class="step-container" id="3565"><div class="step-ref passed">3565</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = mdmsStateBillingService.BusinessService[0].code</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3566"><div class="step-ref passed">3566</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxPeriodFrom = getCurrentEpochTime()</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="3567"><div class="step-ref passed">3567</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def daysFromToday = 2</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3568"><div class="step-ref passed">3568</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxPeriodTo = getEpochDate(daysFromToday)</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="3569"><div class="step-ref passed">3569</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxHeadMasterCodes = karate.jsonPath(mdmsStateBillingService, "$.TaxHeadMaster[?(@.service=='" + businessService + "')].code")</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3570"><div class="step-ref passed">3570</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxHeadMasterCode = taxHeadMasterCodes[randomNumber(taxHeadMasterCodes.length)]</div></div><div class="time-cell passed">6</div></div><div class="step-row"><div class="step-container" id="3571"><div class="step-ref passed">3571</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxAmount = 200</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3572"><div class="step-ref passed">3572</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionAmount = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3573"><div class="step-ref passed">3573</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def minimumAmountPayable = 1</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Steps to create a new Employee through HRMS</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3574"><div class="step-ref passed">3574</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServiceDemandPretest.feature@createBillDemand')</div></div><div class="time-cell passed">225</div></div><div class="step-row"><div class="step-container" id="3574.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServiceDemandPretest.feature</div></div><div class="time-cell passed">213</div></div><div class="step-row"><div class="step-container" id="3575"><div class="step-ref passed">3575</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3576"><div class="step-ref passed">3576</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceDemandConstants = read('../../business-services/constants/billing-service-demand.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3577"><div class="step-ref passed">3577</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3578"><div class="step-ref passed">3578</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createDemandRequest = read('../../business-services/requestPayload/billing-service-demand/create.json')</div></div><div class="time-cell passed">22</div></div><div class="step-row"><div class="step-container" id="3579"><div class="step-ref passed">3579</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchDemandRequest = read('../../business-services/requestPayload/billing-service-demand/search.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3580"><div class="step-ref passed">3580</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def updateDemandRequest = read('../../business-services/requestPayload/billing-service-demand/update.json')</div></div><div class="time-cell passed">21</div></div><div class="step-row"><div class="step-container" id="3581"><div class="step-ref passed">3581</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3582"><div class="step-ref passed">3582</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url createDemandUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print createDemandRequest</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3583"><div class="step-ref passed">3583</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request createDemandRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3584"><div class="step-ref passed">3584</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">149</div></div><div class="step-row"><div class="step-container" id="3585"><div class="step-ref passed">3585</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3586"><div class="step-ref passed">3586</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billingServiceDemandResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3587"><div class="step-ref passed">3587</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billingServiceDemandResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3588"><div class="step-ref passed">3588</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* print billingServiceDemandResponseBody</div></div><div class="time-cell passed">7</div></div><div class="preformatted" data-parent="3588">15:38:08.819 [print] {
  "ResponseInfo": {
    "ver": null,
    "resMsgId": null,
    "msgId": null,
    "apiId": null,
    "ts": null,
    "status": "201 CREATED"
  },
  "Demands": [
    {
      "taxPeriodFrom": 1628590088595,
      "businessService": "PT",
      "minimumAmountPayable": 1,
      "taxPeriodTo": 1628762888599,
      "fixedBillExpiryDate": null,
      "additionalDetails": null,
      "payer": null,
      "demandDetails": [
        {
          "demandId": "fcdb7ea3-3b4a-4cc4-a71c-6f487b33bd12",
          "taxHeadMasterCode": "PT_TIME_REBATE",
          "collectionAmount": 0,
          "auditDetails": {
            "lastModifiedTime": 1628590089004,
            "createdBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
            "lastModifiedBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
            "createdTime": 1628590089004
          },
          "tenantId": "pb.amritsar",
          "id": "11951a1f-1244-4fd5-b020-a09e5ec7fe6b",
          "taxAmount": 200,
          "additionalDetails": null
        }
      ],
      "consumerType": "PropertyTax",
      "auditDetails": {
        "lastModifiedTime": 1628590089004,
        "createdBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
        "lastModifiedBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
        "createdTime": 1628590089004
      },
      "tenantId": "pb.amritsar",
      "consumerCode": "Consumer-Code-Test-674131",
      "id": "fcdb7ea3-3b4a-4cc4-a71c-6f487b33bd12",
      "billExpiryTime": null,
      "isPaymentCompleted": false,
      "status": "ACTIVE"
    }
  ],
  "CollectedReceipt": null
}</div><div class="step-row"><div class="step-container" id="3589"><div class="step-ref passed">3589</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def Demands = billingServiceDemandResponseBody.Demands</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3590"><div class="step-ref passed">3590</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def demandId = Demands[0].id</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="3591"><div class="step-ref passed">3591</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def consumerCode = Demands[0].consumerCode</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the status Created</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3592"><div class="step-ref passed">3592</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* assert billingServiceDemandResponseBody.ResponseInfo.status == commonConstants.expectedStatus.created</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand id is present</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3593"><div class="step-ref passed">3593</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].id == "#present"</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the tenantId of demand response is equal with current tenantId</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3594"><div class="step-ref passed">3594</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].tenantId == tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the consumer code of demand response is equal with defined consumerCode</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3595"><div class="step-ref passed">3595</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].consumerCode == consumerCode</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the consumerType of demand response is equal with defined consumerType</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3596"><div class="step-ref passed">3596</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].consumerType == consumerType</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the businessService of demand response is equal with defined businessService</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3597"><div class="step-ref passed">3597</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].businessService == businessService</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxPeriodFrom of demand response is equal with defined taxPeriodFrom</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3598"><div class="step-ref passed">3598</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].taxPeriodFrom == taxPeriodFrom</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxPeriodTo of demand response is equal with defined taxPeriodTo</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3599"><div class="step-ref passed">3599</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].taxPeriodTo == taxPeriodTo</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand details id is present in demand response body</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3600"><div class="step-ref passed">3600</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].id == "#present"</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demandId is present in demand response body</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3601"><div class="step-ref passed">3601</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].demandId == "#present"</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxHeadMasterCode of demand response is equal with defined taxHeadMasterCode</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3602"><div class="step-ref passed">3602</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].taxHeadMasterCode == taxHeadMasterCode</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxAmount of demand response is equal with defined taxAmount</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3603"><div class="step-ref passed">3603</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].taxAmount == taxAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the collectionAmount of demand response is equal with defined collectionAmount</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3604"><div class="step-ref passed">3604</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].collectionAmount == collectionAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the minimumAmountPayable of demand response is equal with defined minimumAmountPayable</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3605"><div class="step-ref passed">3605</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].minimumAmountPayable == minimumAmountPayable</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand status is equal with expected demand status `ACTIVE`</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3606"><div class="step-ref passed">3606</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].status == billingServiceDemandConstants.parameters.status</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3607"><div class="step-ref passed">3607</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container" id="3608"><div class="step-ref passed">3608</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3609"><div class="step-ref passed">3609</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">48</div></div><div class="step-row"><div class="step-container" id="3610"><div class="step-ref passed">3610</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">7</div></div><div class="step-row"><div class="step-container" id="3611"><div class="step-ref passed">3611</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServicePretest.feature@fetchBill')</div></div><div class="time-cell passed">240</div></div><div class="step-row"><div class="step-container" id="3611.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServicePretest.feature</div></div><div class="time-cell passed">230</div></div><div class="step-row"><div class="step-container" id="3612"><div class="step-ref passed">3612</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceConstants = read('../../business-services/constants/billing-service.yaml')</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="3613"><div class="step-ref passed">3613</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionServiceConstants = read('../../business-services/constants/apportionService.yaml')</div></div><div class="time-cell passed">7</div></div><div class="step-row"><div class="step-container" id="3614"><div class="step-ref passed">3614</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = billingServiceConstants.parameters.businessService</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3615"><div class="step-ref passed">3615</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionbusinessService = apportionServiceConstants.parameters.businessService</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3616"><div class="step-ref passed">3616</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason1 = apportionServiceConstants.parameters.reason1</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3617"><div class="step-ref passed">3617</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason2 = apportionServiceConstants.parameters.reason2</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3618"><div class="step-ref passed">3618</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason3 = apportionServiceConstants.parameters.reason3</div></div><div class="time-cell passed">9</div></div><div class="step-row"><div class="step-container" id="3619"><div class="step-ref passed">3619</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason4 = apportionServiceConstants.parameters.reason4</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment">#* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3620"><div class="step-ref passed">3620</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillRequest = read('../../business-services/requestPayload/collection-services/fetchBill.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3621"><div class="step-ref passed">3621</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillRequest = read('../../business-services/requestPayload/collection-services/cancelBill.json')</div></div><div class="time-cell passed">13</div></div><div class="step-row"><div class="step-container" id="3622"><div class="step-ref passed">3622</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3623"><div class="step-ref passed">3623</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillParams =</div></div><div class="time-cell passed">0</div></div><div class="preformatted" data-parent="3623">{
   consumerCode: '#(consumerCode)',
   businessService: '#(businessService)',
   tenantId: '#(tenantId)'
}</div><div class="step-row"><div class="step-container" id="3624"><div class="step-ref passed">3624</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url fetchBill</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3625"><div class="step-ref passed">3625</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And params fetchBillParams</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillParams</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3626"><div class="step-ref passed">3626</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request fetchBillRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3627"><div class="step-ref passed">3627</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">184</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillResponse</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3628"><div class="step-ref passed">3628</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3629"><div class="step-ref passed">3629</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def fetchBillResponse = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3630"><div class="step-ref passed">3630</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmount = response.Bill[0].totalAmount</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3631"><div class="step-ref passed">3631</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billId = response.Bill[0].id</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3632"><div class="step-ref passed">3632</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def txnAmount = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3633"><div class="step-ref passed">3633</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmountPaid = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3634"><div class="step-ref passed">3634</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalDue = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3635"><div class="step-ref passed">3635</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBillIdError = collectionServicesConstants.errorMessages.paidBillId</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3636"><div class="step-ref passed">3636</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillIdError = collectionServicesConstants.errorMessages.invalidBillId</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3637"><div class="step-ref passed">3637</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalAmountPaidError = collectionServicesConstants.errorMessages.totalAmountPaidNull</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="3638"><div class="step-ref passed">3638</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentModeError = collectionServicesConstants.errorMessages.invalidPaymentMode</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3639"><div class="step-ref passed">3639</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantIdError = commonConstants.errorMessages.invalidTenantIdError</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3640"><div class="step-ref passed">3640</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def nullTenantIdError = commonConstants.errorMessages.nullParameterError</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3641"><div class="step-ref passed">3641</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def reason = collectionServicesConstants.parameters.reason</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3642"><div class="step-ref passed">3642</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def action = collectionServicesConstants.parameters.action</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3643"><div class="step-ref passed">3643</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDateError = collectionServicesConstants.errorMessages.instrumentDateAsNull</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="3644"><div class="step-ref passed">3644</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentPastDateError = collectionServicesConstants.errorMessages.instrumentDatePastNinetyDays</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3645"><div class="step-ref passed">3645</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentFutureDateError = collectionServicesConstants.errorMessages.futureInstrumentDate</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3646"><div class="step-ref passed">3646</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def moreThanDueAmountError = collectionServicesConstants.errorMessages.moreThanDueAmount</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3647"><div class="step-ref passed">3647</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberError = collectionServicesConstants.errorMessages.instrumentNumberAsEmptyString</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3648"><div class="step-ref passed">3648</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberError = collectionServicesConstants.errorMessages.transactionNumberAsEmptyString</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="3649"><div class="step-ref passed">3649</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/collectionServicesPretest.feature@createPayment')</div></div><div class="time-cell passed">533</div></div><div class="step-row"><div class="step-container" id="3649.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/collectionServicesPretest.feature</div></div><div class="time-cell passed">503</div></div><div class="step-row"><div class="step-container" id="3650"><div class="step-ref passed">3650</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3651"><div class="step-ref passed">3651</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3652"><div class="step-ref passed">3652</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3653"><div class="step-ref passed">3653</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def tenantId = tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3654"><div class="step-ref passed">3654</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentMode = collectionServicesConstants.parameters.paymentMode</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3655"><div class="step-ref passed">3655</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBy = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">7</div></div><div class="step-row"><div class="step-container" id="3656"><div class="step-ref passed">3656</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">8</div></div><div class="step-row"><div class="step-container" id="3657"><div class="step-ref passed">3657</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def payerName = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3658"><div class="step-ref passed">3658</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalDue = 0</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3659"><div class="step-ref passed">3659</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumber = collectionServicesConstants.parameters.transactionNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3660"><div class="step-ref passed">3660</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumber = collectionServicesConstants.parameters.instrumentNumber</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="3661"><div class="step-ref passed">3661</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCard = collectionServicesConstants.parameters.paymentMode2</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3662"><div class="step-ref passed">3662</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCheque = collectionServicesConstants.parameters.paymentModeForCheque</div></div><div class="time-cell passed">9</div></div><div class="step-row"><div class="step-container" id="3663"><div class="step-ref passed">3663</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberForCheque = collectionServicesConstants.parameters.transactionNumberForCheque</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3664"><div class="step-ref passed">3664</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberForCheque = collectionServicesConstants.parameters.instrumentNumberForCheque</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3665"><div class="step-ref passed">3665</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container" id="3666"><div class="step-ref passed">3666</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def ifscCode = collectionServicesConstants.parameters.ifscCode</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container" id="3667"><div class="step-ref passed">3667</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="3668"><div class="step-ref passed">3668</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3669"><div class="step-ref passed">3669</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequest = read('../../business-services/requestPayload/collection-services/create.json')</div></div><div class="time-cell passed">21</div></div><div class="step-row"><div class="step-container" id="3670"><div class="step-ref passed">3670</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def workflowRequest = read('../../business-services/requestPayload/collection-services/workflow.json')</div></div><div class="time-cell passed">9</div></div><div class="step-row"><div class="step-container" id="3671"><div class="step-ref passed">3671</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPaymentRequest = read('../../business-services/requestPayload/collection-services/search.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="3672"><div class="step-ref passed">3672</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTreceiptcount = read('../../business-services/requestPayload/collection-services/receiptcount.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="3673"><div class="step-ref passed">3673</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequestForCheque = read('../../business-services/requestPayload/collection-services/createPaymentWithCheque.json')</div></div><div class="time-cell passed">10</div></div><div class="step-row"><div class="step-container" id="3674"><div class="step-ref passed">3674</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def eChallanPaymentcount = read('../../business-services/requestPayload/collection-services/echallancount.json')</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="3675"><div class="step-ref passed">3675</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container" id="3676"><div class="step-ref passed">3676</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = 'invalid_'+randomNumber(4)</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="3677"><div class="step-ref passed">3677</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBusinessId = 'PT'+randomNumber(4)</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="3678"><div class="step-ref passed">3678</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentMode = randomString(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3679"><div class="step-ref passed">3679</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantId = randomString(5)</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3680"><div class="step-ref passed">3680</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def negativeTotalAmount = '-'+randomNumber(4)</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="3681"><div class="step-ref passed">3681</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url payment</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3682"><div class="step-ref passed">3682</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request createPaymentRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print createPaymentRequest</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3683"><div class="step-ref passed">3683</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">377</div></div><div class="step-row"><div class="step-container" id="3684"><div class="step-ref passed">3684</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3685"><div class="step-ref passed">3685</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3686"><div class="step-ref passed">3686</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3687"><div class="step-ref passed">3687</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def Payments = collectionServicesResponseBody.Payments</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3688"><div class="step-ref passed">3688</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match response.ResponseInfo.status == '200 OK'</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3689"><div class="step-ref passed">3689</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentId = collectionServicesResponseBody.Payments[0].id</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3690"><div class="step-ref passed">3690</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/collectionServicesPretest.feature@processworkflow')</div></div><div class="time-cell passed">900</div></div><div class="step-row"><div class="step-container" id="3690.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/collectionServicesPretest.feature</div></div><div class="time-cell passed">866</div></div><div class="step-row"><div class="step-container" id="3691"><div class="step-ref passed">3691</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">12</div></div><div class="step-row"><div class="step-container" id="3692"><div class="step-ref passed">3692</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">6</div></div><div class="step-row"><div class="step-container" id="3693"><div class="step-ref passed">3693</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="3694"><div class="step-ref passed">3694</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def tenantId = tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3695"><div class="step-ref passed">3695</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentMode = collectionServicesConstants.parameters.paymentMode</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="3696"><div class="step-ref passed">3696</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBy = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="3697"><div class="step-ref passed">3697</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">10</div></div><div class="step-row"><div class="step-container" id="3698"><div class="step-ref passed">3698</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def payerName = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3699"><div class="step-ref passed">3699</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalDue = 0</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3700"><div class="step-ref passed">3700</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumber = collectionServicesConstants.parameters.transactionNumber</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3701"><div class="step-ref passed">3701</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumber = collectionServicesConstants.parameters.instrumentNumber</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3702"><div class="step-ref passed">3702</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCard = collectionServicesConstants.parameters.paymentMode2</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3703"><div class="step-ref passed">3703</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCheque = collectionServicesConstants.parameters.paymentModeForCheque</div></div><div class="time-cell passed">6</div></div><div class="step-row"><div class="step-container" id="3704"><div class="step-ref passed">3704</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberForCheque = collectionServicesConstants.parameters.transactionNumberForCheque</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3705"><div class="step-ref passed">3705</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberForCheque = collectionServicesConstants.parameters.instrumentNumberForCheque</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="3706"><div class="step-ref passed">3706</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="3707"><div class="step-ref passed">3707</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def ifscCode = collectionServicesConstants.parameters.ifscCode</div></div><div class="time-cell passed">7</div></div><div class="step-row"><div class="step-container" id="3708"><div class="step-ref passed">3708</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container" id="3709"><div class="step-ref passed">3709</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3710"><div class="step-ref passed">3710</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequest = read('../../business-services/requestPayload/collection-services/create.json')</div></div><div class="time-cell passed">13</div></div><div class="step-row"><div class="step-container" id="3711"><div class="step-ref passed">3711</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def workflowRequest = read('../../business-services/requestPayload/collection-services/workflow.json')</div></div><div class="time-cell passed">12</div></div><div class="step-row"><div class="step-container" id="3712"><div class="step-ref passed">3712</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPaymentRequest = read('../../business-services/requestPayload/collection-services/search.json')</div></div><div class="time-cell passed">6</div></div><div class="step-row"><div class="step-container" id="3713"><div class="step-ref passed">3713</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTreceiptcount = read('../../business-services/requestPayload/collection-services/receiptcount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3714"><div class="step-ref passed">3714</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequestForCheque = read('../../business-services/requestPayload/collection-services/createPaymentWithCheque.json')</div></div><div class="time-cell passed">18</div></div><div class="step-row"><div class="step-container" id="3715"><div class="step-ref passed">3715</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def eChallanPaymentcount = read('../../business-services/requestPayload/collection-services/echallancount.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3716"><div class="step-ref passed">3716</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">11</div></div><div class="step-row"><div class="step-container" id="3717"><div class="step-ref passed">3717</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = 'invalid_'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3718"><div class="step-ref passed">3718</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBusinessId = 'PT'+randomNumber(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3719"><div class="step-ref passed">3719</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentMode = randomString(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3720"><div class="step-ref passed">3720</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantId = randomString(5)</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="3721"><div class="step-ref passed">3721</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def negativeTotalAmount = '-'+randomNumber(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3722"><div class="step-ref passed">3722</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url collectionServiceWorkflowUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3723"><div class="step-ref passed">3723</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request workflowRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print workflowRequest</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3724"><div class="step-ref passed">3724</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">721</div></div><div class="step-row"><div class="step-container" id="3725"><div class="step-ref passed">3725</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3726"><div class="step-ref passed">3726</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3727"><div class="step-ref passed">3727</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3728"><div class="step-ref passed">3728</div><div class="step-indent"> </div><div class="step-cell passed">* def Payments = Payments</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3729"><div class="step-ref passed">3729</div><div class="step-indent"> </div><div class="step-cell passed">* def Bill = Payments[0].paymentDetails[0].bill</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3730"><div class="step-ref passed">3730</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreateNoSavePayload = read('../../core-services/requestPayload/pdf-service/pdfCreateNoSave.json')</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container" id="3731"><div class="step-ref passed">3731</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreateNoSavePayloadFirst = pdfCreateNoSavePayload.WS</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3732"><div class="step-ref passed">3732</div><div class="step-indent"> </div><div class="step-cell passed">Given url createNoSavePdf</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3733"><div class="step-ref passed">3733</div><div class="step-indent"> </div><div class="step-cell passed">And request pdfCreateNoSavePayload</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3734"><div class="step-ref passed">3734</div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">188</div></div><div class="step-row"><div class="step-container" id="3735"><div class="step-ref passed">3735</div><div class="step-indent"> </div><div class="step-cell passed">Then status 400</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3736"><div class="step-ref passed">3736</div><div class="step-indent"> </div><div class="step-cell passed">And def pdfCreateNoSaveResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3737"><div class="step-ref passed">3737</div><div class="step-indent"> </div><div class="step-cell passed">And def pdfCreateNoSaveResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3738"><div class="step-ref passed">3738</div><div class="step-cell passed">* pdfCreateNoSaveResponseBody.message == pdfCreateConstant.errorMessages.withoutParam</div></div><div class="time-cell passed">3</div></div></div><div class="scenario"><div class="scenario-heading" id="[16:134]"><div class="heading-container"><div class="scenario-tags"><a class="badge badge-primary" href="karate-tags.html">negative</a><a class="badge badge-primary" href="karate-tags.html">pdf_invalidKey_06</a><a class="badge badge-primary" href="karate-tags.html">regression</a><a class="badge badge-primary" href="karate-tags.html">pdfservice</a><a class="badge badge-primary" href="karate-tags.html">coreServices</a></div><span class="scenario-keyword">Scenario: [16:134]</span><span class="scenario-name">Generate PDF config by passing invalid key </span></div><div class="scenario-time passed">ms: 8046</div></div><div class="step-row"><div class="step-container" id="[16:134]bg"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-cell passed">Background:</div></div><div class="time-cell passed"></div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-cell comment"># reading javascript utils for using generic methods</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3739"><div class="step-ref bg-step">3739</div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">11</div></div><div class="preformatted" data-parent="3739">15:38:10.988 karate.env:  
15:38:10.996 locale: en_IN 
15:38:10.997 tenantId: pb.amritsar</div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3740"><div class="step-ref bg-step">3740</div><div class="step-cell passed">* def pdfCreateConstant = read('../../core-services/constants/pdfService.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3741"><div class="step-ref bg-step">3741</div><div class="step-cell passed">* call read('../../business-services/tests/collectionServicesCreate.feature@Create_PaymentWithValidBillID_01')</div></div><div class="time-cell passed">5573</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3741.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/tests/collectionServicesCreate.feature</div></div><div class="time-cell passed">5550</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3742"><div class="step-ref bg-step">3742</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/tests/billingServicesDemand.feature@create_01')</div></div><div class="time-cell passed">2742</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3742.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/tests/billingServicesDemand.feature</div></div><div class="time-cell passed">2701</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3743"><div class="step-ref bg-step">3743</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3744"><div class="step-ref bg-step">3744</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceDemandConstants = read('../../business-services/constants/billing-service-demand.yaml')</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3745"><div class="step-ref bg-step">3745</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">6</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3746"><div class="step-ref bg-step">3746</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell passed">18</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3747"><div class="step-ref bg-step">3747</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def consumerType = mdmsStateBillingService.BusinessService[0].businessService</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3748"><div class="step-ref bg-step">3748</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = mdmsStateBillingService.BusinessService[0].code</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3749"><div class="step-ref bg-step">3749</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxPeriodFrom = getCurrentEpochTime()</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3750"><div class="step-ref bg-step">3750</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def daysFromToday = 2</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3751"><div class="step-ref bg-step">3751</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxPeriodTo = getEpochDate(daysFromToday)</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3752"><div class="step-ref bg-step">3752</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxHeadMasterCodes = karate.jsonPath(mdmsStateBillingService, "$.TaxHeadMaster[?(@.service=='" + businessService + "')].code")</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3753"><div class="step-ref bg-step">3753</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxHeadMasterCode = taxHeadMasterCodes[randomNumber(taxHeadMasterCodes.length)]</div></div><div class="time-cell passed">196</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3754"><div class="step-ref bg-step">3754</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxAmount = 200</div></div><div class="time-cell passed">40</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3755"><div class="step-ref bg-step">3755</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionAmount = 0</div></div><div class="time-cell passed">28</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3756"><div class="step-ref bg-step">3756</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def minimumAmountPayable = 1</div></div><div class="time-cell passed">110</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Steps to create a new Employee through HRMS</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3757"><div class="step-ref bg-step">3757</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServiceDemandPretest.feature@createBillDemand')</div></div><div class="time-cell passed">2242</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3757.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServiceDemandPretest.feature</div></div><div class="time-cell passed">1860</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3758"><div class="step-ref bg-step">3758</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">6</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3759"><div class="step-ref bg-step">3759</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceDemandConstants = read('../../business-services/constants/billing-service-demand.yaml')</div></div><div class="time-cell passed">6</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3760"><div class="step-ref bg-step">3760</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3761"><div class="step-ref bg-step">3761</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createDemandRequest = read('../../business-services/requestPayload/billing-service-demand/create.json')</div></div><div class="time-cell passed">566</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3762"><div class="step-ref bg-step">3762</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchDemandRequest = read('../../business-services/requestPayload/billing-service-demand/search.json')</div></div><div class="time-cell passed">7</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3763"><div class="step-ref bg-step">3763</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def updateDemandRequest = read('../../business-services/requestPayload/billing-service-demand/update.json')</div></div><div class="time-cell passed">591</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3764"><div class="step-ref bg-step">3764</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">86</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3765"><div class="step-ref bg-step">3765</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url createDemandUrl</div></div><div class="time-cell passed">63</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print createDemandRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3766"><div class="step-ref bg-step">3766</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request createDemandRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3767"><div class="step-ref bg-step">3767</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">501</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3768"><div class="step-ref bg-step">3768</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3769"><div class="step-ref bg-step">3769</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billingServiceDemandResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3770"><div class="step-ref bg-step">3770</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billingServiceDemandResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3771"><div class="step-ref bg-step">3771</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* print billingServiceDemandResponseBody</div></div><div class="time-cell passed">1</div></div><div class="preformatted" data-parent="3771">15:38:13.721 [print] {
  "ResponseInfo": {
    "ver": null,
    "resMsgId": null,
    "msgId": null,
    "apiId": null,
    "ts": null,
    "status": "201 CREATED"
  },
  "Demands": [
    {
      "taxPeriodFrom": 1628590091123,
      "businessService": "PT",
      "minimumAmountPayable": 1,
      "taxPeriodTo": 1628762891130,
      "fixedBillExpiryDate": null,
      "additionalDetails": null,
      "payer": null,
      "demandDetails": [
        {
          "demandId": "a268f313-f16f-4180-b339-e33bdc831f95",
          "taxHeadMasterCode": "PT_ADHOC_PENALTY",
          "collectionAmount": 0,
          "auditDetails": {
            "lastModifiedTime": 1628590093893,
            "createdBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
            "lastModifiedBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
            "createdTime": 1628590093893
          },
          "tenantId": "pb.amritsar",
          "id": "fc091a4f-4be7-42ee-afd3-f86fa5134297",
          "taxAmount": 200,
          "additionalDetails": null
        }
      ],
      "consumerType": "PropertyTax",
      "auditDetails": {
        "lastModifiedTime": 1628590093893,
        "createdBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
        "lastModifiedBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
        "createdTime": 1628590093893
      },
      "tenantId": "pb.amritsar",
      "consumerCode": "Consumer-Code-Test-706855",
      "id": "a268f313-f16f-4180-b339-e33bdc831f95",
      "billExpiryTime": null,
      "isPaymentCompleted": false,
      "status": "ACTIVE"
    }
  ],
  "CollectedReceipt": null
}</div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3772"><div class="step-ref bg-step">3772</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def Demands = billingServiceDemandResponseBody.Demands</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3773"><div class="step-ref bg-step">3773</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def demandId = Demands[0].id</div></div><div class="time-cell passed">23</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3774"><div class="step-ref bg-step">3774</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def consumerCode = Demands[0].consumerCode</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the status Created</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3775"><div class="step-ref bg-step">3775</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* assert billingServiceDemandResponseBody.ResponseInfo.status == commonConstants.expectedStatus.created</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand id is present</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3776"><div class="step-ref bg-step">3776</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].id == "#present"</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the tenantId of demand response is equal with current tenantId</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3777"><div class="step-ref bg-step">3777</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].tenantId == tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the consumer code of demand response is equal with defined consumerCode</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3778"><div class="step-ref bg-step">3778</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].consumerCode == consumerCode</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the consumerType of demand response is equal with defined consumerType</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3779"><div class="step-ref bg-step">3779</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].consumerType == consumerType</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the businessService of demand response is equal with defined businessService</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3780"><div class="step-ref bg-step">3780</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].businessService == businessService</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxPeriodFrom of demand response is equal with defined taxPeriodFrom</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3781"><div class="step-ref bg-step">3781</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].taxPeriodFrom == taxPeriodFrom</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxPeriodTo of demand response is equal with defined taxPeriodTo</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3782"><div class="step-ref bg-step">3782</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].taxPeriodTo == taxPeriodTo</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand details id is present in demand response body</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3783"><div class="step-ref bg-step">3783</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].id == "#present"</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demandId is present in demand response body</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3784"><div class="step-ref bg-step">3784</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].demandId == "#present"</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxHeadMasterCode of demand response is equal with defined taxHeadMasterCode</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3785"><div class="step-ref bg-step">3785</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].taxHeadMasterCode == taxHeadMasterCode</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxAmount of demand response is equal with defined taxAmount</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3786"><div class="step-ref bg-step">3786</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].taxAmount == taxAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the collectionAmount of demand response is equal with defined collectionAmount</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3787"><div class="step-ref bg-step">3787</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].collectionAmount == collectionAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the minimumAmountPayable of demand response is equal with defined minimumAmountPayable</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3788"><div class="step-ref bg-step">3788</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].minimumAmountPayable == minimumAmountPayable</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand status is equal with expected demand status `ACTIVE`</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3789"><div class="step-ref bg-step">3789</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].status == billingServiceDemandConstants.parameters.status</div></div><div class="time-cell passed">22</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3790"><div class="step-ref bg-step">3790</div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">10</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3791"><div class="step-ref bg-step">3791</div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3792"><div class="step-ref bg-step">3792</div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">27</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3793"><div class="step-ref bg-step">3793</div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3794"><div class="step-ref bg-step">3794</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServicePretest.feature@fetchBill')</div></div><div class="time-cell passed">946</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3794.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServicePretest.feature</div></div><div class="time-cell passed">657</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3795"><div class="step-ref bg-step">3795</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceConstants = read('../../business-services/constants/billing-service.yaml')</div></div><div class="time-cell passed">24</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3796"><div class="step-ref bg-step">3796</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionServiceConstants = read('../../business-services/constants/apportionService.yaml')</div></div><div class="time-cell passed">31</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3797"><div class="step-ref bg-step">3797</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = billingServiceConstants.parameters.businessService</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3798"><div class="step-ref bg-step">3798</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionbusinessService = apportionServiceConstants.parameters.businessService</div></div><div class="time-cell passed">10</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3799"><div class="step-ref bg-step">3799</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason1 = apportionServiceConstants.parameters.reason1</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3800"><div class="step-ref bg-step">3800</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason2 = apportionServiceConstants.parameters.reason2</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3801"><div class="step-ref bg-step">3801</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason3 = apportionServiceConstants.parameters.reason3</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3802"><div class="step-ref bg-step">3802</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason4 = apportionServiceConstants.parameters.reason4</div></div><div class="time-cell passed">25</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment">#* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3803"><div class="step-ref bg-step">3803</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillRequest = read('../../business-services/requestPayload/collection-services/fetchBill.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3804"><div class="step-ref bg-step">3804</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillRequest = read('../../business-services/requestPayload/collection-services/cancelBill.json')</div></div><div class="time-cell passed">386</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3805"><div class="step-ref bg-step">3805</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3806"><div class="step-ref bg-step">3806</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillParams =</div></div><div class="time-cell passed">0</div></div><div class="preformatted" data-parent="3806">{
   consumerCode: '#(consumerCode)',
   businessService: '#(businessService)',
   tenantId: '#(tenantId)'
}</div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3807"><div class="step-ref bg-step">3807</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url fetchBill</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3808"><div class="step-ref bg-step">3808</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And params fetchBillParams</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillParams</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3809"><div class="step-ref bg-step">3809</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request fetchBillRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3810"><div class="step-ref bg-step">3810</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">161</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillResponse</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3811"><div class="step-ref bg-step">3811</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3812"><div class="step-ref bg-step">3812</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def fetchBillResponse = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3813"><div class="step-ref bg-step">3813</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmount = response.Bill[0].totalAmount</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3814"><div class="step-ref bg-step">3814</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billId = response.Bill[0].id</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3815"><div class="step-ref bg-step">3815</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def txnAmount = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3816"><div class="step-ref bg-step">3816</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmountPaid = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3817"><div class="step-ref bg-step">3817</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalDue = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3818"><div class="step-ref bg-step">3818</div><div class="step-indent"> </div><div class="step-cell passed">* def paidBillIdError = collectionServicesConstants.errorMessages.paidBillId</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3819"><div class="step-ref bg-step">3819</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillIdError = collectionServicesConstants.errorMessages.invalidBillId</div></div><div class="time-cell passed">6</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3820"><div class="step-ref bg-step">3820</div><div class="step-indent"> </div><div class="step-cell passed">* def totalAmountPaidError = collectionServicesConstants.errorMessages.totalAmountPaidNull</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3821"><div class="step-ref bg-step">3821</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentModeError = collectionServicesConstants.errorMessages.invalidPaymentMode</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3822"><div class="step-ref bg-step">3822</div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantIdError = commonConstants.errorMessages.invalidTenantIdError</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3823"><div class="step-ref bg-step">3823</div><div class="step-indent"> </div><div class="step-cell passed">* def nullTenantIdError = commonConstants.errorMessages.nullParameterError</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3824"><div class="step-ref bg-step">3824</div><div class="step-indent"> </div><div class="step-cell passed">* def reason = collectionServicesConstants.parameters.reason</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3825"><div class="step-ref bg-step">3825</div><div class="step-indent"> </div><div class="step-cell passed">* def action = collectionServicesConstants.parameters.action</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3826"><div class="step-ref bg-step">3826</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDateError = collectionServicesConstants.errorMessages.instrumentDateAsNull</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3827"><div class="step-ref bg-step">3827</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentPastDateError = collectionServicesConstants.errorMessages.instrumentDatePastNinetyDays</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3828"><div class="step-ref bg-step">3828</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentFutureDateError = collectionServicesConstants.errorMessages.futureInstrumentDate</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3829"><div class="step-ref bg-step">3829</div><div class="step-indent"> </div><div class="step-cell passed">* def moreThanDueAmountError = collectionServicesConstants.errorMessages.moreThanDueAmount</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3830"><div class="step-ref bg-step">3830</div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberError = collectionServicesConstants.errorMessages.instrumentNumberAsEmptyString</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3831"><div class="step-ref bg-step">3831</div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberError = collectionServicesConstants.errorMessages.transactionNumberAsEmptyString</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3832"><div class="step-ref bg-step">3832</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/collectionServicesPretest.feature@createPayment')</div></div><div class="time-cell passed">689</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3832.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/collectionServicesPretest.feature</div></div><div class="time-cell passed">637</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3833"><div class="step-ref bg-step">3833</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">7</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3834"><div class="step-ref bg-step">3834</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3835"><div class="step-ref bg-step">3835</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3836"><div class="step-ref bg-step">3836</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def tenantId = tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3837"><div class="step-ref bg-step">3837</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentMode = collectionServicesConstants.parameters.paymentMode</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3838"><div class="step-ref bg-step">3838</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBy = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">6</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3839"><div class="step-ref bg-step">3839</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">12</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3840"><div class="step-ref bg-step">3840</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def payerName = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3841"><div class="step-ref bg-step">3841</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalDue = 0</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3842"><div class="step-ref bg-step">3842</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumber = collectionServicesConstants.parameters.transactionNumber</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3843"><div class="step-ref bg-step">3843</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumber = collectionServicesConstants.parameters.instrumentNumber</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3844"><div class="step-ref bg-step">3844</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCard = collectionServicesConstants.parameters.paymentMode2</div></div><div class="time-cell passed">6</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3845"><div class="step-ref bg-step">3845</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCheque = collectionServicesConstants.parameters.paymentModeForCheque</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3846"><div class="step-ref bg-step">3846</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberForCheque = collectionServicesConstants.parameters.transactionNumberForCheque</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3847"><div class="step-ref bg-step">3847</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberForCheque = collectionServicesConstants.parameters.instrumentNumberForCheque</div></div><div class="time-cell passed">10</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3848"><div class="step-ref bg-step">3848</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3849"><div class="step-ref bg-step">3849</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def ifscCode = collectionServicesConstants.parameters.ifscCode</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3850"><div class="step-ref bg-step">3850</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3851"><div class="step-ref bg-step">3851</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3852"><div class="step-ref bg-step">3852</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequest = read('../../business-services/requestPayload/collection-services/create.json')</div></div><div class="time-cell passed">22</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3853"><div class="step-ref bg-step">3853</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def workflowRequest = read('../../business-services/requestPayload/collection-services/workflow.json')</div></div><div class="time-cell passed">9</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3854"><div class="step-ref bg-step">3854</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPaymentRequest = read('../../business-services/requestPayload/collection-services/search.json')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3855"><div class="step-ref bg-step">3855</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTreceiptcount = read('../../business-services/requestPayload/collection-services/receiptcount.json')</div></div><div class="time-cell passed">6</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3856"><div class="step-ref bg-step">3856</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequestForCheque = read('../../business-services/requestPayload/collection-services/createPaymentWithCheque.json')</div></div><div class="time-cell passed">39</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3857"><div class="step-ref bg-step">3857</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def eChallanPaymentcount = read('../../business-services/requestPayload/collection-services/echallancount.json')</div></div><div class="time-cell passed">22</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3858"><div class="step-ref bg-step">3858</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">16</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3859"><div class="step-ref bg-step">3859</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = 'invalid_'+randomNumber(4)</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3860"><div class="step-ref bg-step">3860</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBusinessId = 'PT'+randomNumber(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3861"><div class="step-ref bg-step">3861</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentMode = randomString(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3862"><div class="step-ref bg-step">3862</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantId = randomString(5)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3863"><div class="step-ref bg-step">3863</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def negativeTotalAmount = '-'+randomNumber(4)</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3864"><div class="step-ref bg-step">3864</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url payment</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3865"><div class="step-ref bg-step">3865</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request createPaymentRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print createPaymentRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3866"><div class="step-ref bg-step">3866</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">428</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3867"><div class="step-ref bg-step">3867</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3868"><div class="step-ref bg-step">3868</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3869"><div class="step-ref bg-step">3869</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3870"><div class="step-ref bg-step">3870</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def Payments = collectionServicesResponseBody.Payments</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3871"><div class="step-ref bg-step">3871</div><div class="step-indent"> </div><div class="step-cell passed">* match response.ResponseInfo.status == '200 OK'</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3872"><div class="step-ref bg-step">3872</div><div class="step-indent"> </div><div class="step-cell passed">* def paymentId = collectionServicesResponseBody.Payments[0].id</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3873"><div class="step-ref bg-step">3873</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/collectionServicesPretest.feature@processworkflow')</div></div><div class="time-cell passed">1100</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3873.1"><div class="step-ref bg-step">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/collectionServicesPretest.feature</div></div><div class="time-cell passed">1055</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3874"><div class="step-ref bg-step">3874</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">22</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3875"><div class="step-ref bg-step">3875</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">7</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3876"><div class="step-ref bg-step">3876</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3877"><div class="step-ref bg-step">3877</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def tenantId = tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3878"><div class="step-ref bg-step">3878</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentMode = collectionServicesConstants.parameters.paymentMode</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3879"><div class="step-ref bg-step">3879</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBy = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3880"><div class="step-ref bg-step">3880</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">13</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3881"><div class="step-ref bg-step">3881</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def payerName = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3882"><div class="step-ref bg-step">3882</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalDue = 0</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3883"><div class="step-ref bg-step">3883</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumber = collectionServicesConstants.parameters.transactionNumber</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3884"><div class="step-ref bg-step">3884</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumber = collectionServicesConstants.parameters.instrumentNumber</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3885"><div class="step-ref bg-step">3885</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCard = collectionServicesConstants.parameters.paymentMode2</div></div><div class="time-cell passed">5</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3886"><div class="step-ref bg-step">3886</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCheque = collectionServicesConstants.parameters.paymentModeForCheque</div></div><div class="time-cell passed">11</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3887"><div class="step-ref bg-step">3887</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberForCheque = collectionServicesConstants.parameters.transactionNumberForCheque</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3888"><div class="step-ref bg-step">3888</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberForCheque = collectionServicesConstants.parameters.instrumentNumberForCheque</div></div><div class="time-cell passed">11</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3889"><div class="step-ref bg-step">3889</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">20</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3890"><div class="step-ref bg-step">3890</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def ifscCode = collectionServicesConstants.parameters.ifscCode</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3891"><div class="step-ref bg-step">3891</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">6</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3892"><div class="step-ref bg-step">3892</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3893"><div class="step-ref bg-step">3893</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequest = read('../../business-services/requestPayload/collection-services/create.json')</div></div><div class="time-cell passed">23</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3894"><div class="step-ref bg-step">3894</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def workflowRequest = read('../../business-services/requestPayload/collection-services/workflow.json')</div></div><div class="time-cell passed">24</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3895"><div class="step-ref bg-step">3895</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPaymentRequest = read('../../business-services/requestPayload/collection-services/search.json')</div></div><div class="time-cell passed">8</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3896"><div class="step-ref bg-step">3896</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTreceiptcount = read('../../business-services/requestPayload/collection-services/receiptcount.json')</div></div><div class="time-cell passed">4</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3897"><div class="step-ref bg-step">3897</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequestForCheque = read('../../business-services/requestPayload/collection-services/createPaymentWithCheque.json')</div></div><div class="time-cell passed">33</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3898"><div class="step-ref bg-step">3898</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def eChallanPaymentcount = read('../../business-services/requestPayload/collection-services/echallancount.json')</div></div><div class="time-cell passed">14</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3899"><div class="step-ref bg-step">3899</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">18</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3900"><div class="step-ref bg-step">3900</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = 'invalid_'+randomNumber(4)</div></div><div class="time-cell passed">3</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3901"><div class="step-ref bg-step">3901</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBusinessId = 'PT'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3902"><div class="step-ref bg-step">3902</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentMode = randomString(4)</div></div><div class="time-cell passed">12</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3903"><div class="step-ref bg-step">3903</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantId = randomString(5)</div></div><div class="time-cell passed">1</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3904"><div class="step-ref bg-step">3904</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def negativeTotalAmount = '-'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3905"><div class="step-ref bg-step">3905</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url collectionServiceWorkflowUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3906"><div class="step-ref bg-step">3906</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request workflowRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container"><div class="step-ref bg-step"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print workflowRequest</div></div><div class="time-cell comment"></div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3907"><div class="step-ref bg-step">3907</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">790</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3908"><div class="step-ref bg-step">3908</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3909"><div class="step-ref bg-step">3909</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row" data-parent="[16:134]bg"><div class="step-container" id="3910"><div class="step-ref bg-step">3910</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3911"><div class="step-ref passed">3911</div><div class="step-cell passed">* def key = randomString(6)</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-cell comment"># calling create pdf nosave pretest</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3912"><div class="step-ref passed">3912</div><div class="step-cell passed">* call read('../../core-services/pretests/pdfServiceCreateNoSave.feature@createPdfNosaveError')</div></div><div class="time-cell passed">2457</div></div><div class="step-row"><div class="step-container" id="3912.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-cell passed">com/egov/core-services/tests/../../core-services/pretests/pdfServiceCreateNoSave.feature</div></div><div class="time-cell passed">2445</div></div><div class="step-row"><div class="step-container" id="3913"><div class="step-ref passed">3913</div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/tests/collectionServicesCreate.feature@Create_PaymentWithValidBillID_01')</div></div><div class="time-cell passed">2257</div></div><div class="step-row"><div class="step-container" id="3913.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/tests/collectionServicesCreate.feature</div></div><div class="time-cell passed">2230</div></div><div class="step-row"><div class="step-container" id="3914"><div class="step-ref passed">3914</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/tests/billingServicesDemand.feature@create_01')</div></div><div class="time-cell passed">423</div></div><div class="step-row"><div class="step-container" id="3914.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/tests/billingServicesDemand.feature</div></div><div class="time-cell passed">347</div></div><div class="step-row"><div class="step-container" id="3915"><div class="step-ref passed">3915</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">18</div></div><div class="step-row"><div class="step-container" id="3916"><div class="step-ref passed">3916</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceDemandConstants = read('../../business-services/constants/billing-service-demand.yaml')</div></div><div class="time-cell passed">8</div></div><div class="step-row"><div class="step-container" id="3917"><div class="step-ref passed">3917</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="3918"><div class="step-ref passed">3918</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell passed">6</div></div><div class="step-row"><div class="step-container" id="3919"><div class="step-ref passed">3919</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def consumerType = mdmsStateBillingService.BusinessService[0].businessService</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="3920"><div class="step-ref passed">3920</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = mdmsStateBillingService.BusinessService[0].code</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3921"><div class="step-ref passed">3921</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxPeriodFrom = getCurrentEpochTime()</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="3922"><div class="step-ref passed">3922</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def daysFromToday = 2</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3923"><div class="step-ref passed">3923</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxPeriodTo = getEpochDate(daysFromToday)</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="3924"><div class="step-ref passed">3924</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxHeadMasterCodes = karate.jsonPath(mdmsStateBillingService, "$.TaxHeadMaster[?(@.service=='" + businessService + "')].code")</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container" id="3925"><div class="step-ref passed">3925</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxHeadMasterCode = taxHeadMasterCodes[randomNumber(taxHeadMasterCodes.length)]</div></div><div class="time-cell passed">10</div></div><div class="step-row"><div class="step-container" id="3926"><div class="step-ref passed">3926</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def taxAmount = 200</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3927"><div class="step-ref passed">3927</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionAmount = 0</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="3928"><div class="step-ref passed">3928</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def minimumAmountPayable = 1</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Steps to create a new Employee through HRMS</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3929"><div class="step-ref passed">3929</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServiceDemandPretest.feature@createBillDemand')</div></div><div class="time-cell passed">265</div></div><div class="step-row"><div class="step-container" id="3929.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServiceDemandPretest.feature</div></div><div class="time-cell passed">238</div></div><div class="step-row"><div class="step-container" id="3930"><div class="step-ref passed">3930</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">6</div></div><div class="step-row"><div class="step-container" id="3931"><div class="step-ref passed">3931</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceDemandConstants = read('../../business-services/constants/billing-service-demand.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3932"><div class="step-ref passed">3932</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container" id="3933"><div class="step-ref passed">3933</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createDemandRequest = read('../../business-services/requestPayload/billing-service-demand/create.json')</div></div><div class="time-cell passed">24</div></div><div class="step-row"><div class="step-container" id="3934"><div class="step-ref passed">3934</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchDemandRequest = read('../../business-services/requestPayload/billing-service-demand/search.json')</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container" id="3935"><div class="step-ref passed">3935</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def updateDemandRequest = read('../../business-services/requestPayload/billing-service-demand/update.json')</div></div><div class="time-cell passed">28</div></div><div class="step-row"><div class="step-container" id="3936"><div class="step-ref passed">3936</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">6</div></div><div class="step-row"><div class="step-container" id="3937"><div class="step-ref passed">3937</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url createDemandUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print createDemandRequest</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3938"><div class="step-ref passed">3938</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request createDemandRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3939"><div class="step-ref passed">3939</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">155</div></div><div class="step-row"><div class="step-container" id="3940"><div class="step-ref passed">3940</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3941"><div class="step-ref passed">3941</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billingServiceDemandResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3942"><div class="step-ref passed">3942</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billingServiceDemandResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3943"><div class="step-ref passed">3943</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* print billingServiceDemandResponseBody</div></div><div class="time-cell passed">1</div></div><div class="preformatted" data-parent="3943">15:38:17.035 [print] {
  "ResponseInfo": {
    "ver": null,
    "resMsgId": null,
    "msgId": null,
    "apiId": null,
    "ts": null,
    "status": "201 CREATED"
  },
  "Demands": [
    {
      "taxPeriodFrom": 1628590096748,
      "businessService": "PT",
      "minimumAmountPayable": 1,
      "taxPeriodTo": 1628762896754,
      "fixedBillExpiryDate": null,
      "additionalDetails": null,
      "payer": null,
      "demandDetails": [
        {
          "demandId": "151aa081-f235-4b09-9127-9c1fafa0168d",
          "taxHeadMasterCode": "PT_TIME_REBATE",
          "collectionAmount": 0,
          "auditDetails": {
            "lastModifiedTime": 1628590097224,
            "createdBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
            "lastModifiedBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
            "createdTime": 1628590097224
          },
          "tenantId": "pb.amritsar",
          "id": "785ccf82-abff-4100-9342-c032695cfd92",
          "taxAmount": 200,
          "additionalDetails": null
        }
      ],
      "consumerType": "PropertyTax",
      "auditDetails": {
        "lastModifiedTime": 1628590097224,
        "createdBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
        "lastModifiedBy": "959745fe-66bc-45b2-9a35-609ec994abd4",
        "createdTime": 1628590097224
      },
      "tenantId": "pb.amritsar",
      "consumerCode": "Consumer-Code-Test-43525",
      "id": "151aa081-f235-4b09-9127-9c1fafa0168d",
      "billExpiryTime": null,
      "isPaymentCompleted": false,
      "status": "ACTIVE"
    }
  ],
  "CollectedReceipt": null
}</div><div class="step-row"><div class="step-container" id="3944"><div class="step-ref passed">3944</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def Demands = billingServiceDemandResponseBody.Demands</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3945"><div class="step-ref passed">3945</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def demandId = Demands[0].id</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3946"><div class="step-ref passed">3946</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def consumerCode = Demands[0].consumerCode</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the status Created</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3947"><div class="step-ref passed">3947</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* assert billingServiceDemandResponseBody.ResponseInfo.status == commonConstants.expectedStatus.created</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand id is present</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3948"><div class="step-ref passed">3948</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].id == "#present"</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the tenantId of demand response is equal with current tenantId</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3949"><div class="step-ref passed">3949</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].tenantId == tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the consumer code of demand response is equal with defined consumerCode</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3950"><div class="step-ref passed">3950</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].consumerCode == consumerCode</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the consumerType of demand response is equal with defined consumerType</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3951"><div class="step-ref passed">3951</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].consumerType == consumerType</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the businessService of demand response is equal with defined businessService</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3952"><div class="step-ref passed">3952</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].businessService == businessService</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxPeriodFrom of demand response is equal with defined taxPeriodFrom</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3953"><div class="step-ref passed">3953</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].taxPeriodFrom == taxPeriodFrom</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxPeriodTo of demand response is equal with defined taxPeriodTo</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3954"><div class="step-ref passed">3954</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].taxPeriodTo == taxPeriodTo</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand details id is present in demand response body</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3955"><div class="step-ref passed">3955</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].id == "#present"</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demandId is present in demand response body</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3956"><div class="step-ref passed">3956</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].demandId == "#present"</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxHeadMasterCode of demand response is equal with defined taxHeadMasterCode</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3957"><div class="step-ref passed">3957</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].taxHeadMasterCode == taxHeadMasterCode</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the taxAmount of demand response is equal with defined taxAmount</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3958"><div class="step-ref passed">3958</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].taxAmount == taxAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the collectionAmount of demand response is equal with defined collectionAmount</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3959"><div class="step-ref passed">3959</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].demandDetails[0].collectionAmount == collectionAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the minimumAmountPayable of demand response is equal with defined minimumAmountPayable</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3960"><div class="step-ref passed">3960</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].minimumAmountPayable == minimumAmountPayable</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># Validate the demand status is equal with expected demand status `ACTIVE`</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3961"><div class="step-ref passed">3961</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match billingServiceDemandResponseBody.Demands[0].status == billingServiceDemandConstants.parameters.status</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3962"><div class="step-ref passed">3962</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3963"><div class="step-ref passed">3963</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3964"><div class="step-ref passed">3964</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container" id="3965"><div class="step-ref passed">3965</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3966"><div class="step-ref passed">3966</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/billingServicePretest.feature@fetchBill')</div></div><div class="time-cell passed">244</div></div><div class="step-row"><div class="step-container" id="3966.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/billingServicePretest.feature</div></div><div class="time-cell passed">233</div></div><div class="step-row"><div class="step-container" id="3967"><div class="step-ref passed">3967</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def billingServiceConstants = read('../../business-services/constants/billing-service.yaml')</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container" id="3968"><div class="step-ref passed">3968</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionServiceConstants = read('../../business-services/constants/apportionService.yaml')</div></div><div class="time-cell passed">7</div></div><div class="step-row"><div class="step-container" id="3969"><div class="step-ref passed">3969</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def businessService = billingServiceConstants.parameters.businessService</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3970"><div class="step-ref passed">3970</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def apportionbusinessService = apportionServiceConstants.parameters.businessService</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container" id="3971"><div class="step-ref passed">3971</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason1 = apportionServiceConstants.parameters.reason1</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3972"><div class="step-ref passed">3972</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason2 = apportionServiceConstants.parameters.reason2</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="3973"><div class="step-ref passed">3973</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason3 = apportionServiceConstants.parameters.reason3</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3974"><div class="step-ref passed">3974</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillReason4 = apportionServiceConstants.parameters.reason4</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment">#* def consumerCode = 'Consumer-Code-Test-' + ranInteger(6)</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3975"><div class="step-ref passed">3975</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillRequest = read('../../business-services/requestPayload/collection-services/fetchBill.json')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3976"><div class="step-ref passed">3976</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def cancelBillRequest = read('../../business-services/requestPayload/collection-services/cancelBill.json')</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container" id="3977"><div class="step-ref passed">3977</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3978"><div class="step-ref passed">3978</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def fetchBillParams =</div></div><div class="time-cell passed">1</div></div><div class="preformatted" data-parent="3978">{
   consumerCode: '#(consumerCode)',
   businessService: '#(businessService)',
   tenantId: '#(tenantId)'
}</div><div class="step-row"><div class="step-container" id="3979"><div class="step-ref passed">3979</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url fetchBill</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3980"><div class="step-ref passed">3980</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And params fetchBillParams</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillParams</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3981"><div class="step-ref passed">3981</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request fetchBillRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3982"><div class="step-ref passed">3982</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">189</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print fetchBillResponse</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="3983"><div class="step-ref passed">3983</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 201</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3984"><div class="step-ref passed">3984</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def fetchBillResponse = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3985"><div class="step-ref passed">3985</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmount = response.Bill[0].totalAmount</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="3986"><div class="step-ref passed">3986</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def billId = response.Bill[0].id</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="3987"><div class="step-ref passed">3987</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def txnAmount = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3988"><div class="step-ref passed">3988</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalAmountPaid = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3989"><div class="step-ref passed">3989</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def totalDue = totalAmount</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="3990"><div class="step-ref passed">3990</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBillIdError = collectionServicesConstants.errorMessages.paidBillId</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3991"><div class="step-ref passed">3991</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillIdError = collectionServicesConstants.errorMessages.invalidBillId</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="3992"><div class="step-ref passed">3992</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalAmountPaidError = collectionServicesConstants.errorMessages.totalAmountPaidNull</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="3993"><div class="step-ref passed">3993</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentModeError = collectionServicesConstants.errorMessages.invalidPaymentMode</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3994"><div class="step-ref passed">3994</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantIdError = commonConstants.errorMessages.invalidTenantIdError</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="3995"><div class="step-ref passed">3995</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def nullTenantIdError = commonConstants.errorMessages.nullParameterError</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3996"><div class="step-ref passed">3996</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def reason = collectionServicesConstants.parameters.reason</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="3997"><div class="step-ref passed">3997</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def action = collectionServicesConstants.parameters.action</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="3998"><div class="step-ref passed">3998</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDateError = collectionServicesConstants.errorMessages.instrumentDateAsNull</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="3999"><div class="step-ref passed">3999</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentPastDateError = collectionServicesConstants.errorMessages.instrumentDatePastNinetyDays</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="4000"><div class="step-ref passed">4000</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentFutureDateError = collectionServicesConstants.errorMessages.futureInstrumentDate</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="4001"><div class="step-ref passed">4001</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def moreThanDueAmountError = collectionServicesConstants.errorMessages.moreThanDueAmount</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="4002"><div class="step-ref passed">4002</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberError = collectionServicesConstants.errorMessages.instrumentNumberAsEmptyString</div></div><div class="time-cell passed">7</div></div><div class="step-row"><div class="step-container" id="4003"><div class="step-ref passed">4003</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberError = collectionServicesConstants.errorMessages.transactionNumberAsEmptyString</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="4004"><div class="step-ref passed">4004</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/collectionServicesPretest.feature@createPayment')</div></div><div class="time-cell passed">639</div></div><div class="step-row"><div class="step-container" id="4004.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/collectionServicesPretest.feature</div></div><div class="time-cell passed">570</div></div><div class="step-row"><div class="step-container" id="4005"><div class="step-ref passed">4005</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">11</div></div><div class="step-row"><div class="step-container" id="4006"><div class="step-ref passed">4006</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container" id="4007"><div class="step-ref passed">4007</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="4008"><div class="step-ref passed">4008</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def tenantId = tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="4009"><div class="step-ref passed">4009</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentMode = collectionServicesConstants.parameters.paymentMode</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="4010"><div class="step-ref passed">4010</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBy = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">9</div></div><div class="step-row"><div class="step-container" id="4011"><div class="step-ref passed">4011</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container" id="4012"><div class="step-ref passed">4012</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def payerName = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="4013"><div class="step-ref passed">4013</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalDue = 0</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="4014"><div class="step-ref passed">4014</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumber = collectionServicesConstants.parameters.transactionNumber</div></div><div class="time-cell passed">6</div></div><div class="step-row"><div class="step-container" id="4015"><div class="step-ref passed">4015</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumber = collectionServicesConstants.parameters.instrumentNumber</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="4016"><div class="step-ref passed">4016</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCard = collectionServicesConstants.parameters.paymentMode2</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="4017"><div class="step-ref passed">4017</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCheque = collectionServicesConstants.parameters.paymentModeForCheque</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="4018"><div class="step-ref passed">4018</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberForCheque = collectionServicesConstants.parameters.transactionNumberForCheque</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="4019"><div class="step-ref passed">4019</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberForCheque = collectionServicesConstants.parameters.instrumentNumberForCheque</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container" id="4020"><div class="step-ref passed">4020</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">18</div></div><div class="step-row"><div class="step-container" id="4021"><div class="step-ref passed">4021</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def ifscCode = collectionServicesConstants.parameters.ifscCode</div></div><div class="time-cell passed">9</div></div><div class="step-row"><div class="step-container" id="4022"><div class="step-ref passed">4022</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">7</div></div><div class="step-row"><div class="step-container" id="4023"><div class="step-ref passed">4023</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="4024"><div class="step-ref passed">4024</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequest = read('../../business-services/requestPayload/collection-services/create.json')</div></div><div class="time-cell passed">35</div></div><div class="step-row"><div class="step-container" id="4025"><div class="step-ref passed">4025</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def workflowRequest = read('../../business-services/requestPayload/collection-services/workflow.json')</div></div><div class="time-cell passed">11</div></div><div class="step-row"><div class="step-container" id="4026"><div class="step-ref passed">4026</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPaymentRequest = read('../../business-services/requestPayload/collection-services/search.json')</div></div><div class="time-cell passed">5</div></div><div class="step-row"><div class="step-container" id="4027"><div class="step-ref passed">4027</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTreceiptcount = read('../../business-services/requestPayload/collection-services/receiptcount.json')</div></div><div class="time-cell passed">6</div></div><div class="step-row"><div class="step-container" id="4028"><div class="step-ref passed">4028</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequestForCheque = read('../../business-services/requestPayload/collection-services/createPaymentWithCheque.json')</div></div><div class="time-cell passed">19</div></div><div class="step-row"><div class="step-container" id="4029"><div class="step-ref passed">4029</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def eChallanPaymentcount = read('../../business-services/requestPayload/collection-services/echallancount.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="4030"><div class="step-ref passed">4030</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">7</div></div><div class="step-row"><div class="step-container" id="4031"><div class="step-ref passed">4031</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = 'invalid_'+randomNumber(4)</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="4032"><div class="step-ref passed">4032</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBusinessId = 'PT'+randomNumber(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="4033"><div class="step-ref passed">4033</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentMode = randomString(4)</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="4034"><div class="step-ref passed">4034</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantId = randomString(5)</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="4035"><div class="step-ref passed">4035</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def negativeTotalAmount = '-'+randomNumber(4)</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="4036"><div class="step-ref passed">4036</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url payment</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="4037"><div class="step-ref passed">4037</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request createPaymentRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print createPaymentRequest</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="4038"><div class="step-ref passed">4038</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">377</div></div><div class="step-row"><div class="step-container" id="4039"><div class="step-ref passed">4039</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="4040"><div class="step-ref passed">4040</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="4041"><div class="step-ref passed">4041</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="4042"><div class="step-ref passed">4042</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def Payments = collectionServicesResponseBody.Payments</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="4043"><div class="step-ref passed">4043</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* match response.ResponseInfo.status == '200 OK'</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="4044"><div class="step-ref passed">4044</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentId = collectionServicesResponseBody.Payments[0].id</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="4045"><div class="step-ref passed">4045</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* call read('../../business-services/pretest/collectionServicesPretest.feature@processworkflow')</div></div><div class="time-cell passed">874</div></div><div class="step-row"><div class="step-container" id="4045.1"><div class="step-ref passed">&gt;&gt;</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">com/egov/core-services/tests/../../business-services/pretest/collectionServicesPretest.feature</div></div><div class="time-cell passed">843</div></div><div class="step-row"><div class="step-container" id="4046"><div class="step-ref passed">4046</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def jsUtils = read('classpath:com/egov/utils/jsUtils.js')</div></div><div class="time-cell passed">11</div></div><div class="step-row"><div class="step-container" id="4047"><div class="step-ref passed">4047</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def collectionServicesConstants = read('../../business-services/constants/collection-services.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="4048"><div class="step-ref passed">4048</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def commonConstants = read('../../common-services/constants/genericConstants.yaml')</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="4049"><div class="step-ref passed">4049</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def tenantId = tenantId</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="4050"><div class="step-ref passed">4050</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentMode = collectionServicesConstants.parameters.paymentMode</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="4051"><div class="step-ref passed">4051</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paidBy = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="4052"><div class="step-ref passed">4052</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def mobileNumber = '78' + randomMobileNumGen(8)</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="4053"><div class="step-ref passed">4053</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def payerName = 'Payer ' + randomString(10)</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="4054"><div class="step-ref passed">4054</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def totalDue = 0</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="4055"><div class="step-ref passed">4055</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumber = collectionServicesConstants.parameters.transactionNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="4056"><div class="step-ref passed">4056</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumber = collectionServicesConstants.parameters.instrumentNumber</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="4057"><div class="step-ref passed">4057</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCard = collectionServicesConstants.parameters.paymentMode2</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="4058"><div class="step-ref passed">4058</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def paymentModeForCheque = collectionServicesConstants.parameters.paymentModeForCheque</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="4059"><div class="step-ref passed">4059</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def transactionNumberForCheque = collectionServicesConstants.parameters.transactionNumberForCheque</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="4060"><div class="step-ref passed">4060</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentNumberForCheque = collectionServicesConstants.parameters.instrumentNumberForCheque</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="4061"><div class="step-ref passed">4061</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def instrumentDate = getPastEpochDate(1)</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="4062"><div class="step-ref passed">4062</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def ifscCode = collectionServicesConstants.parameters.ifscCode</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="4063"><div class="step-ref passed">4063</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="4064"><div class="step-ref passed">4064</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = generateUUID()</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="4065"><div class="step-ref passed">4065</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequest = read('../../business-services/requestPayload/collection-services/create.json')</div></div><div class="time-cell passed">10</div></div><div class="step-row"><div class="step-container" id="4066"><div class="step-ref passed">4066</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def workflowRequest = read('../../business-services/requestPayload/collection-services/workflow.json')</div></div><div class="time-cell passed">6</div></div><div class="step-row"><div class="step-container" id="4067"><div class="step-ref passed">4067</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPaymentRequest = read('../../business-services/requestPayload/collection-services/search.json')</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="4068"><div class="step-ref passed">4068</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def searchPTreceiptcount = read('../../business-services/requestPayload/collection-services/receiptcount.json')</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="4069"><div class="step-ref passed">4069</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def createPaymentRequestForCheque = read('../../business-services/requestPayload/collection-services/createPaymentWithCheque.json')</div></div><div class="time-cell passed">21</div></div><div class="step-row"><div class="step-container" id="4070"><div class="step-ref passed">4070</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def eChallanPaymentcount = read('../../business-services/requestPayload/collection-services/echallancount.json')</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="4071"><div class="step-ref passed">4071</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* configure headers = read('classpath:com/egov/utils/websCommonHeaders.js')</div></div><div class="time-cell passed">6</div></div><div class="step-row"><div class="step-container" id="4072"><div class="step-ref passed">4072</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBillId = 'invalid_'+randomNumber(4)</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="4073"><div class="step-ref passed">4073</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidBusinessId = 'PT'+randomNumber(4)</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="4074"><div class="step-ref passed">4074</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidPaymentMode = randomString(4)</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="4075"><div class="step-ref passed">4075</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def invalidTenantId = randomString(5)</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="4076"><div class="step-ref passed">4076</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">* def negativeTotalAmount = '-'+randomNumber(4)</div></div><div class="time-cell passed">3</div></div><div class="step-row"><div class="step-container" id="4077"><div class="step-ref passed">4077</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Given url collectionServiceWorkflowUrl</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="4078"><div class="step-ref passed">4078</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And request workflowRequest</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container"><div class="step-ref passed"></div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell comment"># * print workflowRequest</div></div><div class="time-cell comment"></div></div><div class="step-row"><div class="step-container" id="4079"><div class="step-ref passed">4079</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">733</div></div><div class="step-row"><div class="step-container" id="4080"><div class="step-ref passed">4080</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">Then status 200</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="4081"><div class="step-ref passed">4081</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="4082"><div class="step-ref passed">4082</div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-indent"> </div><div class="step-cell passed">And def collectionServicesResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="4083"><div class="step-ref passed">4083</div><div class="step-indent"> </div><div class="step-cell passed">* def Payments = Payments</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="4084"><div class="step-ref passed">4084</div><div class="step-indent"> </div><div class="step-cell passed">* def Bill = Payments[0].paymentDetails[0].bill</div></div><div class="time-cell passed">1</div></div><div class="step-row"><div class="step-container" id="4085"><div class="step-ref passed">4085</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreateNoSavePayload = read('../../core-services/requestPayload/pdf-service/pdfCreateNoSave.json')</div></div><div class="time-cell passed">4</div></div><div class="step-row"><div class="step-container" id="4086"><div class="step-ref passed">4086</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreateNoSavePayloadFirst = pdfCreateNoSavePayload.WS</div></div><div class="time-cell passed">2</div></div><div class="step-row"><div class="step-container" id="4087"><div class="step-ref passed">4087</div><div class="step-indent"> </div><div class="step-cell passed">* def pdfCreateNoSaveParam =</div></div><div class="time-cell passed">2</div></div><div class="preformatted" data-parent="4087">{
 key: '#(key)',
 tenantId: '#(tenantId)'
}</div><div class="step-row"><div class="step-container" id="4088"><div class="step-ref passed">4088</div><div class="step-indent"> </div><div class="step-cell passed">Given url createNoSavePdf</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="4089"><div class="step-ref passed">4089</div><div class="step-indent"> </div><div class="step-cell passed">And params pdfCreateNoSaveParam</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="4090"><div class="step-ref passed">4090</div><div class="step-indent"> </div><div class="step-cell passed">And request pdfCreateNoSavePayload</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="4091"><div class="step-ref passed">4091</div><div class="step-indent"> </div><div class="step-cell passed">When method post</div></div><div class="time-cell passed">179</div></div><div class="step-row"><div class="step-container" id="4092"><div class="step-ref passed">4092</div><div class="step-indent"> </div><div class="step-cell passed">Then status 400</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="4093"><div class="step-ref passed">4093</div><div class="step-indent"> </div><div class="step-cell passed">And def pdfCreateNoSaveResponseHeader = responseHeaders</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="4094"><div class="step-ref passed">4094</div><div class="step-indent"> </div><div class="step-cell passed">And def pdfCreateNoSaveResponseBody = response</div></div><div class="time-cell passed">0</div></div><div class="step-row"><div class="step-container" id="4095"><div class="step-ref passed">4095</div><div class="step-cell passed">* pdfCreateNoSaveResponseBody.message == pdfCreateConstant.errorMessages.invalidWsKey</div></div><div class="time-cell passed">2</div></div></div></div>
    </div>   
  </body>
</html>